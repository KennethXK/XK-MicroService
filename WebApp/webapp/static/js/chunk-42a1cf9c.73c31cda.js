(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42a1cf9c","chunk-4bfdde68","chunk-5911c282","chunk-2fb5ed3e","chunk-ff4795ba","chunk-2d2105d3","chunk-2d230fe7"],{"0051":function(t,e,n){},"01f1":function(t,e,n){"use strict";n.r(e);var i=n("b76a"),a=n.n(i),o=n("a85b"),s={itemBtns:function(t,e,n,i){var a=this.$listeners,o=a.copyItem,s=a.deleteItem;return[t("span",{class:"drawing-item-copy",attrs:{title:"复制"},on:{click:function(t){o(e,i),t.stopPropagation()}}},[t("i",{class:"el-icon-copy-document"})]),t("span",{class:"drawing-item-delete",attrs:{title:"删除"},on:{click:function(t){s(n,i),t.stopPropagation()}}},[t("i",{class:"el-icon-delete"})])]}},l={colFormItem:function(t,e,n,i){var a=this,l=this.$listeners.activeItem,r=this.activeId===e.formId?"drawing-item active-from-item":"drawing-item";return this.formConf.unFocusedComponentBorder&&(r+=" unfocus-bordered"),t("el-col",{attrs:{span:e.span},class:r,nativeOn:{click:function(t){l(e),t.stopPropagation()}}},[t("el-form-item",{attrs:{"label-width":e.labelWidth?"".concat(e.labelWidth,"px"):null,label:e.label,required:e.isRequired}},[t(o["a"],{key:e.renderKey,attrs:{conf:e},on:{input:function(t){a.$set(e,"defaultValue",t)}}})]),s.itemBtns.apply(this,arguments)])},rowFormItem:function(t,e,n,i){var o=this.$listeners.activeItem,l=this.activeId===e.formId?"drawing-row-item active-from-item":"drawing-row-item",c=r.apply(this,arguments);return"flex"===e.type&&(c=t("el-row",{attrs:{type:e.type,justify:e.justify,align:e.align}},[c])),t("el-col",{attrs:{span:e.span}},[t("el-row",{attrs:{gutter:e.gutter},class:l,nativeOn:{click:function(t){o(e),t.stopPropagation()}}},[t("span",{class:"component-name"},[e.componentName]),t(a.a,{attrs:{list:e.children,animation:340,group:"componentsGroup"},class:"drag-wrapper"},[c]),s.itemBtns.apply(this,arguments)])])}};function r(t,e,n,i){var a=this;return Array.isArray(e.children)?e.children.map((function(n,i){var o=l[n.layout];return o?o.call(a,t,n,i,e.children):c()})):null}function c(){throw new Error("没有与".concat(this.element.layout,"匹配的layout"))}var u,d,p={components:{render:o["a"],draggable:a.a},props:["element","index","drawingList","activeId","formConf"],render:function(t){var e=l[this.element.layout];return e?e.call(this,t,this.element,this.index,this.drawingList):c()}},h=p,f=n("2877"),m=Object(f["a"])(h,u,d,!1,null,null,null);e["default"]=m.exports},"0259":function(t,e,n){"use strict";n("2f25")},"02fd":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("div",{staticClass:"filter-left"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"搜索...",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")])],1),t._v(" "),n("div",{staticClass:"filter-right"},[n("router-link",{attrs:{to:"/tool/flowCreate/"}},[n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-plus"}},[t._v("添加")])],1),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("编辑")]),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete()}}},[t._v("删除")])],1)]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"90%"},attrs:{data:t.list,size:"small"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),n("el-table-column",{attrs:{label:"流程编号",prop:"code",sortable:"custom",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(i)}}},[t._v(t._s(i.code))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"流程标题",prop:"title",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"关联表单",prop:"formName",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"启用日期",sortable:"custom",prop:"useDate",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"级别",sortable:"custom",prop:"level",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Job.Delete"],expression:"['BaseService.Job.Delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount > 0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=(n("ac6a"),n("8d41"),"@@wavesContext");function s(t,e){function n(n){var i=Object.assign({},e.value),a=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),o=a.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var s=o.getBoundingClientRect(),l=o.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":(l=document.createElement("span"),l.className="waves-ripple",l.style.height=l.style.width=Math.max(s.width,s.height)+"px",o.appendChild(l)),a.type){case"center":l.style.top=s.height/2-l.offsetHeight/2+"px",l.style.left=s.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(n.pageY-s.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(n.pageX-s.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=a.color,l.className="waves-ripple z-active",!1}}return t[o]?t[o].removeHandle=n:t[o]={removeHandle:n},n}var l={bind:function(t,e){t.addEventListener("click",s(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[o].removeHandle,!1),t.addEventListener("click",s(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[o].removeHandle,!1),t[o]=null,delete t[o]}},r=function(t){t.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(r)),l.install=r;var c=l,u=n("333d"),d=n("4381"),p={name:"Flow",components:{Pagination:u["a"]},directives:{waves:c,permission:d["a"]},data:function(){return{list:null,totalCount:0,listLoading:!0,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:20},page:1,multipleSelection:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/business/flow",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},handleFilter:function(){this.page=1,this.getList()},handleUpdate:function(t){if(t)this.$router.push({path:"/tool/flowEdit/"+t.id});else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.$router.push({path:"/tool/flowEdit/"+this.multipleSelection[0].id})}},handleDelete:function(){var t=this;this.multipleSelection.length<1?this.$message({message:"删除至少选择一行数据",type:"warning"}):this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[];t.multipleSelection.forEach((function(t){var n=t.id;e.push(n)})),t.$axios.posts("/api/business/flow/delete",e).then((function(e){t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)}}},h=p,f=n("2877"),m=Object(f["a"])(h,i,a,!1,null,null,null);e["default"]=m.exports},"0384":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},a=[],o={},s=o,l=n("2877"),r=Object(l["a"])(s,i,a,!1,null,null,null);e["default"]=r.exports},"04a6":function(t,e,n){"use strict";n("956a")},"0595":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"tool",staticClass:"flow-menu"},t._l(t.menuList,(function(e,i){return n("div",{key:i},[n("span",{staticClass:"ef-node-pmenu",on:{click:function(t){e.open=!e.open}}},[n("i",{class:{"el-icon-caret-bottom":e.open,"el-icon-caret-right":!e.open}}),t._v(" "+t._s(e.name))]),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"menu.open"}],staticClass:"ef-node-menu-ul"},[n("draggable",{attrs:{options:t.draggableOptions},on:{end:t.end,start:t.move},model:{value:e.children,callback:function(n){t.$set(e,"children",n)},expression:"menu.children"}},t._l(e.children,(function(e,i){return n("li",{key:i,staticClass:"ef-node-menu-li",attrs:{type:e.type}},[n("i",{class:e.ico}),t._v(" "+t._s(e.name)+"\n                ")])})),0)],1)])})),0)},a=[],o=n("b76a"),s=n.n(o),l={left:-1,top:-1},r={data:function(){return{activeNames:"1",draggableOptions:{preventOnFilter:!1,sort:!1,disabled:!1,ghostClass:"tt",forceFallback:!0},defaultOpeneds:["1","2"],menuList:[{id:"1",type:"group",name:"基础节点",ico:"el-icon-video-play",open:!0,children:[{id:"11",type:"start",name:"流程开始",ico:"el-icon-time",style:{}},{id:"12",type:"task",name:"任务节点",ico:"el-icon-odometer",style:{}},{id:"11",type:"end",name:"流程结束",ico:"el-icon-switch-button",style:{}}]},{id:"2",type:"group",name:"状态节点",ico:"el-icon-video-pause",open:!0,children:[{id:"21",type:"judge",name:"判断节点",ico:"el-icon-sort",style:{}},{id:"22",type:"status",name:"任务状态",ico:"el-icon-refresh-left",style:{}}]}],nodeMenu:{}}},components:{draggable:s.a},created:function(){this.isFirefox()&&(document.body.ondrop=function(t){l.left=t.layerX,l.top=t.clientY-50,t.preventDefault(),t.stopPropagation()})},methods:{getMenuByType:function(t){for(var e=0;e<this.menuList.length;e++)for(var n=this.menuList[e].children,i=0;i<n.length;i++)if(n[i].type===t)return n[i]},move:function(t,e,n,i){var a=t.item.attributes.type.nodeValue;this.nodeMenu=this.getMenuByType(a)},end:function(t,e){this.$emit("addNode",t,this.nodeMenu,l)},isFirefox:function(){var t=navigator.userAgent;return t.indexOf("Firefox")>-1}}},c=r,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},"0c93":function(t,e,n){},"0f66":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-document"},on:{click:t.handleDownload}},[t._v("Export")]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"Id",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Main Information",align:"center"}},[n("el-table-column",{attrs:{label:"Title"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.title)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Author",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",[t._v(t._s(e.row.author))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Readings",width:"115",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.pageviews)+"\n        ")]}}])})],1),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"Date",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-time"}),t._v(" "),n("span",[t._v(t._s(t._f("parseTime")(e.row.timestamp,"{y}-{m}-{d} {h}:{i}")))])]}}])})],1)],1)},a=[],o=n("2423"),s=n("ed08"),l={name:"MergeHeader",data:function(){return{list:null,listLoading:!0,downloadLoading:!1}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(o["a"])(this.listQuery).then((function(e){t.list=e.data.items,t.listLoading=!1}))},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([n.e("chunk-d159a5f0"),n.e("chunk-581b2547")]).then(n.bind(null,"4bf8d")).then((function(e){var n=[["Id","Main Information","","","Date"]],i=["","Title","Author","Readings",""],a=["id","title","author","pageviews","display_time"],o=t.list,s=t.formatJson(a,o),l=["A1:A2","B1:D1","E1:E2"];e.export_json_to_excel({multiHeader:n,header:i,merges:l,data:s}),t.downloadLoading=!1}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return"timestamp"===t?Object(s["j"])(e[t]):e[t]}))}))}}},r=l,c=n("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);e["default"]=u.exports},"152c":function(t,e,n){},1819:function(t,e,n){"use strict";n("1fd1")},"18bc":function(t,e,n){},"1db4":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wscn-http404-container"},[n("div",{staticClass:"wscn-http404"},[t._m(0),t._v(" "),n("div",{staticClass:"bullshit"},[n("div",{staticClass:"bullshit__oops"},[t._v("OOPS!")]),t._v(" "),t._m(1),t._v(" "),n("div",{staticClass:"bullshit__headline"},[t._v(t._s(t.message))]),t._v(" "),n("div",{staticClass:"bullshit__info"},[t._v("Please check that the URL you entered is correct, or click the button below to return to the homepage.")]),t._v(" "),n("a",{staticClass:"bullshit__return-home",attrs:{href:""}},[t._v("Back to home")])])])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pic-404"},[i("img",{staticClass:"pic-404__parent",attrs:{src:n("a36b"),alt:"404"}}),t._v(" "),i("img",{staticClass:"pic-404__child left",attrs:{src:n("26fc"),alt:"404"}}),t._v(" "),i("img",{staticClass:"pic-404__child mid",attrs:{src:n("26fc"),alt:"404"}}),t._v(" "),i("img",{staticClass:"pic-404__child right",attrs:{src:n("26fc"),alt:"404"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bullshit__info"},[t._v("All rights reserved\n        "),n("a",{staticStyle:{color:"#20a0ff"},attrs:{href:"https://wallstreetcn.com",target:"_blank"}},[t._v("wallstreetcn")])])}],o={name:"Page404",computed:{message:function(){return"The webmaster said that you can not enter this page..."}}},s=o,l=(n("89a2"),n("2877")),r=Object(l["a"])(s,i,a,!1,null,"26fcd89f",null);e["default"]=r.exports},"1fd1":function(t,e,n){},"234c":function(t,e,n){},2423:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("b775");function a(t){return Object(i["a"])({url:"/vue-element-admin/article/list",method:"get",params:t})}},2430:function(t,e,n){"use strict";n("3eb9")},"24e2":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"errPage-container"},[n("el-button",{staticClass:"pan-back-btn",attrs:{icon:"el-icon-arrow-left"},on:{click:t.back}},[t._v("\n    返回\n  ")]),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("h1",{staticClass:"text-jumbo text-ginormous"},[t._v("\n        Oops!\n      ")]),t._v("\n      gif来源"),n("a",{attrs:{href:"https://zh.airbnb.com/",target:"_blank"}},[t._v("airbnb")]),t._v(" 页面\n      "),n("h2",[t._v("你没有权限去该页面")]),t._v(" "),n("h6",[t._v("如有不满请联系你领导")]),t._v(" "),n("ul",{staticClass:"list-unstyled"},[n("li",[t._v("或者你可以去:")]),t._v(" "),n("li",{staticClass:"link-type"},[n("router-link",{attrs:{to:"/dashboard"}},[t._v("\n            回首页\n          ")])],1),t._v(" "),n("li",{staticClass:"link-type"},[n("a",{attrs:{href:"https://www.taobao.com/"}},[t._v("随便看看")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.dialogVisible=!0}}},[t._v("点我看图")])])])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("img",{attrs:{src:t.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."}})])],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible,title:"随便看"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("img",{staticClass:"pan-img",attrs:{src:t.ewizardClap}})])],1)},a=[],o=n("cc6c"),s=n.n(o),l={name:"Page401",data:function(){return{errGif:s.a+"?"+ +new Date,ewizardClap:"https://wpimg.wallstcn.com/007ef517-bafd-4066-aae4-6883632d9646",dialogVisible:!1}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/dashboard"}):this.$router.go(-1)}}},r=l,c=(n("acdd"),n("2877")),u=Object(c["a"])(r,i,a,!1,null,"35ca77fc",null);e["default"]=u.exports},"26fc":function(t,e,n){t.exports=n.p+"static/img/404_cloud.0f4bc32b.png"},"2c16":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"components-container"},[n("aside",[t._v("\n    "+t._s(t.$t("components.tinymceTips"))+"\n    "),n("a",{staticClass:"link-type",attrs:{target:"_blank",href:"https://panjiachen.github.io/vue-element-admin-site/component/rich-editor.html"}},[t._v(" "+t._s(t.$t("components.documentation")))])]),t._v(" "),n("div",[n("tinymce",{attrs:{height:300},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),n("div",{staticClass:"editor-content",domProps:{innerHTML:t._s(t.content)}})])},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[n("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),n("div",{staticClass:"editor-custom-btn-container"},[n("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},s=[],l=(n("ac6a"),n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("\n    upload\n  ")]),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("\n        Click upload\n      ")])],1),t._v(" "),n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("\n      Cancel\n    ")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("\n      Confirm\n    ")])],1)],1)}),r=[],c=(n("456d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var n=e.uid,i=Object.keys(this.listObj),a=0,o=i.length;a<o;a++)if(this.listObj[i[a]].uid===n)return this.listObj[i[a]].url=t.files.file,void(this.listObj[i[a]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,n=Object.keys(this.listObj),i=0,a=n.length;i<a;i++)if(this.listObj[n[i]].uid===e)return void delete this.listObj[n[i]]},beforeUpload:function(t){var e=this,n=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new Promise((function(a,o){var s=new Image;s.src=n.createObjectURL(t),s.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},a(!0)}))}}}),u=c,d=(n("6cc1"),n("2877")),p=Object(d["a"])(u,l,r,!1,null,"35885c58",null),h=p.exports,f=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=f,v=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],g=v,b=n("b85c"),y=[];function _(){return window.tinymce}var x=function(t,e){var n=document.getElementById(t),i=e||function(){};if(!n){var a=document.createElement("script");a.src=t,a.id=t,document.body.appendChild(a),y.push(i);var o="onload"in a?s:l;o(a)}function s(e){e.onload=function(){this.onerror=this.onload=null;var t,n=Object(b["a"])(y);try{for(n.s();!(t=n.n()).done;){var i=t.value;i(null,e)}}catch(a){n.e(a)}finally{n.f()}y=null},e.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+t),e)}}function l(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,n=Object(b["a"])(y);try{for(n.s();!(e=n.n()).done;){var i=e.value;i(null,t)}}catch(a){n.e(a)}finally{n.f()}y=null}}}n&&i&&(_()?i(null,n):y.push(i))},w=x,C="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",k={name:"Tinymce",components:{editorImage:h},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]},containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))},language:function(){var t=this;this.destroyTinymce(),this.$nextTick((function(){return t.initTinymce()}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;w(C,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({language:this.language,selector:"#".concat(this.tinymceId),height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:g,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){e.value&&n.setContent(e.value),e.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",n.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},D=k,S=(n("d0fa"),Object(d["a"])(D,o,s,!1,null,"7509ad74",null)),P=S.exports,E={name:"TinymceDemo",components:{Tinymce:P},data:function(){return{content:'<h1 style="text-align: center;">Welcome to the TinyMCE demo!</h1><p style="text-align: center; font-size: 15px;"><img title="TinyMCE Logo" src="//www.tinymce.com/images/glyph-tinymce@2x.png" alt="TinyMCE Logo" width="110" height="97" /><ul>\n        <li>Our <a href="//www.tinymce.com/docs/">documentation</a> is a great resource for learning how to configure TinyMCE.</li><li>Have a specific question? Visit the <a href="https://community.tinymce.com/forum/">Community Forum</a>.</li><li>We also offer enterprise grade support as part of <a href="https://tinymce.com/pricing">TinyMCE premium subscriptions</a>.</li>\n      </ul>'}}},j=E,L=(n("99f4"),Object(d["a"])(j,i,a,!1,null,"7f879160",null));e["default"]=L.exports},"2dde":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"form",attrs:{model:t.user,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"用户姓名",prop:"name"}},[n("el-input",{model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"手机号码",prop:"phoneNumber"}},[n("el-input",{attrs:{maxlength:"11"},model:{value:t.user.phoneNumber,callback:function(e){t.$set(t.user,"phoneNumber",e)},expression:"user.phoneNumber"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{attrs:{maxlength:"50"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.submit}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)],1)},a=[],o={props:{user:{type:Object}},data:function(){return{rules:{nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phonenumber:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},methods:{submit:function(){var t=this;this.$refs["form"].validate((function(e){e&&t.$axios.puts("/api/account/my-profile",t.user).then((function(e){t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})})).catch((function(){}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/dashboard"})}}},s=o,l=n("2877"),r=Object(l["a"])(s,i,a,!1,null,null,null);e["default"]=r.exports},"2e2a":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"f",(function(){return r}));var i={formName:"Form",displayName:"表单",api:"",description:"",size:"medium",labelPosition:"right",labelWidth:100,gutter:15,disabled:!1,span:24,formBtns:!0},a=[{label:"单行文本",tag:"el-input",fieldType:"input",fieldOrder:0,placeholder:"请输入",defaultValue:void 0,span:24,labelWidth:null,style:{width:"100%"},clearable:!0,prepend:"",append:"","prefix-icon":"","suffix-icon":"",maxlength:null,"show-word-limit":!1,isReadonly:!1,disabled:!1,isRequired:!0,regList:[],changeTag:!0},{label:"多行文本",tag:"el-input",fieldType:"textarea",fieldOrder:0,type:"textarea",placeholder:"请输入",defaultValue:void 0,span:24,labelWidth:null,autosize:{minRows:4,maxRows:4},style:{width:"100%"},maxlength:null,"show-word-limit":!1,isReadonly:!1,disabled:!1,isRequired:!0,regList:[],changeTag:!0},{label:"密码",tag:"el-input",fieldType:"pwd",fieldOrder:0,placeholder:"请输入",defaultValue:void 0,span:24,"show-password":!0,labelWidth:null,style:{width:"100%"},clearable:!0,prepend:"",append:"","prefix-icon":"","suffix-icon":"",maxlength:null,"show-word-limit":!1,isReadonly:!1,disabled:!1,isRequired:!0,regList:[],changeTag:!0},{label:"计数器",tag:"el-input-number",fieldType:"number",fieldOrder:0,placeholder:"",defaultValue:void 0,span:24,labelWidth:null,min:void 0,max:void 0,step:void 0,"step-strictly":!1,precision:void 0,"controls-position":"",disabled:!1,isRequired:!0,regList:[],changeTag:!0}],o=[{label:"下拉选择",tag:"el-select",fieldType:"select",fieldOrder:0,placeholder:"请选择",defaultValue:void 0,span:24,labelWidth:null,style:{width:"100%"},clearable:!0,disabled:!1,isRequired:!0,filterable:!1,multiple:!1,options:[{label:"选项一",value:1},{label:"选项二",value:2}],regList:[],changeTag:!0},{label:"级联选择",tag:"el-cascader",fieldType:"cascader",fieldOrder:0,placeholder:"请选择",defaultValue:[],span:24,labelWidth:null,style:{width:"100%"},props:{props:{multiple:!1}},"show-all-levels":!0,disabled:!1,clearable:!0,filterable:!1,isRequired:!0,options:[{id:1,value:1,label:"选项1",children:[{id:2,value:2,label:"选项1-1"}]}],dataType:"dynamic",labelKey:"label",valueKey:"value",childrenKey:"children",separator:"/",regList:[],changeTag:!0},{label:"单选框组",tag:"el-radio-group",fieldType:"radio",fieldOrder:0,defaultValue:void 0,span:24,labelWidth:null,style:{},optionType:"default",border:!1,size:"medium",disabled:!1,isRequired:!0,options:[{label:"选项一",value:1},{label:"选项二",value:2}],regList:[],changeTag:!0},{label:"多选框组",tag:"el-checkbox-group",fieldType:"checkbox",fieldOrder:0,defaultValue:[],span:24,labelWidth:null,style:{},optionType:"default",border:!1,size:"medium",disabled:!1,isRequired:!0,options:[{label:"选项一",value:1},{label:"选项二",value:2}],regList:[],changeTag:!0},{label:"开关",tag:"el-switch",fieldType:"switch",fieldOrder:0,defaultValue:!1,span:24,labelWidth:null,style:{},disabled:!1,isRequired:!0,"active-text":"","inactive-text":"","active-color":null,"inactive-color":null,"active-value":!0,"inactive-value":!1,regList:[],changeTag:!0},{label:"滑块",tag:"el-slider",fieldType:"slider",fieldOrder:0,defaultValue:null,span:24,labelWidth:null,disabled:!1,isRequired:!0,min:0,max:100,step:1,"show-stops":!1,range:!1,regList:[],changeTag:!0},{label:"时间选择",tag:"el-time-picker",fieldType:"time",fieldOrder:0,placeholder:"请选择",defaultValue:null,span:24,labelWidth:null,style:{width:"100%"},disabled:!1,clearable:!0,isRequired:!0,"picker-options":{selectableRange:"00:00:00-23:59:59"},format:"HH:mm:ss","value-format":"HH:mm:ss",regList:[],changeTag:!0},{label:"时间范围",tag:"el-time-picker",fieldType:"time-range",fieldOrder:0,defaultValue:null,span:24,labelWidth:null,style:{width:"100%"},disabled:!1,clearable:!0,isRequired:!0,"is-range":!0,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"HH:mm:ss","value-format":"HH:mm:ss",regList:[],changeTag:!0},{label:"日期选择",tag:"el-date-picker",fieldType:"date",fieldOrder:0,placeholder:"请选择",defaultValue:null,type:"date",span:24,labelWidth:null,style:{width:"100%"},disabled:!1,clearable:!0,isRequired:!0,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",isReadonly:!1,regList:[],changeTag:!0},{label:"日期范围",tag:"el-date-picker",fieldType:"date-range",fieldOrder:0,defaultValue:null,span:24,labelWidth:null,style:{width:"100%"},type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",disabled:!1,clearable:!0,isRequired:!0,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",isReadonly:!1,regList:[],changeTag:!0},{label:"评分",tag:"el-rate",fieldType:"rate",fieldOrder:0,defaultValue:0,span:24,labelWidth:null,style:{},max:5,"allow-half":!1,"show-text":!1,"show-score":!1,disabled:!1,isRequired:!0,regList:[],changeTag:!0},{label:"颜色选择",tag:"el-color-picker",fieldType:"color",fieldOrder:0,defaultValue:null,labelWidth:null,"show-alpha":!1,"color-format":"",disabled:!1,isRequired:!0,size:"medium",regList:[],changeTag:!0},{label:"上传",tag:"el-upload",fieldType:"upload",fieldOrder:0,action:"https://jsonplaceholder.typicode.com/posts/",defaultValue:null,labelWidth:null,disabled:!1,isRequired:!0,accept:"",name:"file","auto-upload":!0,showTip:!1,buttonText:"点击上传",fileSize:2,sizeUnit:"MB","list-type":"text",multiple:!1,regList:[],changeTag:!0}],s=[{label:"下拉引用",tag:"el-select",fieldType:"import",fieldOrder:0,importId:void 0,importField:void 0,placeholder:"请选择",defaultValue:void 0,span:24,labelWidth:null,style:{width:"100%"},clearable:!0,disabled:!1,isRequired:!0,filterable:!1,multiple:!1,options:[],regList:[],changeTag:!0}],l=[{layout:"rowFormItem",fieldType:"row",type:"default",justify:"start",align:"top",label:"行容器",layoutTree:!0,children:[]}],r={"el-input":"blur","el-input-number":"blur","el-select":"change","el-radio-group":"change","el-checkbox-group":"change","el-cascader":"change","el-time-picker":"change","el-date-picker":"change","el-rate":"change"}},"2f25":function(t,e,n){},3050:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}},[n("basic-info-form",{ref:"basicInfo",attrs:{info:t.form}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"字段信息",name:"cloum"}},[n("el-table",{ref:"dragTable",attrs:{data:t.form.fields,"row-key":"columnId","max-height":t.tableHeight}},[n("el-table-column",{attrs:{label:"字段名",prop:"fieldName","min-width":"7%","show-overflow-tooltip":!0}}),t._v(" "),n("el-table-column",{attrs:{label:"字段描述","min-width":"10%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:e.row.label,callback:function(n){t.$set(e.row,"label",n)},expression:"scope.row.label"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"物理类型",prop:"dataType","min-width":"10%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.row.dataType,callback:function(n){t.$set(e.row,"dataType",n)},expression:"scope.row.dataType"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"只读","min-width":"5%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-checkbox",{attrs:{"true-label":"true"},model:{value:e.row.isReadonly,callback:function(n){t.$set(e.row,"isReadonly",n)},expression:"scope.row.isReadonly"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"必填","min-width":"5%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-checkbox",{attrs:{"true-label":"true"},model:{value:e.row.isRequired,callback:function(n){t.$set(e.row,"isRequired",n)},expression:"scope.row.isRequired"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"索引","min-width":"5%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-checkbox",{attrs:{"true-label":"true"},model:{value:e.row.isIndex,callback:function(n){t.$set(e.row,"isIndex",n)},expression:"scope.row.isIndex"}})]}}])})],1)],1)],1),t._v(" "),n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{staticStyle:{"text-align":"center","margin-left":"-100px","margin-top":"10px"}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("提交")]),t._v(" "),n("el-button",{on:{click:function(e){return t.close()}}},[t._v("返回")])],1)],1)],1)},a=[],o=(n("a481"),n("ac6a"),n("5df3"),n("bb22")),s=n("53fe"),l=n.n(s),r={name:"BuildEdit",components:{basicInfoForm:o["default"]},data:function(){return{activeName:"cloum",tableHeight:document.documentElement.scrollHeight-245+"px",cloumns:[],dictOptions:[],menus:[],info:{},form:{},formLoading:!1}},created:function(){var t=this.$route.params&&this.$route.params.id;t&&this.fetchData(t)},methods:{fetchData:function(t){var e=this;this.$axios.gets("/api/business/build/"+t).then((function(t){e.form=t}))},submitForm:function(){var t=this,e=this.$refs.basicInfo.$refs.basicInfoForm;Promise.all([e].map(this.getFormPromise)).then((function(n){var i=n.every((function(t){return!!t}));if(i){var a=Object.assign({},e.model);a.fields=t.form.fields,t.$axios.puts("/api/business/build/"+t.form.id,a).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.close()})).catch((function(){t.formLoading=!1}))}else t.$message({message:"表单校验未通过，请重新检查提交内容",type:"warning"})}))},getFormPromise:function(t){return new Promise((function(e){t.validate((function(t){e(t)}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.replace({path:"/tool/build"})}},mounted:function(){var t=this,e=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];l.a.create(e,{handle:".allowDrag",onEnd:function(e){var n=t.cloumns.splice(e.oldIndex,1)[0];for(var i in t.cloumns.splice(e.newIndex,0,n),t.cloumns)t.cloumns[i].sort=parseInt(i)+1}})}},c=r,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},3225:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,size:"small","label-width":"80px"}},[n("el-form-item",{attrs:{label:"字典名称",prop:"name"}},[n("el-input",{staticStyle:{width:"370px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{staticStyle:{width:"370px"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{loading:t.formLoading,type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-row",{attrs:{gutter:10}},[n("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:24,sm:24,md:10,lg:11,xl:11}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticClass:"opts"},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.DataDictionary.Create"],expression:"['BaseService.DataDictionary.Create']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新增")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.DataDictionary.Update"],expression:"['BaseService.DataDictionary.Update']"}],staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("修改")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.DataDictionary.Delete"],expression:"['BaseService.DataDictionary.Delete']"}],staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.handleDelete()}},slot:"reference"},[t._v("删除")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,size:"small"},on:{"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"name",label:"名称"}}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"description",label:"描述"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.DataDictionary.Update"],expression:"['BaseService.DataDictionary.Update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.DataDictionary.Delete"],expression:"['BaseService.DataDictionary.Delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)],1),t._v(" "),n("el-col",{attrs:{xs:24,sm:24,md:14,lg:13,xl:13}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("字典详情")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.DataDictionary.Create"],expression:"['BaseService.DataDictionary.Create']"}],staticClass:"filter-item",staticStyle:{float:"right",padding:"4px 10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-plus",disabled:1!=t.multipleSelection.length},on:{click:t.handleCreateDetail}},[t._v("新增")])],1),t._v(" "),n("dictDetail",{ref:"dictDetail"})],1)],1)],1)],1)},a=[],o=(n("ac6a"),n("7f7f"),n("61f7"),n("333d")),s=n("4381"),l=n("6a3a"),r={name:"Dictionary",components:{Pagination:o["a"],dictDetail:l["default"]},directives:{permission:s["a"]},data:function(){return{rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},form:{},list:null,totalCount:0,listLoading:!0,formLoading:!1,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/base/dict/all",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},fetchData:function(t){var e=this;this.$axios.gets("/api/base/dict/"+t).then((function(t){e.form=t}))},handleFilter:function(){this.page=1,this.getList()},resetQuery:function(){},save:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.formLoading=!0,t.isEdit?t.$axios.puts("/api/base/dict/"+t.form.id,t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):t.$axios.posts("/api/base/dict",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})))}))},handleCreate:function(){this.formTitle="新增字典",this.isEdit=!1,this.form={},this.dialogFormVisible=!0},handleDelete:function(t){var e=this,n=[],i="";if(t)n.push(t.id),i=t.name;else{if(0===this.multipleSelection.length)return void this.$message({message:"未选择",type:"warning"});this.multipleSelection.forEach((function(t){var e=t.id;n.push(e)})),i="选中项"}this.$confirm("是否删除"+i+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.posts("/api/base/dict/delete",n).then((function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleUpdate:function(t){if(this.formTitle="修改字典",this.isEdit=!0,t)this.fetchData(t.id),this.dialogFormVisible=!0;else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.fetchData(this.multipleSelection[0].id),this.dialogFormVisible=!0}},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t),this.$refs.dictDetail.listQuery.Pid=t.id,this.$refs.dictDetail.getList()},handleCreateDetail:function(){this.$refs.dictDetail.dialogFormVisible=!0,this.$refs.dictDetail.isEdit=!1,this.$refs.dictDetail.form={},this.$refs.dictDetail.formTitle="新增字典详情"},cancel:function(){this.dialogFormVisible=!1,this.$refs.form.clearValidate()}}},c=r,u=(n("04a6"),n("2877")),d=Object(u["a"])(c,i,a,!1,null,"82341814",null);e["default"]=d.exports},"32ae":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{padding:"40px 45px 10px 50px"},attrs:{hidden:t.end}},[n("el-steps",{attrs:{active:t.active,"finish-status":"success"}},[n("el-step",{attrs:{title:"基础信息"}}),t._v(" "),n("el-step",{attrs:{title:"选择表单"}}),t._v(" "),n("el-step",{attrs:{title:"流程设计"}})],1)],1),t._v(" "),n("div",{attrs:{hidden:0!=t.active||t.isEdit}},[n("el-form",{ref:"form",attrs:{rules:t.rules,"label-width":"90px",model:t.form}},[n("el-row",[n("el-col",{attrs:{md:12}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12}},[n("el-form-item",{attrs:{label:"模板编号",prop:"code"}},[n("el-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{md:12}},[n("el-form-item",{attrs:{label:"发布时间",prop:"useDate"}},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date"},model:{value:t.form.useDate,callback:function(e){t.$set(t.form,"useDate",e)},expression:"form.useDate"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12}},[n("el-form-item",{attrs:{label:"重要级",prop:"level"}},[n("el-rate",{staticStyle:{"margin-top":"8px"},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}})],1)],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1),t._v(" "),n("div",{staticStyle:{padding:"0px 45px 20px 20px"},attrs:{hidden:1!=t.active||t.isEdit}},[n("el-tabs",{attrs:{type:"border-card"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"table",staticStyle:{width:"90%"},attrs:{data:t.formList,size:"small"},on:{"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{width:"30px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-radio",{attrs:{label:e.row.id},on:{change:function(n){return t.handleRowClick(e.row)}},model:{value:t.form.formId,callback:function(e){t.$set(t.form,"formId",e)},expression:"form.formId"}},[t._v(t._s(""))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"表单名称",prop:"formName",align:"center",width:"150px"}}),t._v(" "),n("el-table-column",{attrs:{label:"api接口",prop:"api",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"描述",prop:"description",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"禁用",prop:"disabled",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("displayStatus")(e.row.disabled)))])]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount > 0"}],staticStyle:{"margin-top":"0px"},attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getFormList}})],1)],1),t._v(" "),t.easyFlowVisible?n("div",{staticStyle:{height:"calc(100vh)"},attrs:{hidden:2!=t.active}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"ef-tooltar"},[n("el-link",{attrs:{type:"primary",underline:!1}},[t._v(t._s(t.form.title))]),t._v(" "),n("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),n("el-button",{attrs:{type:"text",icon:"el-icon-download",size:"large"},on:{click:t.downloadData}}),t._v(" "),n("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),n("el-button",{attrs:{type:"text",icon:"el-icon-remove",size:"large",disabled:!this.activeElement.type},on:{click:t.deleteElement}},[t._v("移除")]),t._v(" "),n("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"text",size:"large"},on:{click:t.save}},[n("svg-icon",{attrs:{"icon-class":"save"}}),t._v(" 保存")],1),t._v(" "),n("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),n("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text",icon:"el-icon-delete-solid",size:"large"},on:{click:t.clear}},[t._v("清空")]),t._v(" "),n("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),0==t.active||t.isEdit?t._e():n("el-button",{attrs:{type:"text",icon:"el-icon-top",size:"large"},on:{click:t.back}},[t._v("上一步")]),t._v(" "),n("div",{staticStyle:{float:"right","margin-right":"5px"}},[n("el-button",{attrs:{type:"info",plain:"",round:"",icon:"el-icon-document",size:"mini"},on:{click:t.dataInfo}},[t._v("流程信息")]),t._v(" "),n("el-button",{attrs:{type:"warning",plain:"",round:"",icon:"el-icon-document",size:"mini"},on:{click:t.openHelp}},[t._v("帮助")])],1)],1)])],1),t._v(" "),n("div",{staticStyle:{display:"flex",height:"calc(100% - 47px)"}},[n("div",{staticStyle:{width:"230px","border-right":"1px solid #dce3e8"}},[n("node-menu",{ref:"nodeMenu",on:{addNode:t.addNode}})],1),t._v(" "),n("div",{directives:[{name:"flowDrag",rawName:"v-flowDrag"}],ref:"efContainer",staticClass:"container",attrs:{id:"efContainer"}},[t._l(t.data.nodeList,(function(e){return[n("flow-node",{key:e.id,attrs:{id:e.id,node:e,activeElement:t.activeElement},on:{changeNodeSite:t.changeNodeSite,nodeRightMenu:t.nodeRightMenu,clickNode:t.clickNode}})]})),t._v(" "),n("div",{staticStyle:{position:"absolute",top:"2000px",left:"2000px"}},[t._v("\n           \n        ")])],2),t._v(" "),n("div",{staticStyle:{width:"300px","border-left":"1px solid #dce3e8","background-color":"#fbfbfb"}},[n("flow-node-form",{ref:"nodeForm",on:{setLineLabel:t.setLineLabel,repaintEverything:t.repaintEverything}})],1)]),t._v(" "),t.flowInfoVisible?n("flow-info",{ref:"flowInfo",attrs:{data:t.data}}):t._e(),t._v(" "),t.flowHelpVisible?n("flow-help",{ref:"flowHelp"}):t._e()],1):t._e(),t._v(" "),n("div",{attrs:{align:"center"}},[0==t.active||t.isEdit||t.end?t._e():n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.back}},[t._v("上一步")]),t._v(" "),t.end?t._e():n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.next}},[t._v("下一步")])],1)])},a=[],o=(n("7f7f"),n("ac6a"),n("6b54"),n("b76a")),s=n.n(o),l=n("2ef0"),r=n.n(l),c=(n("4be5"),n("3f91")),u=n("e217"),d=n("0595"),p=n("d01b"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"流程数据信息",visible:t.dialogVisible,width:"70%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-alert",{attrs:{title:"使用说明",type:"warning",description:"以下流程信息可以被存储起来，方便下一次流程加载","show-icon":"","close-text":"知道了"}}),t._v(" "),n("br"),t._v(" "),n("codemirror",{staticClass:"code",attrs:{value:t.flowJsonData,options:t.options}})],1)},f=[],m=(n("a7be"),n("8f94"));n("f9d4");var v={props:{data:Object},data:function(){return{dialogVisible:!1,flowJsonData:{},options:{mode:{name:"javascript",json:!0},lineNumbers:!0}}},components:{codemirror:m["codemirror"]},methods:{init:function(){this.dialogVisible=!0,this.flowJsonData=JSON.stringify(this.data,null,4).toString()}}},g=v,b=n("2877"),y=Object(b["a"])(g,h,f,!1,null,null,null),_=y.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"帮助",visible:t.dialogVisible,width:"70%",customClass:"flowHelp"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-tabs",{attrs:{"tab-position":"left"}},[n("el-tab-pane",{attrs:{label:"如何新增"}},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("如何新增")]),t._v(" "),n("div",[t._v("按住鼠标拖拽左侧组件到中间画布中松开鼠标即可")])],1),t._v(" "),n("el-tab-pane",{attrs:{label:"如何删除"}},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("页面删除")]),t._v(" "),n("div",[t._v("\n                鼠标点中需要删除的节点，点击左上角的删除图标\n            ")]),t._v(" "),n("el-divider",{attrs:{"content-position":"left"}},[t._v("通过代码删除")]),t._v(" "),n("pre",[t._v("this.deleteNode(nodeId)")])],1),t._v(" "),n("el-tab-pane",{attrs:{label:"如何移动"}},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("如何移动")]),t._v(" "),n("div",[t._v("鼠标移动到节点中，当鼠标变为可拖拽的图标时按下鼠标移动到新的位置松开鼠标")])],1),t._v(" "),n("el-tab-pane",{attrs:{label:"如何连线"}},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("如何连线")]),t._v(" "),n("div",[t._v("鼠标移动到节点中左侧的图标上，当鼠标变为+时按下鼠标移动到另一个节点中松开鼠标")])],1),t._v(" "),n("el-tab-pane",{attrs:{label:"如何添加条件"}},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("如何添加条件")]),t._v(" "),n("div",[t._v("点击画布中的连线，在页面右侧会出现一个表单，输入新的条件，点击【暂存】")])],1)],1)],1)},w=[],C={data:function(){return{dialogVisible:!1}},components:{},methods:{init:function(){this.dialogVisible=!0}}},k=C,D=(n("3eeb"),Object(b["a"])(k,x,w,!1,null,null,null)),S=D.exports,P={name:"",nodeList:[],lineList:[]};function E(){return P}var j={name:"流程A",nodeList:[{id:"nodeA",name:"流程A-节点A",type:"task",left:"26px",top:"161px",ico:"el-icon-user-solid"},{id:"nodeB",name:"流程A-节点B",type:"task",left:"340px",top:"161px",ico:"el-icon-goods"},{id:"nodeC",name:"流程A-节点C",type:"task",left:"739px",top:"161px",ico:"el-icon-present"}],lineList:[{from:"nodeA",to:"nodeB"},{from:"nodeB",to:"nodeC"}]};function L(){return j}var T={name:"流程B",nodeList:[{id:"nodeA",name:"节点A-不可拖拽",type:"task",left:"18px",top:"223px",ico:"el-icon-user-solid",state:"success",viewOnly:!0},{id:"nodeB",type:"task",name:"流程B-节点B",left:"351px",top:"96px",ico:"el-icon-goods",state:"error"},{id:"nodeC",name:"流程B-节点C",type:"task",left:"354px",top:"351px",ico:"el-icon-present",state:"warning"},{id:"nodeD",name:"流程B-节点D",type:"task",left:"723px",top:"215px",ico:"el-icon-present",state:"running"}],lineList:[{from:"nodeA",to:"nodeB",label:"条件A"},{from:"nodeA",to:"nodeC",label:"条件B"},{from:"nodeB",to:"nodeD"},{from:"nodeC",to:"nodeD"}]};function I(){return T}var O={name:"流程C",nodeList:[{id:"nodeA",name:"流程C-节点A",type:"task",left:"400px",top:"15px",ico:"el-icon-user-solid"},{id:"nodeB",name:"流程C-节点B",type:"task",left:"400px",top:"200px",ico:"el-icon-goods"},{id:"nodeC",name:"流程C-节点C",type:"task",left:"400px",top:"378px",ico:"el-icon-present"}],lineList:[{from:"nodeA",to:"nodeB"},{from:"nodeB",to:"nodeC"}]};function $(){return O}var F={name:"流程D",nodeList:[{id:"nodeA",name:"流程D-节点A",type:"task",left:"18px",top:"223px",ico:"el-icon-user-solid",state:"success"},{id:"nodeB",type:"task",name:"流程D-节点B",left:"351px",top:"96px",ico:"el-icon-goods",state:"error"},{id:"nodeC",name:"流程D-节点C",type:"task",left:"354px",top:"351px",ico:"el-icon-present",state:"warning"},{id:"nodeD",name:"流程D-节点D",type:"task",left:"723px",top:"215px",ico:"el-icon-present",state:"running"}],lineList:[{from:"nodeA",to:"nodeB",label:"直线,自定义线样式,固定锚点",connector:"Straight",anchors:["Top","Bottom"],paintStyle:{strokeWidth:2,stroke:"#1879FF"}},{from:"nodeA",to:"nodeC",label:"贝塞尔曲线,固定锚点",connector:"Bezier",anchors:["Bottom","Left"]},{from:"nodeB",to:"nodeD",label:"默认连线样式,动态锚点"},{from:"nodeC",to:"nodeD",label:"默认连线样式,动态锚点"},{from:"nodeC",to:"nodeC",label:"自连接"}]};function A(){return F}var M={name:"流程E，力导图",nodeList:[{id:"nodeA",name:"流程D-节点A",type:"task",ico:"el-icon-user-solid",state:"success"},{id:"nodeB",type:"task",name:"流程D-节点B",ico:"el-icon-goods",state:"error"},{id:"nodeC",name:"流程D-节点C",type:"task",ico:"el-icon-present",state:"warning"},{id:"nodeD",name:"流程D-节点D",type:"task",ico:"el-icon-present",state:"running"}],lineList:[{from:"nodeA",to:"nodeB"},{from:"nodeA",to:"nodeC",label:"hello"},{from:"nodeB",to:"nodeD"},{from:"nodeC",to:"nodeD"},{from:"nodeC",to:"nodeC"}]};function N(){return M}var R,z=1e3,B=1e3,U=[],V=[],Q={},G={},H={};function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R=0,U=[],V=[],Q={},G={},H={};for(var e=t.nodeList,n=0;n<e.length;n++){var i=e[n];U.push(i)}for(var a=t.lineList,o=0;o<a.length;o++){var s=a[o],l=new W(s.from,s.to);V.push(l)}U&&V&&(R=Math.sqrt(z*B/U.length));for(var r=0;r<U.length;r++){var c=U[r];c&&(H[c.id]=c)}var u,d,p=40;for(var h in U)u=.5*z,d=.5*B,U[h].x=u+p*(Math.random()-.5),U[h].y=d+p*(Math.random()-.5);for(var f=0;f<200;f++)X(),Y(),J();for(var m=0;m<U.length;m++){var v=U[m];v.left=v.x+"px",v.top=v.y+"px",v.x=void 0,v.y=void 0}return t.nodeList=U,t}function W(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.source=t,this.target=e}function X(){for(var t,e,n,i=6,a=0;a<U.length;a++){Q[U[a].id]=0,G[U[a].id]=0;for(var o=0;o<U.length;o++)if(a!==o&&(t=U[a].x-U[o].x,e=U[a].y-U[o].y,n=Math.sqrt(t*t+e*e)),n<30&&(i=5),n>0&&n<250){var s=U[a].id;Q[s]=Q[s]+t/n*R*R/n*i,G[s]=G[s]+e/n*R*R/n*i}}}function Y(){for(var t,e,n=3,i=0;i<V.length;i++){var a=V[i].source,o=V[i].target;if(t=H[a],e=H[o],!t)return void console.log("Cannot find start node id: "+a+", please check it out.");if(!e)return void console.log("Cannot find end node id: "+o+", please check it out.");var s=void 0,l=void 0,r=void 0;s=t.x-e.x,l=t.y-e.y,r=Math.sqrt(s*s+l*l),Q[a]=Q[a]-s*r/R*n,G[a]=G[a]-l*r/R*n,Q[o]=Q[o]+s*r/R*n,G[o]=G[o]+l*r/R*n}}function J(){for(var t=4,e=3,n=0;n<U.length;n++){var i=U[n],a=Math.floor(Q[i.id]),o=Math.floor(G[i.id]);a<-t&&(a=-t),a>t&&(a=t),o<-e&&(o=-e),o>e&&(o=e),i.x=i.x+a>=z||i.x+a<=0?i.x-a:i.x+a,i.y=i.y+o>=B||i.y+o<=0?i.y-o:i.y+o}}n("410f");var K=n("333d"),Z={id:null,flowId:null,formId:null,title:"",code:"",useDate:"",level:0,remark:"",nodeList:[],lineList:[]},tt={name:"EasyFlow",props:{isEdit:{type:Boolean,default:!1}},filters:{displayStatus:function(t){var e={true:"是",false:"否"};return e[t]}},data:function(){return{rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],code:[{required:!0,message:"请输入编号",trigger:"blur"}]},form:Object.assign({},Z),formList:null,page:1,totalCount:0,listLoading:!0,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},fullscreenLoading:!1,active:0,end:!1,jsPlumb:null,easyFlowVisible:!0,flowInfoVisible:!1,loadEasyFlowFinish:!1,flowHelpVisible:!1,data:{},activeElement:{type:void 0,nodeId:void 0,sourceId:void 0,targetId:void 0},zoom:.5}},mixins:[c["a"]],components:{draggable:s.a,flowNode:u["default"],nodeMenu:d["default"],FlowInfo:_,FlowNodeForm:p["default"],FlowHelp:S,Pagination:K["a"]},directives:{flowDrag:{bind:function(t,e,n,i){e&&(t.onmousedown=function(e){if(2!=e.button){var n=e.clientX,i=e.clientY;t.style.cursor="move",document.onmousemove=function(e){e.preventDefault();var a=e.clientX-n;n=e.clientX,t.scrollLeft+=-a;var o=e.clientY-i;i=e.clientY,t.scrollTop+=-o},document.onmouseup=function(e){t.style.cursor="auto",document.onmousemove=null,document.onmouseup=null}}})}}},mounted:function(){this.jsPlumb=jsPlumb.getInstance(),this.$nextTick((function(){}))},created:function(){if(this.isEdit){this.active=2,this.end=!0;var t=this.$route.params&&this.$route.params.id;this.fetchData(t)}else this.getFormList(),this.dataReload(E())},methods:{fetchData:function(t){var e=this;this.$axios.gets("/api/business/flow/"+t).then((function(t){e.form=t;var n={nodeList:t.nodeList,lineList:t.lineList};e.dataReload(n)}))},getFormList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/business/form",this.listQuery).then((function(e){t.formList=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},jump:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/tool/flow"})},next:function(){1==this.active++&&(this.end=!0)},back:function(){this.active--,this.end=!1},handleRowClick:function(t){this.form.formId=t.id},save:function(){var t=this;this.$refs.form.validate((function(e){e?(t.fullscreenLoading=!0,t.form.nodeList=t.data.nodeList,t.form.lineList=t.data.lineList,t.isEdit?t.$axios.puts("/api/business/flow/"+t.form.id,t.form).then((function(e){t.fullscreenLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.jump()})).catch((function(){t.fullscreenLoading=!1})):t.$axios.posts("/api/business/flow",t.form).then((function(e){t.fullscreenLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.jump()})).catch((function(){t.fullscreenLoading=!1}))):t.$message({message:"请完善基础信息",type:"warning"})}))},getUUID:function(){return Math.random().toString(36).substr(3,10)},jsPlumbInit:function(){var t=this;this.jsPlumb.ready((function(){t.jsPlumb.importDefaults(t.jsplumbSetting),t.jsPlumb.setSuspendDrawing(!1,!0),t.loadEasyFlow(),t.jsPlumb.bind("click",(function(e,n){t.activeElement.type="line",t.activeElement.sourceId=e.sourceId,t.activeElement.targetId=e.targetId,t.$refs.nodeForm.lineInit({from:e.sourceId,to:e.targetId,label:e.getLabel()},t.data,t.form.formId)})),t.jsPlumb.bind("connection",(function(e){var n=e.source.id,i=e.target.id;t.loadEasyFlowFinish&&t.data.lineList.push({id:"line-"+t.getUUID(),from:n,to:i})})),t.jsPlumb.bind("connectionDetached",(function(e){t.deleteLine(e.sourceId,e.targetId)})),t.jsPlumb.bind("connectionMoved",(function(e){t.changeLine(e.originalSourceId,e.originalTargetId)})),t.jsPlumb.bind("contextmenu",(function(t){console.log("contextmenu",t)})),t.jsPlumb.bind("beforeDrop",(function(e){var n=e.sourceId,i=e.targetId;return n===i?(t.$message.error("节点不支持连接自己"),!1):t.hasLine(n,i)?(t.$message.error("该关系已存在,不允许重复创建"),!1):t.hashOppositeLine(n,i)?(t.$message.error("不支持两个节点之间连线回环"),!1):(t.$message.success("连接成功"),!0)})),t.jsPlumb.bind("beforeDetach",(function(t){console.log("beforeDetach",t)})),t.jsPlumb.setContainer(t.$refs.efContainer)}))},loadEasyFlow:function(){for(var t=0;t<this.data.nodeList.length;t++){var e=this.data.nodeList[t];this.jsPlumb.makeSource(e.id,r.a.merge(this.jsplumbSourceOptions,{})),this.jsPlumb.makeTarget(e.id,this.jsplumbTargetOptions),e.viewOnly||this.jsPlumb.draggable(e.id,{containment:"parent",stop:function(t){console.log("拖拽结束: ",t)}})}for(t=0;t<this.data.lineList.length;t++){var n=this.data.lineList[t],i={source:n.from,target:n.to,label:n.label?n.label:"",connector:n.connector?n.connector:"",anchors:n.anchors?n.anchors:void 0,paintStyle:n.paintStyle?n.paintStyle:void 0};this.jsPlumb.connect(i,this.jsplumbConnectOptions)}this.$nextTick((function(){this.loadEasyFlowFinish=!0}))},setLineLabel:function(t,e,n,i){var a=this.jsPlumb.getConnections({source:t,target:e})[0];n&&""!==n?a.addClass("flowLabel"):(a.removeClass("flowLabel"),a.addClass("emptyFlowLabel")),a.setLabel({label:n}),this.data.lineList.forEach((function(a){a.from==t&&a.to==e&&(a.label=n,a.formField=i)}))},deleteElement:function(){var t=this;"node"===this.activeElement.type?this.deleteNode(this.activeElement.nodeId):"line"===this.activeElement.type&&this.$confirm("确定删除所点击的线吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.jsPlumb.getConnections({source:t.activeElement.sourceId,target:t.activeElement.targetId})[0];t.jsPlumb.deleteConnection(e)})).catch((function(){}))},clear:function(){var t=this;this.$confirm("确定清空流程图吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.dataReload(E())})).catch((function(){}))},deleteLine:function(t,e){this.data.lineList=this.data.lineList.filter((function(n){return n.from!=t||n.to!=e}))},changeLine:function(t,e){this.deleteLine(t,e)},changeNodeSite:function(t){for(var e=0;e<this.data.nodeList.length;e++){var n=this.data.nodeList[e];n.id===t.nodeId&&(n.left=t.left,n.top=t.top)}},addNode:function(t,e,n){var i=t.originalEvent.clientX,a=t.originalEvent.clientY,o=this.$refs.efContainer,s=o.getBoundingClientRect(),l=i,r=a;if(l<s.x||l>s.width+s.x||r<s.y||s.y>s.y+s.height)this.$message.error("请把节点拖入到画布中");else{l=l-s.x+o.scrollLeft,r=r-s.y+o.scrollTop,l-=85,r-=16;var c="node-"+this.getUUID(),u=e.name,d=u,p=1;while(p<1e4){for(var h=!1,f=0;f<this.data.nodeList.length;f++){var m=this.data.nodeList[f];m.name===d&&(d=u+p,h=!0)}if(!h)break;p++}var v={id:c,name:d,type:e.type,left:l+"px",top:r+"px",ico:e.ico,state:"success"};this.data.nodeList.push(v),this.$nextTick((function(){this.jsPlumb.makeSource(c,this.jsplumbSourceOptions),this.jsPlumb.makeTarget(c,this.jsplumbTargetOptions),this.jsPlumb.draggable(c,{containment:"parent",stop:function(t){console.log("拖拽结束: ",t)}})}))}},deleteNode:function(t){var e=this;return this.$confirm("确定要删除节点"+t+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){e.data.nodeList=e.data.nodeList.filter((function(e){return e.id!==t})),e.$nextTick((function(){this.jsPlumb.removeAllEndpoints(t)}))})).catch((function(){})),!0},clickNode:function(t){this.activeElement.type="node",this.activeElement.nodeId=t,this.$refs.nodeForm.nodeInit(this.data,t)},hasLine:function(t,e){for(var n=0;n<this.data.lineList.length;n++){var i=this.data.lineList[n];if(i.from===t&&i.to===e)return!0}return!1},hashOppositeLine:function(t,e){return this.hasLine(e,t)},nodeRightMenu:function(t,e){this.menu.show=!0,this.menu.curNodeId=t,this.menu.left=e.x+"px",this.menu.top=e.y+"px"},repaintEverything:function(){this.jsPlumb.repaint()},dataInfo:function(){this.flowInfoVisible=!0,this.$nextTick((function(){this.$refs.flowInfo.init()}))},dataReload:function(t){var e=this;this.easyFlowVisible=!1,this.data.nodeList=[],this.data.lineList=[],this.$nextTick((function(){t=r.a.cloneDeep(t),e.easyFlowVisible=!0,e.data=t,e.$nextTick((function(){e.jsPlumb=jsPlumb.getInstance(),e.$nextTick((function(){e.jsPlumbInit()}))}))}))},dataReloadA:function(){this.dataReload(L())},dataReloadB:function(){this.dataReload(I())},dataReloadC:function(){this.dataReload($())},dataReloadD:function(){this.dataReload(A())},dataReloadE:function(){var t=N(),e=r.a.cloneDeep(t),n=q(e);this.dataReload(n),this.$message({message:"力导图每次产生的布局是不一样的",type:"warning"})},zoomAdd:function(){this.zoom>=1||(this.zoom=this.zoom+.1,this.$refs.efContainer.style.transform="scale(".concat(this.zoom,")"),this.jsPlumb.setZoom(this.zoom))},zoomSub:function(){this.zoom<=0||(this.zoom=this.zoom-.1,this.$refs.efContainer.style.transform="scale(".concat(this.zoom,")"),this.jsPlumb.setZoom(this.zoom))},downloadData:function(){var t=this;this.$confirm("确定要下载该流程数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t.data,null,"\t")),n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download","data.json"),n.click(),n.remove(),t.$message.success("正在下载中,请稍后...")})).catch((function(){}))},openHelp:function(){this.flowHelpVisible=!0,this.$nextTick((function(){this.$refs.flowHelp.init()}))}}},et=tt,nt=Object(b["a"])(et,i,a,!1,null,null,null);e["default"]=nt.exports},"371d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{padding:"6px 0"}},[n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.handleCreate()}}},[t._v("新增")]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("修改")]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.handleDelete()}},slot:"reference"},[t._v("删除")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"90%"},attrs:{data:t.list,size:"small"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),n("el-table-column",{attrs:{label:"表单名称",prop:"formName",sortable:"custom",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(i)}}},[t._v(t._s(i.formName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"api接口",prop:"api",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"描述",prop:"description",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"禁用",prop:"disabled",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("displayStatus")(e.row.disabled)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Job.Delete"],expression:"['BaseService.Job.Delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount > 0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=(n("ac6a"),n("7f7f"),n("333d")),s=n("4381"),l={id:null,name:null,description:null,sort:999,disabled:!0},r={name:"Form",components:{Pagination:o["a"]},directives:{permission:s["a"]},filters:{displayStatus:function(t){var e={true:"是",false:"否"};return e[t]}},data:function(){return{rules:{name:[{required:!0,message:"请输入岗位名",trigger:"blur"}]},form:Object.assign({},l),list:null,totalCount:0,listLoading:!0,formLoading:!1,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,multipleSelection:[],formTitle:"",isEdit:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/business/form",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},handleFilter:function(){this.page=1,this.getList()},handleDelete:function(t){var e=this,n=[],i="";if(t)n.push(t.id),i=t.name;else{if(0===this.multipleSelection.length)return void this.$message({message:"未选择",type:"warning"});this.multipleSelection.forEach((function(t){var e=t.id;n.push(e)})),i="选中项"}this.$confirm("是否删除"+i+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.posts("/api/business/form/delete",n).then((function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleCreate:function(){this.$router.push({path:"/tool/form/create"})},handleUpdate:function(t){if(t)this.$router.push({path:"/tool/form/edit/"+t.id});else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.$router.push({path:"/tool/form/edit/"+this.multipleSelection[0].id})}},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)}}},c=r,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},"37b0":function(t,e,n){},3823:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"form",attrs:{model:t.user,rules:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[n("el-input",{attrs:{placeholder:"请输入旧密码",type:"password"},model:{value:t.user.oldPassword,callback:function(e){t.$set(t.user,"oldPassword",e)},expression:"user.oldPassword"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[n("el-input",{attrs:{placeholder:"请输入新密码",type:"password"},model:{value:t.user.newPassword,callback:function(e){t.$set(t.user,"newPassword",e)},expression:"user.newPassword"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[n("el-input",{attrs:{placeholder:"请确认密码",type:"password"},model:{value:t.user.confirmPassword,callback:function(e){t.$set(t.user,"confirmPassword",e)},expression:"user.confirmPassword"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.submit}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.close}},[t._v("关闭")])],1)],1)},a=[],o={data:function(){var t=this,e=function(e,n,i){t.user.newPassword!==n?i(new Error("两次输入的密码不一致")):i()};return{test:"1test",user:{oldPassword:void 0,newPassword:void 0,confirmPassword:void 0},rules:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:e,trigger:"blur"}]}}},methods:{submit:function(){var t=this;this.$refs["form"].validate((function(e){e&&t.$axios.posts("/api/account/my-profile/change-password",{currentPassword:t.user.oldPassword,newPassword:t.user.newPassword}).then((function(e){t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})})).catch((function(){}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/index"})}}},s=o,l=n("2877"),r=Object(l["a"])(s,i,a,!1,null,null,null);e["default"]=r.exports},"394e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{padding:"6px 0"}},[n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.handleCreate()}}},[t._v("新增")]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("修改")]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.handleDelete()}},slot:"reference"},[t._v("删除")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{ref:"form",attrs:{inline:!0,size:"small","label-width":"66px"}},t._l(t.data,(function(e,i){return n("div",{key:i},[n("el-form-item",{attrs:{label:e.label}},[n("el-input",{attrs:{type:e.fieldType},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}})],1)],1)})),0),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,size:"small","empty-text":"空"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),t._l(t.form.fields,(function(t,e){return n("el-table-column",{key:e,attrs:{prop:t.fieldName,label:t.label}})}))],2),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=(n("7f7f"),n("456d"),n("ac6a"),n("333d")),s=n("2ef0"),l=n.n(s),r={name:"Dynamic",components:{Pagination:o["a"]},data:function(){return{formId:"39b45d6b-83e5-4a01-9f2b-e861b900db20",rules:{name:[{required:!0,message:"请输入岗位名",trigger:"blur"}]},form:{},data:[],list:null,totalCount:0,listLoading:!0,formLoading:!1,drawingList:[],tableData:[{id:1,name:"水浒传",price:137597.76,const:102203.71,profit:35394.05},{id:2,name:"三国演义",price:137597.76,const:102203.71,profit:35394.05}],listQuery:{FormId:null,Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1}},created:function(){this.getForm()},methods:{getForm:function(){var t=this;this.$axios.gets("http://localhost:62162/api/business/form/"+this.formId).then((function(e){t.form=e,t.data=e.fields,t.getList()}))},getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.listQuery.formId=this.formId,this.$axios.gets("/api/business/form-data",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1})),this.listLoading=!1},fetchData:function(t){var e=this;this.$axios.gets("/api/business/form-data/"+t).then((function(t){e.form.fields.forEach((function(e){Object.keys(t).filter((function(n){n===e.fieldName&&(e.value=t[n])}))})),e.data=l.a.cloneDeep(e.form.fields)}))},handleFilter:function(){this.page=1,this.getList()},handleDelete:function(t){var e=this,n=[],i="";if(t)n.push(t.id),i=t.name;else{if(0===this.multipleSelection.length)return void this.$message({message:"未选择",type:"warning"});this.multipleSelection.forEach((function(t){var e=t.id;n.push(e)})),i="选中项"}this.$confirm("是否删除"+i+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.posts("/api/business/form-data/delete",n).then((function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleCreate:function(){this.formTitle="新增"+this.form.displayName,this.isEdit=!1,this.dialogFormVisible=!0},handleUpdate:function(t){if(this.formTitle="修改"+this.form.displayName,this.isEdit=!0,t)this.fetchData(t.id),this.dialogFormVisible=!0;else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.fetchData(this.multipleSelection[0].id),this.dialogFormVisible=!0}},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)},cancel:function(){this.dialogFormVisible=!1},save:function(){var t=this;this.formLoading=!0,this.isEdit?this.$axios.puts("/api/business/form-data/"+this.multipleSelection[0].id,{formId:this.formId,data:this.data}).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):this.$axios.posts("/api/business/form-data",{formId:this.formId,data:this.form.fields}).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1}))}}},c=r,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},"398c":function(t,e,n){"use strict";n("eb3a")},"3b2e":function(t,e,n){},"3e07":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:t.$t("excel.placeholder"),"prefix-icon":"el-icon-document"},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}}),t._v(" "),n("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-document"},on:{click:t.handleDownload}},[t._v("\n    "+t._s(t.$t("excel.selectedExport"))+"\n  ")]),t._v(" "),n("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"https://panjiachen.github.io/vue-element-admin-site/feature/component/excel.html",target:"_blank"}},[n("el-tag",{attrs:{type:"info"}},[t._v("Documentation")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",attrs:{data:t.list,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"Id",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Title"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.title)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Author",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",[t._v(t._s(e.row.author))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Readings",width:"115",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.pageviews)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"PDate",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-time"}),t._v(" "),n("span",[t._v(t._s(e.row.display_time))])]}}])})],1)],1)},a=[],o=n("2423"),s={name:"SelectExcel",data:function(){return{list:null,listLoading:!0,multipleSelection:[],downloadLoading:!1,filename:""}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(o["a"])(this.listQuery).then((function(e){t.list=e.data.items,t.listLoading=!1}))},handleSelectionChange:function(t){this.multipleSelection=t},handleDownload:function(){var t=this;this.multipleSelection.length?(this.downloadLoading=!0,Promise.all([n.e("chunk-d159a5f0"),n.e("chunk-581b2547")]).then(n.bind(null,"4bf8d")).then((function(e){var n=["Id","Title","Author","Readings","Date"],i=["id","title","author","pageviews","display_time"],a=t.multipleSelection,o=t.formatJson(i,a);e.export_json_to_excel({header:n,data:o,filename:t.filename}),t.$refs.multipleTable.clearSelection(),t.downloadLoading=!1}))):this.$message({message:"Please select at least one item",type:"warning"})},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))}}},l=s,r=n("2877"),c=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports},"3eb9":function(t,e,n){},"3eeb":function(t,e,n){"use strict";n("37b0")},"3f91":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={data:function(){return{jsplumbSetting:{Anchors:["Top","TopCenter","TopRight","TopLeft","Right","RightMiddle","Bottom","BottomCenter","BottomRight","BottomLeft","Left","LeftMiddle"],Container:"efContainer",Connector:["Bezier",{curviness:100}],ConnectionsDetachable:!1,DeleteEndpointsOnDetach:!1,Endpoint:["Blank",{Overlays:""}],EndpointStyle:{fill:"#1879ffa1",outlineWidth:1},LogEnabled:!0,PaintStyle:{stroke:"#95979c",strokeWidth:1,outlineStroke:"transparent",outlineWidth:10},DragOptions:{cursor:"pointer",zIndex:2e3},Overlays:[["Arrow",{width:10,length:8,location:1,direction:1,foldback:.623}],["Label",{label:"",location:.1,cssClass:"aLabel"}]],RenderMode:"svg",HoverPaintStyle:{stroke:"#b0b2b5",strokeWidth:1},Scope:"jsPlumb_DefaultScope"},jsplumbConnectOptions:{isSource:!0,isTarget:!0,anchor:"Continuous",labelStyle:{cssClass:"flowLabel"},emptyLabelStyle:{cssClass:"emptyFlowLabel"}},jsplumbSourceOptions:{filter:".flow-node-drag",filterExclude:!1,anchor:"Continuous",allowLoopback:!0,maxConnections:-1,onMaxConnections:function(t,e){console.log("超过了最大值连线: ".concat(t.maxConnections))}},jsplumbSourceOptions2:{filter:".flow-node-drag",filterExclude:!1,allowLoopback:!0,connector:["Flowchart",{curviness:50}],connectorStyle:{stroke:"red",strokeWidth:1,outlineStroke:"transparent",outlineWidth:10},connectorHoverStyle:{stroke:"red",strokeWidth:2}},jsplumbTargetOptions:{filter:".flow-node-drag",filterExclude:!1,anchor:"Continuous",allowLoopback:!0,dropOptions:{hoverClass:"ef-drop-hover"}}}}}},"410f":function(t,e,n){},"42be":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("easy-flow",{attrs:{"is-edit":!0}})},a=[],o=n("32ae"),s={name:"FlowDesignEdit",components:{EasyFlow:o["default"]}},l=s,r=n("2877"),c=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports},4381:function(t,e,n){"use strict";n("6762"),n("2fdb");var i=n("4360"),a={inserted:function(t,e,n){var a=e.value,o=i["a"].getters&&i["a"].getters.roles;if(!(a&&a instanceof Array&&a.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var s=a,l=o.some((function(t){return s.includes(t)}));l||t.parentNode&&t.parentNode.removeChild(t)}},o=function(t){t.directive("permission",a)};window.Vue&&(window["permission"]=a,Vue.use(o)),a.install=o;e["a"]=a},"440b":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"components-container"},[t._m(0),t._v(" "),n("div",{staticClass:"editor-container"},[n("el-tag",{staticClass:"tag-title"},[t._v("\n      Basic:\n    ")]),t._v(" "),n("markdown-editor",{attrs:{height:"300px"},model:{value:t.content1,callback:function(e){t.content1=e},expression:"content1"}})],1),t._v(" "),n("div",{staticClass:"editor-container"},[n("el-tag",{staticClass:"tag-title"},[t._v("\n      Markdown Mode:\n    ")]),t._v(" "),n("markdown-editor",{ref:"markdownEditor",attrs:{options:{hideModeSwitch:!0,previewStyle:"tab"},height:"200px"},model:{value:t.content2,callback:function(e){t.content2=e},expression:"content2"}})],1),t._v(" "),n("div",{staticClass:"editor-container"},[n("el-tag",{staticClass:"tag-title"},[t._v("\n      Customize Toolbar:\n    ")]),t._v(" "),n("markdown-editor",{attrs:{options:{toolbarItems:["heading","bold","italic"]}},model:{value:t.content3,callback:function(e){t.content3=e},expression:"content3"}})],1),t._v(" "),n("div",{staticClass:"editor-container"},[n("el-tag",{staticClass:"tag-title"},[t._v("\n      I18n:\n    ")]),t._v(" "),n("el-alert",{attrs:{closable:!1,title:"You can change the language of the admin system to see the effect",type:"success"}}),t._v(" "),n("markdown-editor",{ref:"markdownEditor",attrs:{language:t.language,height:"300px"},model:{value:t.content4,callback:function(e){t.content4=e},expression:"content4"}})],1),t._v(" "),n("el-button",{staticStyle:{"margin-top":"80px"},attrs:{type:"primary",icon:"el-icon-document"},on:{click:t.getHtml}},[t._v("\n    Get HTML\n  ")]),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.html)}})],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",[t._v("Markdown is based on\n    "),n("a",{attrs:{href:"https://github.com/nhnent/tui.editor",target:"_blank"}},[t._v("tui.editor")]),t._v(" ，simply wrapped with Vue.\n    "),n("a",{attrs:{target:"_blank",href:"https://panjiachen.github.io/vue-element-admin-site/feature/component/markdown-editor.html"}},[t._v("\n      Documentation ")])])}],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:t.id}})},s=[],l=n("5530"),r=(n("a7be"),n("f513"),n("5865")),c={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},u={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return c}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},c,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getMarkdown()&&this.editor.setMarkdown(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var t=this;this.editor=new r["a"](Object(l["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setMarkdown(this.value),this.editor.on("change",(function(){t.$emit("input",t.editor.getMarkdown())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setMarkdown:function(t){this.editor.setMarkdown(t)},getMarkdown:function(){return this.editor.getMarkdown()},setHtml:function(t){this.editor.setHtml(t)},getHtml:function(){return this.editor.getHtml()}}},d=u,p=n("2877"),h=Object(p["a"])(d,o,s,!1,null,null,null),f=h.exports,m="\n**This is test**\n\n* vue\n* element\n* webpack\n\n",v={name:"MarkdownDemo",components:{MarkdownEditor:f},data:function(){return{content1:m,content2:m,content3:m,content4:m,html:"",languageTypeList:{en:"en_US",zh:"zh_CN",es:"es_ES"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},methods:{getHtml:function(){this.html=this.$refs.markdownEditor.getHtml(),console.log(this.html)}}},g=v,b=(n("e48c"),Object(p["a"])(g,i,a,!1,null,"18de7d28",null));e["default"]=b.exports},4599:function(t,e,n){"use strict";n("e3b5")},"467e":function(t,e,n){"use strict";n("e7e1")},"49b9":function(t,e,n){"use strict";n("18bc")},"4b3b":function(t,e,n){var i={"./book":"9e8e","./book/":"9e8e","./book/index":"9e8e","./book/index.vue":"9e8e","./build":"e7727","./build/":"e7727","./build/components":"3050","./build/components/":"3050","./build/components/basicInfoForm":"bb22","./build/components/basicInfoForm.vue":"bb22","./build/components/index":"3050","./build/components/index.vue":"3050","./build/index":"e7727","./build/index.vue":"e7727","./components-demo/json-editor":"e05a","./components-demo/json-editor.vue":"e05a","./components-demo/markdown":"440b","./components-demo/markdown.vue":"440b","./components-demo/sticky":"c974","./components-demo/sticky.vue":"c974","./components-demo/tinymce":"2c16","./components-demo/tinymce.vue":"2c16","./dashboard":"9406","./dashboard/":"9406","./dashboard/admin":"3f2c","./dashboard/admin/":"3f2c","./dashboard/admin/components/BarChart":"5f84","./dashboard/admin/components/BarChart.vue":"5f84","./dashboard/admin/components/BoxCard":"8269","./dashboard/admin/components/BoxCard.vue":"8269","./dashboard/admin/components/LineChart":"36ef","./dashboard/admin/components/LineChart.vue":"36ef","./dashboard/admin/components/PanelGroup":"6768","./dashboard/admin/components/PanelGroup.vue":"6768","./dashboard/admin/components/PieChart":"2044","./dashboard/admin/components/PieChart.vue":"2044","./dashboard/admin/components/RaddarChart":"7b75","./dashboard/admin/components/RaddarChart.vue":"7b75","./dashboard/admin/components/TodoList":"2544","./dashboard/admin/components/TodoList/":"2544","./dashboard/admin/components/TodoList/Todo":"ced4","./dashboard/admin/components/TodoList/Todo.vue":"ced4","./dashboard/admin/components/TodoList/index":"2544","./dashboard/admin/components/TodoList/index.scss":"5211","./dashboard/admin/components/TodoList/index.vue":"2544","./dashboard/admin/components/TransactionTable":"2f3f","./dashboard/admin/components/TransactionTable.vue":"2f3f","./dashboard/admin/components/mixins/resize":"a7dc","./dashboard/admin/components/mixins/resize.js":"a7dc","./dashboard/admin/index":"3f2c","./dashboard/admin/index.vue":"3f2c","./dashboard/editor":"5851","./dashboard/editor/":"5851","./dashboard/editor/index":"5851","./dashboard/editor/index.vue":"5851","./dashboard/index":"9406","./dashboard/index.vue":"9406","./dict":"3225","./dict/":"3225","./dict/dictDetail":"6a3a","./dict/dictDetail.vue":"6a3a","./dict/index":"3225","./dict/index.vue":"3225","./employee":"5303","./employee/":"5303","./employee/index":"5303","./employee/index.vue":"5303","./error-page/401":"24e2","./error-page/401.vue":"24e2","./error-page/404":"1db4","./error-page/404.vue":"1db4","./excel/components/AutoWidthOption":"8ad2","./excel/components/AutoWidthOption.vue":"8ad2","./excel/components/BookTypeOption":"ebe1","./excel/components/BookTypeOption.vue":"ebe1","./excel/components/FilenameOption":"50ce","./excel/components/FilenameOption.vue":"50ce","./excel/export-excel":"5fb3","./excel/export-excel.vue":"5fb3","./excel/merge-header":"0f66","./excel/merge-header.vue":"0f66","./excel/select-excel":"3e07","./excel/select-excel.vue":"3e07","./flow-design":"02fd","./flow-design/":"02fd","./flow-design/create":"93af","./flow-design/create.vue":"93af","./flow-design/edit":"42be","./flow-design/edit.vue":"42be","./flow-design/index":"02fd","./flow-design/index.vue":"02fd","./flow/display":"cc35","./flow/display.vue":"cc35","./flow/node":"e217","./flow/node.vue":"e217","./flow/node_form":"d01b","./flow/node_form.vue":"d01b","./flow/node_menu":"0595","./flow/node_menu.vue":"0595","./flow/panel":"32ae","./flow/panel.vue":"32ae","./form":"371d","./form/":"371d","./form/components/CodeTypeDialog":"63fe","./form/components/CodeTypeDialog.vue":"63fe","./form/components/DraggableItem":"01f1","./form/components/DraggableItem.vue":"01f1","./form/components/FormDetail":"dd8a","./form/components/FormDetail.vue":"dd8a","./form/components/IconsDialog":"dd23","./form/components/IconsDialog.vue":"dd23","./form/components/RightPanel":"aa6f","./form/components/RightPanel.vue":"aa6f","./form/components/TreeNodeDialog":"cd1b","./form/components/TreeNodeDialog.vue":"cd1b","./form/create":"6a67","./form/create.vue":"6a67","./form/dynamic":"394e","./form/dynamic.vue":"394e","./form/edit":"918e","./form/edit.vue":"918e","./form/index":"371d","./form/index.vue":"371d","./job":"fac5","./job/":"fac5","./job/index":"fac5","./job/index.vue":"fac5","./log":"5905","./log/":"5905","./log/index":"5905","./log/index.vue":"5905","./login":"9ed6","./login/":"9ed6","./login/auth-redirect":"b829","./login/auth-redirect.vue":"b829","./login/components/SocialSignin":"c62e","./login/components/SocialSignin.vue":"c62e","./login/index":"9ed6","./login/index.vue":"9ed6","./menu":"f833","./menu/":"f833","./menu/index":"f833","./menu/index.vue":"f833","./org":"564c","./org/":"564c","./org/index":"564c","./org/index.vue":"564c","./profile":"ecac","./profile/":"ecac","./profile/index":"ecac","./profile/index.vue":"ecac","./profile/resetPwd":"3823","./profile/resetPwd.vue":"3823","./profile/userInfo":"2dde","./profile/userInfo.vue":"2dde","./redirect":"ef3c","./redirect/":"ef3c","./redirect/index":"ef3c","./redirect/index.vue":"ef3c","./role":"6c35","./role/":"6c35","./role/index":"6c35","./role/index.vue":"6c35","./storage":"bd113","./storage/":"bd113","./storage/blob":"0384","./storage/blob/":"0384","./storage/blob/index":"0384","./storage/blob/index.vue":"0384","./storage/index":"bd113","./storage/index.vue":"bd113","./storage/local":"cd60","./storage/local/":"cd60","./storage/local/index":"cd60","./storage/local/index.vue":"cd60","./tenant":"f143","./tenant/":"f143","./tenant/index":"f143","./tenant/index.vue":"f143","./user":"e382","./user/":"e382","./user/index":"e382","./user/index.vue":"e382"};function a(t){var e=o(t);return n(e)}function o(t){var e=i[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}a.keys=function(){return Object.keys(i)},a.resolve=o,t.exports=a,a.id="4b3b"},"4be5":function(t,e,n){"use strict";n("ac6a");var i=n("53ca");n("6c7b"),n("8449"),n("4917"),n("7f7f"),n("55dd"),n("a481"),n("3b2b"),n("28a5"),n("6b54");(function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(t){return 0==t?0:t>0?1:-1});var t={subtract:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},dotProduct:function(t,e){return t.x*e.x+t.y*e.y},square:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},scale:function(t,e){return{x:t.x*e,y:t.y*e}}},e=64,n=Math.pow(2,-e-1),i=function(e,n){for(var i=[],a=o(e,n),l=n.length-1,r=2*l-1,c=s(a,r,i,0),d=t.subtract(e,n[0]),p=t.square(d),h=0,f=0;f<c;f++){d=t.subtract(e,u(n,l,i[f],null,null));var m=t.square(d);m<p&&(p=m,h=i[f])}return d=t.subtract(e,n[l]),m=t.square(d),m<p&&(p=m,h=1),{location:h,distance:p}},a=function(t,e){var n=i(t,e);return{point:u(e,e.length-1,n.location,null,null),location:n.location}},o=function(e,n){for(var i=n.length-1,a=2*i-1,o=[],s=[],l=[],r=[],c=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],u=0;u<=i;u++)o[u]=t.subtract(n[u],e);for(u=0;u<=i-1;u++)s[u]=t.subtract(n[u+1],n[u]),s[u]=t.scale(s[u],3);for(var d=0;d<=i-1;d++)for(var p=0;p<=i;p++)l[d]||(l[d]=[]),l[d][p]=t.dotProduct(s[d],o[p]);for(u=0;u<=a;u++)r[u]||(r[u]=[]),r[u].y=0,r[u].x=parseFloat(u)/a;for(var h=i,f=i-1,m=0;m<=h+f;m++){var v=Math.max(0,m-f),g=Math.min(m,h);for(u=v;u<=g;u++){var b=m-u;r[u+b].y+=l[b][u]*c[b][u]}}return r},s=function t(n,i,a,o){var s,d,p=[],h=[],f=[],m=[];switch(l(n,i)){case 0:return 0;case 1:if(o>=e)return a[0]=(n[0].x+n[i].x)/2,1;if(r(n,i))return a[0]=c(n,i),1;break}u(n,i,.5,p,h),s=t(p,i,f,o+1),d=t(h,i,m,o+1);for(var v=0;v<s;v++)a[v]=f[v];for(v=0;v<d;v++)a[v+s]=m[v];return s+d},l=function(t,e){var n,i,a=0;n=i=Math.sgn(t[0].y);for(var o=1;o<=e;o++)n=Math.sgn(t[o].y),n!=i&&a++,i=n;return a},r=function(t,e){var i,a,o,s,l,r,c,u,d,p,h,f,m,v,g,b,y,_;r=t[0].y-t[e].y,c=t[e].x-t[0].x,u=t[0].x*t[e].y-t[e].x*t[0].y,y=_=0;for(var x=1;x<e;x++){var w=r*t[x].x+c*t[x].y+u;w>y?y=w:w<_&&(_=w)}return h=0,f=1,m=0,v=r,g=c,b=u-y,d=h*g-v*f,p=1/d,a=(f*b-g*m)*p,v=r,g=c,b=u-_,d=h*g-v*f,p=1/d,o=(f*b-g*m)*p,s=Math.min(a,o),l=Math.max(a,o),i=l-s,i<n?1:0},c=function(t,e){var n=1,i=0,a=t[e].x-t[0].x,o=t[e].y-t[0].y,s=t[0].x-0,l=t[0].y-0,r=a*i-o*n,c=1/r,u=(a*l-o*s)*c;return 0+n*u},u=function(t,e,n,i,a){for(var o=[[]],s=0;s<=e;s++)o[0][s]=t[s];for(var l=1;l<=e;l++)for(s=0;s<=e-l;s++)o[l]||(o[l]=[]),o[l][s]||(o[l][s]={}),o[l][s].x=(1-n)*o[l-1][s].x+n*o[l-1][s+1].x,o[l][s].y=(1-n)*o[l-1][s].y+n*o[l-1][s+1].y;if(null!=i)for(s=0;s<=e;s++)i[s]=o[s][0];if(null!=a)for(s=0;s<=e;s++)a[s]=o[e-s][s];return o[e][0]},d={},p=function(t){var e=d[t];if(!e){e=[];var n=function(){return function(e){return Math.pow(e,t)}},i=function(){return function(e){return Math.pow(1-e,t)}},a=function(t){return function(e){return t}},o=function(){return function(t){return t}},s=function(){return function(t){return 1-t}},l=function(t){return function(e){for(var n=1,i=0;i<t.length;i++)n*=t[i](e);return n}};e.push(new n);for(var r=1;r<t;r++){for(var c=[new a(t)],u=0;u<t-r;u++)c.push(new o);for(u=0;u<r;u++)c.push(new s);e.push(new l(c))}e.push(new i),d[t]=e}return e},h=function(t,e){for(var n=p(t.length-1),i=0,a=0,o=0;o<t.length;o++)i+=t[o].x*n[o](e),a+=t[o].y*n[o](e);return{x:i,y:a}},f=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},m=function(t){return t[0].x===t[1].x&&t[0].y===t[1].y},v=function(t,e,n){if(m(t))return{point:t[0],location:e};var i=h(t,e),a=0,o=e,s=n>0?1:-1,l=null;while(a<Math.abs(n))o+=.005*s,l=h(t,o),a+=f(l,i),i=l;return{point:l,location:o}},g=function(t){if(m(t))return 0;var e=h(t,0),n=0,i=0,a=1,o=null;while(i<1)i+=.005*a,o=h(t,i),n+=f(o,e),e=o;return n},b=function(t,e,n){return v(t,e,n).point},y=function(t,e,n){return v(t,e,n).location},_=function(t,e){var n=h(t,e),i=h(t.slice(0,t.length-1),e),a=i.y-n.y,o=i.x-n.x;return 0===a?1/0:Math.atan(a/o)},x=function(t,e,n){var i=v(t,e,n);return i.location>1&&(i.location=1),i.location<0&&(i.location=0),_(t,i.location)},w=function(t,e,n,i){i=null==i?0:i;var a=v(t,e,i),o=_(t,a.location),s=Math.atan(-1/o),l=n/2*Math.sin(s),r=n/2*Math.cos(s);return[{x:a.point.x+r,y:a.point.y+l},{x:a.point.x-r,y:a.point.y-l}]},C=function(t,e,n,i,a){var o=i-e,s=t-n,l=t*(e-i)+e*(n-t),r=P(a),c=[o*r[0][0]+s*r[1][0],o*r[0][1]+s*r[1][1],o*r[0][2]+s*r[1][2],o*r[0][3]+s*r[1][3]+l],u=j.apply(null,c),d=[];if(null!=u)for(var p=0;p<3;p++){var h,f=u[p],m=Math.pow(f,2),v=Math.pow(f,3),g=[r[0][0]*v+r[0][1]*m+r[0][2]*f+r[0][3],r[1][0]*v+r[1][1]*m+r[1][2]*f+r[1][3]];h=n-t!==0?(g[0]-t)/(n-t):(g[1]-e)/(i-e),f>=0&&f<=1&&h>=0&&h<=1&&d.push(g)}return d},k=function(t,e,n,i,a){var o=[];return o.push.apply(o,C(t,e,t+n,e,a)),o.push.apply(o,C(t+n,e,t+n,e+i,a)),o.push.apply(o,C(t+n,e+i,t,e+i,a)),o.push.apply(o,C(t,e+i,t,e,a)),o},D=function(t,e){var n=[];return n.push.apply(n,C(t.x,t.y,t.x+t.w,t.y,e)),n.push.apply(n,C(t.x+t.w,t.y,t.x+t.w,t.y+t.h,e)),n.push.apply(n,C(t.x+t.w,t.y+t.h,t.x,t.y+t.h,e)),n.push.apply(n,C(t.x,t.y+t.h,t.x,t.y,e)),n};function S(t,e){return[-t[0][e]+3*t[1][e]+-3*t[2][e]+t[3][e],3*t[0][e]-6*t[1][e]+3*t[2][e],-3*t[0][e]+3*t[1][e],t[0][e]]}function P(t){return[S(t,"x"),S(t,"y")]}function E(t){return t<0?-1:t>0?1:0}function j(t,e,n,i){var a,o,s=e/t,l=n/t,r=i/t,c=(3*l-Math.pow(s,2))/9,u=(9*s*l-27*r-2*Math.pow(s,3))/54,d=Math.pow(c,3)+Math.pow(u,2),p=[];if(d>=0)a=E(u+Math.sqrt(d))*Math.pow(Math.abs(u+Math.sqrt(d)),1/3),o=E(u-Math.sqrt(d))*Math.pow(Math.abs(u-Math.sqrt(d)),1/3),p[0]=-s/3+(a+o),p[1]=-s/3-(a+o)/2,p[2]=-s/3-(a+o)/2,0!==Math.abs(Math.sqrt(3)*(a-o)/2)&&(p[1]=-1,p[2]=-1);else{var h=Math.acos(u/Math.sqrt(-Math.pow(c,3)));p[0]=2*Math.sqrt(-c)*Math.cos(h/3)-s/3,p[1]=2*Math.sqrt(-c)*Math.cos((h+2*Math.PI)/3)-s/3,p[2]=2*Math.sqrt(-c)*Math.cos((h+4*Math.PI)/3)-s/3}for(var f=0;f<3;f++)(p[f]<0||p[f]>1)&&(p[f]=-1);return p}var L=this.jsBezier={distanceFromCurve:i,gradientAtPoint:_,gradientAtPointAlongCurveFrom:x,nearestPointOnCurve:a,pointOnCurve:h,pointAlongCurveFrom:b,perpendicularToCurveAt:w,locationAlongCurveFrom:y,getLength:g,lineIntersection:C,boxIntersection:k,boundingBoxIntersection:D,version:"0.9.0"};"undefined"!==typeof exports&&(exports.jsBezier=L)}).call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.Biltong={version:"0.4.0"};"undefined"!==typeof exports&&(exports.Biltong=e);var n=function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=function(t,e,i){return t=n(t)?t:[t.x,t.y],e=n(e)?e:[e.x,e.y],i(t,e)},a=e.gradient=function(t,e){return i(t,e,(function(t,e){return e[0]==t[0]?e[1]>t[1]?1/0:-1/0:e[1]==t[1]?e[0]>t[0]?0:-0:(e[1]-t[1])/(e[0]-t[0])}))},o=(e.normal=function(t,e){return-1/a(t,e)},e.lineLength=function(t,e){return i(t,e,(function(t,e){return Math.sqrt(Math.pow(e[1]-t[1],2)+Math.pow(e[0]-t[0],2))}))},e.quadrant=function(t,e){return i(t,e,(function(t,e){return e[0]>t[0]||e[0]==t[0]?e[1]>t[1]?2:1:e[1]>t[1]?3:4}))}),s=(e.theta=function(t,e){return i(t,e,(function(t,e){var n=a(t,e),i=Math.atan(n),s=o(t,e);return 4!=s&&3!=s||(i+=Math.PI),i<0&&(i+=2*Math.PI),i}))},e.intersects=function(t,e){var n=t.x,i=t.x+t.w,a=t.y,o=t.y+t.h,s=e.x,l=e.x+e.w,r=e.y,c=e.y+e.h;return n<=s&&s<=i&&a<=r&&r<=o||n<=l&&l<=i&&a<=r&&r<=o||n<=s&&s<=i&&a<=c&&c<=o||n<=l&&s<=i&&a<=c&&c<=o||s<=n&&n<=l&&r<=a&&a<=c||s<=i&&i<=l&&r<=a&&a<=c||s<=n&&n<=l&&r<=o&&o<=c||s<=i&&n<=l&&r<=o&&o<=c},e.encloses=function(t,e,n){var i=t.x,a=t.x+t.w,o=t.y,s=t.y+t.h,l=e.x,r=e.x+e.w,c=e.y,u=e.y+e.h,d=function(t,e,i,a){return n?t<=e&&i>=a:t<e&&i>a};return d(i,l,a,r)&&d(o,c,s,u)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),l=[null,[-1,-1],[-1,1],[1,1],[1,-1]];e.pointOnLine=function(t,e,n){var i=a(t,e),r=o(t,e),c=n>0?s[r]:l[r],u=Math.atan(i),d=Math.abs(n*Math.sin(u))*c[1],p=Math.abs(n*Math.cos(u))*c[0];return{x:t.x+p,y:t.y+d}},e.perpendicularLineTo=function(t,e,n){var i=a(t,e),o=Math.atan(-1/i),s=n/2*Math.sin(o),l=n/2*Math.cos(o);return[{x:e.x+l,y:e.y+s},{x:e.x-l,y:e.y-s}]}}.call("undefined"!==typeof window?window:void 0),function(){function t(t,e,n,i,a,o,s,l){return new Touch({target:e,identifier:F(),pageX:n,pageY:i,screenX:a,screenY:o,clientX:s||a,clientY:l||o})}function e(){var t=[];return Array.prototype.push.apply(t,arguments),t.item=function(t){return this[t]},t}function n(n,i,a,o,s,l,r,c){return e(t.apply(null,arguments))}var i=this,a=function(t,e,n){n=n||t.parentNode;for(var i=n.querySelectorAll(e),a=0;a<i.length;a++)if(i[a]===t)return!0;return!1},o=function(t){return"string"==typeof t||t.constructor===String?document.getElementById(t):t},s=function(t){return t.srcElement||t.target},l=function(t,e,n,i){if(i){if("undefined"!==typeof t.path&&t.path.indexOf)return{path:t.path,end:t.path.indexOf(n)};var a={path:[],end:-1},o=function t(e){a.path.push(e),e===n?a.end=a.path.length-1:null!=e.parentNode&&t(e.parentNode)};return o(e),a}return{path:[e],end:1}},r=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]==e)break;n<t.length&&t.splice(n,1)},c=1,u=function(t,e,n){var i=c++;return t.__ta=t.__ta||{},t.__ta[e]=t.__ta[e]||{},t.__ta[e][i]=n,n.__tauid=i,i},d=function(t,e,n){if(t.__ta&&t.__ta[e]&&delete t.__ta[e][n.__tauid],n.__taExtra){for(var i=0;i<n.__taExtra.length;i++)O(t,n.__taExtra[i][0],n.__taExtra[i][1]);n.__taExtra.length=0}n.__taUnstore&&n.__taUnstore()},p=function(t,e,n,i){if(null==t)return n;var o=t.split(","),r=function i(r){i.__tauid=n.__tauid;var c=s(r),u=c,d=l(r,c,e,null!=t);if(-1!=d.end)for(var p=0;p<d.end;p++){u=d.path[p];for(var h=0;h<o.length;h++)a(u,o[h],e)&&n.apply(u,arguments)}};return h(n,i,r),r},h=function(t,e,n){t.__taExtra=t.__taExtra||[],t.__taExtra.push([e,n])},f=function(t,e,n,i){if(_&&w[e]){var a=p(i,t,n,w[e]);I(t,w[e],a,n)}"focus"===e&&null==t.getAttribute("tabindex")&&t.setAttribute("tabindex","1"),I(t,e,p(i,t,n,e),n)},m=function(t,e,n,i){if(null==t.__taSmartClicks){var a=function(e){t.__tad=S(e)},o=function(e){t.__tau=S(e)},l=function(e){if(t.__tad&&t.__tau&&t.__tad[0]===t.__tau[0]&&t.__tad[1]===t.__tau[1])for(var n=0;n<t.__taSmartClicks.length;n++)t.__taSmartClicks[n].apply(s(e),[e])};f(t,"mousedown",a,i),f(t,"mouseup",o,i),f(t,"click",l,i),t.__taSmartClicks=[]}t.__taSmartClicks.push(n),n.__taUnstore=function(){r(t.__taSmartClicks,n)}},v={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},g=function(t,e){return function(n,i,o,c){if("contextmenu"==i&&x)f(n,i,o,c);else{if(null==n.__taTapHandler){var u=n.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},d=function(i){for(var o=s(i),r=l(i,o,n,null!=c),d=!1,p=0;p<r.end;p++){if(d)return;o=r.path[p];for(var f=0;f<u.downSelectors.length;f++)if(null==u.downSelectors[f]||a(o,u.downSelectors[f],n)){u.down=!0,setTimeout(h,t),setTimeout(m,e),d=!0;break}}},p=function(t){if(u.down){var e,i,o=s(t);u.taps++;var r=T(t);for(var c in v)if(v.hasOwnProperty(c)){var d=v[c];if(d.touches===r&&(1===d.taps||d.taps===u.taps))for(var p=0;p<u[c].length;p++){i=l(t,o,n,null!=u[c][p][1]);for(var h=0;h<i.end;h++)if(e=i.path[h],null==u[c][p][1]||a(e,u[c][p][1],n)){u[c][p][0].apply(e,[t]);break}}}}},h=function(){u.down=!1},m=function(){u.taps=0};f(n,"mousedown",d),f(n,"mouseup",p)}n.__taTapHandler.downSelectors.push(c),n.__taTapHandler[i].push([o,c]),o.__taUnstore=function(){r(n.__taTapHandler[i],o)}}}},b=function(t,e,n,i){for(var a in n.__tamee[t])n.__tamee[t].hasOwnProperty(a)&&n.__tamee[t][a].apply(i,[e])},y=function(){var t=[];return function(e,n,i,o){if(!e.__tamee){e.__tamee={over:!1,mouseenter:[],mouseexit:[]};var l=function(n){var i=s(n);(null==o&&i==e&&!e.__tamee.over||a(i,o,e)&&(null==i.__tamee||!i.__tamee.over))&&(b("mouseenter",n,e,i),i.__tamee=i.__tamee||{},i.__tamee.over=!0,t.push(i))},r=function(n){for(var i=s(n),o=0;o<t.length;o++)i!=t[o]||a(n.relatedTarget||n.toElement,"*",i)||(i.__tamee.over=!1,t.splice(o,1),b("mouseexit",n,e,i))};I(e,"mouseover",p(o,e,l,"mouseover"),l),I(e,"mouseout",p(o,e,r,"mouseout"),r)}i.__taUnstore=function(){delete e.__tamee[n][i.__tauid]},u(e,n,i),e.__tamee[n][i.__tauid]=i}},_="ontouchstart"in document.documentElement,x="onmousedown"in document.documentElement,w={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},C=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),k=C>-1&&C<9,D=function(t,e){if(null==t)return[0,0];var n=L(t),i=j(n,0);return[i[e+"X"],i[e+"Y"]]},S=function(t){return null==t?[0,0]:k?[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop]:D(t,"page")},P=function(t){return D(t,"screen")},E=function(t){return D(t,"client")},j=function(t,e){return t.item?t.item(e):t[e]},L=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},T=function(t){return L(t).length},I=function(t,e,n,i){if(u(t,e,n),i.__tauid=n.__tauid,t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent){var a=e+n.__tauid;t["e"+a]=n,t[a]=function(){t["e"+a]&&t["e"+a](window.event)},t.attachEvent("on"+e,t[a])}},O=function t(e,n,i){null!=i&&$(e,(function(){var a=o(this);if(d(a,n,i),null!=i.__tauid)if(a.removeEventListener)a.removeEventListener(n,i,!1),_&&w[n]&&a.removeEventListener(w[n],i,!1);else if(this.detachEvent){var s=n+i.__tauid;a[s]&&a.detachEvent("on"+n,a[s]),a[s]=null,a["e"+s]=null}i.__taTouchProxy&&t(e,i.__taTouchProxy[1],i.__taTouchProxy[0])}))},$=function(t,e){if(null!=t){t="undefined"!==typeof Window&&"unknown"!==typeof t.top&&t==t.top?[t]:"string"!==typeof t&&null==t.tagName&&null!=t.length?t:"string"===typeof t?document.querySelectorAll(t):[t];for(var n=0;n<t.length;n++)e.apply(t[n])}},F=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)}))};i.Mottle=function(t){t=t||{};var e=t.clickThreshold||250,i=t.dblClickThreshold||450,a=new y,s=new g(e,i),l=t.smartClicks,r=function(t,e,n,i){null!=n&&$(t,(function(){var t=o(this);l&&"click"===e?m(t,e,n,i):"tap"===e||"dbltap"===e||"contextmenu"===e?s(t,e,n,i):"mouseenter"===e||"mouseexit"==e?a(t,e,n,i):f(t,e,n,i)}))};this.remove=function(t){return $(t,(function(){var t=o(this);if(t.__ta)for(var e in t.__ta)if(t.__ta.hasOwnProperty(e))for(var n in t.__ta[e])t.__ta[e].hasOwnProperty(n)&&O(t,e,t.__ta[e][n]);t.parentNode&&t.parentNode.removeChild(t)})),this},this.on=function(t,e,n,i){var a=arguments[0],o=4==arguments.length?arguments[2]:null,s=arguments[1],l=arguments[arguments.length-1];return r(a,s,l,o),this},this.off=function(t,e,n){return O(t,e,n),this},this.trigger=function(t,e,i,a){var s=x&&("undefined"===typeof MouseEvent||null==i||i.constructor===MouseEvent),l=_&&!x&&w[e]?w[e]:e,r=!(_&&!x&&w[e]),c=S(i),u=P(i),d=E(i);return $(t,(function(){var t,p=o(this);i=i||{screenX:u[0],screenY:u[1],clientX:d[0],clientY:d[1]};var h=function(t){a&&(t.payload=a)},f={TouchEvent:function(t){var e=n(window,p,0,c[0],c[1],u[0],u[1],d[0],d[1]),i=t.initTouchEvent||t.initEvent;i(l,!0,!0,window,null,u[0],u[1],d[0],d[1],!1,!1,!1,!1,e,e,e,1,0)},MouseEvents:function(t){t.initMouseEvent(l,!0,!0,window,0,u[0],u[1],d[0],d[1],!1,!1,!1,!1,1,p)}};if(document.createEvent){var m=!r&&!s&&_&&w[e],v=m?"TouchEvent":"MouseEvents";t=document.createEvent(v),f[v](t),h(t),p.dispatchEvent(t)}else document.createEventObject&&(t=document.createEventObject(),t.eventType=t.eventName=l,t.screenX=u[0],t.screenY=u[1],t.clientX=d[0],t.clientY=d[1],h(t),p.fireEvent("on"+l,t))})),this}},i.Mottle.consume=function(t,e){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!e&&t.preventDefault&&t.preventDefault()},i.Mottle.pageLocation=S,i.Mottle.setForceTouchEvents=function(t){_=t},i.Mottle.setForceMouseEvents=function(t){x=t},i.Mottle.version="0.8.0","undefined"!==typeof exports&&(exports.Mottle=i.Mottle)}.call("undefined"===typeof window?void 0:window),function(){var t=this,e=function(t,e,n){return-1===t.indexOf(e)&&(n?t.unshift(e):t.push(e),!0)},n=function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},i=function(t,e){for(var n=[],i=0;i<t.length;i++)-1===e.indexOf(t[i])&&n.push(t[i]);return n},a=function(t){return null!=t&&("string"===typeof t||t.constructor===String)},o=function(t){var e=t.getBoundingClientRect(),n=document.body,i=document.documentElement,a=window.pageYOffset||i.scrollTop||n.scrollTop,o=window.pageXOffset||i.scrollLeft||n.scrollLeft,s=i.clientTop||n.clientTop||0,l=i.clientLeft||n.clientLeft||0,r=e.top+a-s,c=e.left+o-l;return{top:Math.round(r),left:Math.round(c)}},s=function(t,e,n){n=n||t.parentNode;for(var i=n.querySelectorAll(e),a=0;a<i.length;a++)if(i[a]===t)return!0;return!1},l=function(t,e,n){if(s(e,n,t))return e;var i=e.parentNode;while(null!=i&&i!==t){if(s(i,n,t))return i;i=i.parentNode}},r=function(t,e,n){for(var i=null,a=e.getAttribute("katavorio-draggable"),o=null!=a?"[katavorio-draggable='"+a+"'] ":"",r=0;r<t.length;r++)if(i=l(e,n,o+t[r].selector),null!=i){if(t[r].filter){var c=s(n,t[r].filter,i),u=!0===t[r].filterExclude;if(u&&!c||c)return null}return[t[r],i]}return null},c=function(){var t=-1;if("Microsoft Internet Explorer"===navigator.appName){var e=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),u=10,d=10,p=c>-1&&c<9,h=9===c,f=function(t){if(p)return[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop];var e=v(t),n=m(e,0);return h?[n.pageX||n.clientX,n.pageY||n.clientY]:[n.pageX,n.pageY]},m=function(t,e){return t.item?t.item(e):t[e]},v=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},g={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},b="katavorio-drag-scope",y=["stop","start","drag","drop","over","out","beforeStart"],_=function(){},x=function(){return!0},w=function(t,e,n){for(var i=0;i<t.length;i++)t[i]!=n&&e(t[i])},C=function(t,e,n,i){w(t,(function(t){t.setActive(e),e&&t.updatePosition(),n&&t.setHover(i,e)}))},k=function(t,e){if(null!=t){t=a(t)||null!=t.tagName||null==t.length?[t]:t;for(var n=0;n<t.length;n++)e.apply(t[n],[t[n]])}},D=function(t){t.stopPropagation?(t.stopPropagation(),t.preventDefault()):t.returnValue=!1},S="input,textarea,select,button,option",P=function(t,e,n){var i=t.srcElement||t.target;return!s(i,n.getInputFilterSelector(),e)},E=function(t,e,n,i){this.params=e||{},this.el=t,this.params.addClass(this.el,this._class),this.uuid=O();var a=!0;return this.setEnabled=function(t){a=t},this.isEnabled=function(){return a},this.toggleEnabled=function(){a=!a},this.setScope=function(t){this.scopes=t?t.split(/\s+/):[i]},this.addScope=function(t){var e={};for(var n in k(this.scopes,(function(t){e[t]=!0})),k(t?t.split(/\s+/):[],(function(t){e[t]=!0})),this.scopes=[],e)this.scopes.push(n)},this.removeScope=function(t){var e={};for(var n in k(this.scopes,(function(t){e[t]=!0})),k(t?t.split(/\s+/):[],(function(t){delete e[t]})),this.scopes=[],e)this.scopes.push(n)},this.toggleScope=function(t){var e={};for(var n in k(this.scopes,(function(t){e[t]=!0})),k(t?t.split(/\s+/):[],(function(t){e[t]?delete e[t]:e[t]=!0})),this.scopes=[],e)this.scopes.push(n)},this.setScope(e.scope),this.k=e.katavorio,e.katavorio},j=function(){return!0},L=function(){return!1},T=function(t,e,n,i){this._class=n.draggable;var l=E.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var c,p,h,m,v=[0,0],b=null,y=null,_=[0,0],w=!1,k=[0,0],S=!1!==this.params.consumeStartEvent,T=this.el,I=this.params.clone,F=(this.params.scroll,!1!==e.multipleDrop),A=!1,M=!0===e.ghostProxy?j:e.ghostProxy&&"function"===typeof e.ghostProxy?e.ghostProxy:L,N=function(t){return t.cloneNode(!0)},R=null,z=[],B=null,U=e.ghostProxyParent;if(e.selector){var V=t.getAttribute("katavorio-draggable");null==V&&(V=""+(new Date).getTime(),t.setAttribute("katavorio-draggable",V)),z.push(e)}var Q,G=e.snapThreshold,H=function(t,e,n,i,a){var o=Math.floor(t[0]/e),s=e*o,l=s+e,r=Math.abs(t[0]-s)<=i?s:Math.abs(l-t[0])<=i?l:t[0],c=Math.floor(t[1]/n),u=n*c,d=u+n,p=Math.abs(t[1]-u)<=a?u:Math.abs(d-t[1])<=a?d:t[1];return[r,p]};this.posses=[],this.posseRoles={},this.toGrid=function(t){if(null==this.params.grid)return t;var e=this.params.grid?this.params.grid[0]/2:G||u/2,n=this.params.grid?this.params.grid[1]/2:G||d/2;return H(t,this.params.grid[0],this.params.grid[1],e,n)},this.snap=function(t,e){if(null!=T){t=t||(this.params.grid?this.params.grid[0]:u),e=e||(this.params.grid?this.params.grid[1]:d);var n=this.params.getPosition(T),i=this.params.grid?this.params.grid[0]/2:G,a=this.params.grid?this.params.grid[1]/2:G,o=H(n,t,e,i,a);return this.params.setPosition(T,o),o}},this.setUseGhostProxy=function(t){M=t?j:L};var q,W=function(t){return!1===e.allowNegative?[Math.max(0,t[0]),Math.max(0,t[1])]:t},X=function(t){Q="function"===typeof t?t:t?function(t,e,n,i){return W([Math.max(0,Math.min(n.w-i[0],t[0])),Math.max(0,Math.min(n.h-i[1],t[1]))])}.bind(this):function(t){return W(t)}}.bind(this);X("function"===typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(t){X(t)},this.setRevert=function(t){q=t},this.params.revert&&(q=this.params.revert);var Y=function(t){return"function"===typeof t?(t._katavorioId=O(),t._katavorioId):t},J={},K=function(t){for(var e in J){var n=J[e],i=n[0](t);if(n[1]&&(i=!i),!i)return!1}return!0},Z=this.setFilter=function(e,n){if(e){var i=Y(e);J[i]=[function(n){var i,o=n.srcElement||n.target;return a(e)?i=s(o,e,t):"function"===typeof e&&(i=e(n,t)),i},!1!==n]}};this.addFilter=Z,this.removeFilter=function(t){var e="function"===typeof t?t._katavorioId:t;delete J[e]};this.clearAllFilters=function(){J={}},this.canDrag=this.params.canDrag||x;var tt,et=[],nt=[];this.addSelector=function(t){t.selector&&z.push(t)},this.downListener=function(t){if(!t.defaultPrevented){var e=this.rightButtonCanDrag||3!==t.which&&2!==t.button;if(e&&this.isEnabled()&&this.canDrag()){var i=K(t)&&P(t,this.el,this.k);if(i){if(B=null,R=null,z.length>0){var a=r(z,this.el,t.target||t.srcElement);if(null!=a&&(B=a[0],R=a[1]),null==R)return}else R=this.el;if(I)if(T=R.cloneNode(!0),this.params.addClass(T,g.clonedDrag),T.setAttribute("id",null),T.style.position="absolute",null!=this.params.parent){var s=this.params.getPosition(this.el);T.style.left=s[0]+"px",T.style.top=s[1]+"px",this.params.parent.appendChild(T)}else{var c=o(R);T.style.left=c.left+"px",T.style.top=c.top+"px",document.body.appendChild(T)}else T=R;S&&D(t),v=f(t),T&&T.parentNode&&(k=[T.parentNode.scrollLeft,T.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),l.markSelection(this),l.markPosses(this),this.params.addClass(document.body,n.noSelect),ot("beforeStart",{el:this.el,pos:b,e:t,drag:this})}else this.params.consumeFilteredEvents&&D(t)}}}.bind(this),this.moveListener=function(t){if(v){if(!w){var e=ot("start",{el:this.el,pos:b,e:t,drag:this});if(!1!==e){if(!v)return;this.mark(!0),w=!0}else this.abort()}if(v){nt.length=0;var n=f(t),i=n[0]-v[0],a=n[1]-v[1],o=this.params.ignoreZoom?1:l.getZoom();T&&T.parentNode&&(i+=T.parentNode.scrollLeft-k[0],a+=T.parentNode.scrollTop-k[1]),i/=o,a/=o,this.moveBy(i,a,t),l.updateSelection(i,a,this),l.updatePosses(i,a,this)}}}.bind(this),this.upListener=function(t){v&&(v=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,n.noSelect),this.unmark(t),l.unmarkSelection(this,t),l.unmarkPosses(this,t),this.stop(t),l.notifyPosseDragStop(this,t),w=!1,nt.length=0,I?(T&&T.parentNode&&T.parentNode.removeChild(T),T=null):q&&!0===q(T,this.params.getPosition(T))&&(this.params.setPosition(T,b),ot("revert",T)))}.bind(this),this.getFilters=function(){return J},this.abort=function(){null!=v&&this.upListener()},this.getDragElement=function(t){return t?R||this.el:T||this.el};var it={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};e.events.start&&it.start.push(e.events.start),e.events.beforeStart&&it.beforeStart.push(e.events.beforeStart),e.events.stop&&it.stop.push(e.events.stop),e.events.drag&&it.drag.push(e.events.drag),e.events.revert&&it.revert.push(e.events.revert),this.on=function(t,e){it[t]&&it[t].push(e)},this.off=function(t,e){if(it[t]){for(var n=[],i=0;i<it[t].length;i++)it[t][i]!==e&&n.push(it[t][i]);it[t]=n}};var at,ot=function(t,e){var n=null;if(B&&B[t])n=B[t](e);else if(it[t])for(var i=0;i<it[t].length;i++)try{var a=it[t][i](e);null!=a&&(n=a)}catch(o){}return n};this.notifyStart=function(t){ot("start",{el:this.el,pos:this.params.getPosition(T),e:t,drag:this})},this.stop=function(t,e){if(e||w){var n=[],i=l.getSelection(),a=this.params.getPosition(T);if(i.length>0)for(var o=0;o<i.length;o++){var s=this.params.getPosition(i[o].el);n.push([i[o].el,{left:s[0],top:s[1]},i[o]])}else n.push([T,{left:a[0],top:a[1]},this]);ot("stop",{el:T,pos:at||a,finalPos:a,e:t,drag:this,selection:n})}},this.mark=function(t){var e;b=this.params.getPosition(T),y=this.params.getPosition(T,!0),_=[y[0]-b[0],y[1]-b[1]],this.size=this.params.getSize(T),et=l.getMatchingDroppables(this),C(et,!0,!1,this),this.params.addClass(T,this.params.dragClass||n.drag),e=this.params.getConstrainingRectangle?this.params.getConstrainingRectangle(T):this.params.getSize(T.parentNode),tt={w:e[0],h:e[1]},h=0,m=0,t&&l.notifySelectionDragStart(this)},this.unmark=function(t,i){if(C(et,!1,!0,this),A&&M(R,T)?(at=[T.offsetLeft-h,T.offsetTop-m],T.parentNode.removeChild(T),T=R):at=null,this.params.removeClass(T,this.params.dragClass||n.drag),et.length=0,A=!1,!i){nt.length>0&&at&&e.setPosition(R,at),nt.sort($);for(var a=0;a<nt.length;a++){var o=nt[a].drop(this,t);if(!0===o)break}}},this.moveBy=function(t,n,i){nt.length=0;var a=this.toGrid([b[0]+t,b[1]+n]),o=Q(a,T,tt,this.size);if(M(this.el,T))if(a[0]!==o[0]||a[1]!==o[1]){if(!A){var s=N(R);e.addClass(s,g.ghostProxy),U?(U.appendChild(s),c=e.getPosition(R.parentNode,!0),p=e.getPosition(e.ghostProxyParent,!0),h=c[0]-p[0],m=c[1]-p[1]):R.parentNode.appendChild(s),T=s,A=!0}o=a}else A&&(T.parentNode.removeChild(T),T=R,A=!1,c=null,p=null,h=0,m=0);var l={x:o[0],y:o[1],w:this.size[0],h:this.size[1]},r={x:l.x+_[0],y:l.y+_[1],w:l.w,h:l.h},u=null;this.params.setPosition(T,[o[0]+h,o[1]+m]);for(var d=0;d<et.length;d++){var f={x:et[d].pagePosition[0],y:et[d].pagePosition[1],w:et[d].size[0],h:et[d].size[1]};this.params.intersects(r,f)&&(F||null==u||u===et[d].el)&&et[d].canDrop(this)?(u||(u=et[d].el),nt.push(et[d]),et[d].setHover(this,!0,i)):et[d].isHover()&&et[d].setHover(this,!1,i)}ot("drag",{el:this.el,pos:o,e:i,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?Z(this.params.handle,!1):Z(this.params.filter,this.params.filterExclude)},I=function(t,e,n,i){this._class=n.droppable,this.params=e||{},this.rank=e.rank||0,this._activeClass=this.params.activeClass||n.active,this._hoverClass=this.params.hoverClass||n.hover,E.apply(this,arguments);var a=!1;this.allowLoopback=!1!==this.params.allowLoopback,this.setActive=function(t){this.params[t?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(t){return!0},this.isHover=function(){return a},this.setHover=function(t,e,n){(e||null==this.el._katavorioDragHover||this.el._katavorioDragHover===t.el._katavorio)&&(this.params[e?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=e?t.el._katavorio:null,a!==e&&this.params.events[e?"over":"out"]({el:this.el,e:n,drag:t,drop:this}),a=e)},this.drop=function(t,e){return this.params.events["drop"]({drag:t,e:e,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,a=null}},O=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}))},$=function(t,e){return t.rank<e.rank?1:t.rank>e.rank?-1:0},F=function(t){return null==t?null:(t="string"===typeof t||t.constructor===String?document.getElementById(t):t,null==t?null:(t._katavorio=t._katavorio||O(),t))};t.Katavorio=function(t){var o=[],s={};this._dragsByScope={},this._dropsByScope={};var l=1,r=function(t,e){k(t,(function(t){for(var n=0;n<t.scopes.length;n++)e[t.scopes[n]]=e[t.scopes[n]]||[],e[t.scopes[n]].push(t)}))},c=function(e,n){var i=0;return k(e,(function(e){for(var a=0;a<e.scopes.length;a++)if(n[e.scopes[a]]){var o=t.indexOf(n[e.scopes[a]],e);-1!==o&&(n[e.scopes[a]].splice(o,1),i++)}})),i>0},u=(this.getMatchingDroppables=function(t){for(var e=[],n={},i=0;i<t.scopes.length;i++){var a=this._dropsByScope[t.scopes[i]];if(a)for(var o=0;o<a.length;o++)!a[o].canDrop(t)||n[a[o].uuid]||!a[o].allowLoopback&&a[o].el===t.el||(n[a[o].uuid]=!0,e.push(a[o]))}return e.sort($),e},function(e){e=e||{};var n,i={events:{}};for(n in t)i[n]=t[n];for(n in e)i[n]=e[n];for(n=0;n<y.length;n++)i.events[y[n]]=e[y[n]]||_;return i.katavorio=this,i}.bind(this)),d=function(t,e){for(var n=0;n<y.length;n++)e[y[n]]&&t.on(y[n],e[y[n]])}.bind(this),p={},h=t.css||{},f=t.scope||b;for(var m in g)p[m]=g[m];for(var m in h)p[m]=h[m];var v=t.inputFilterSelector||S;this.getInputFilterSelector=function(){return v},this.setInputFilterSelector=function(t){return v=t,this},this.draggable=function(e,n){var i=[];return k(e,function(e){if(e=F(e),null!=e)if(null==e._katavorioDrag){var a=u(n);e._katavorioDrag=new T(e,a,p,f),r(e._katavorioDrag,this._dragsByScope),i.push(e._katavorioDrag),t.addClass(e,a.selector?p.delegatedDraggable:p.draggable)}else d(e._katavorioDrag,n)}.bind(this)),i},this.droppable=function(e,n){var i=[];return k(e,function(e){if(e=F(e),null!=e){var a=new I(e,u(n),p,f);e._katavorioDrop=e._katavorioDrop||[],e._katavorioDrop.push(a),r(a,this._dropsByScope),i.push(a),t.addClass(e,p.droppable)}}.bind(this)),i},this.select=function(e){return k(e,(function(){var e=F(this);e&&e._katavorioDrag&&(s[e._katavorio]||(o.push(e._katavorioDrag),s[e._katavorio]=[e,o.length-1],t.addClass(e,p.selected)))})),this},this.deselect=function(e){return k(e,(function(){var e=F(this);if(e&&e._katavorio){var n=s[e._katavorio];if(n){for(var i=[],a=0;a<o.length;a++)o[a].el!==e&&i.push(o[a]);o=i,delete s[e._katavorio],t.removeClass(e,p.selected)}}})),this},this.deselectAll=function(){for(var e in s){var n=s[e];t.removeClass(n[0],p.selected)}o.length=0,s={}},this.markSelection=function(t){w(o,(function(t){t.mark()}),t)},this.markPosses=function(t){t.posses&&k(t.posses,(function(e){t.posseRoles[e]&&E[e]&&w(E[e].members,(function(t){t.mark()}),t)}))},this.unmarkSelection=function(t,e){w(o,(function(t){t.unmark(e)}),t)},this.unmarkPosses=function(t,e){t.posses&&k(t.posses,(function(n){t.posseRoles[n]&&E[n]&&w(E[n].members,(function(t){t.unmark(e,!0)}),t)}))},this.getSelection=function(){return o.slice(0)},this.updateSelection=function(t,e,n){w(o,(function(n){n.moveBy(t,e)}),n)};var x=function(t,e){e.posses&&k(e.posses,(function(n){e.posseRoles[n]&&E[n]&&w(E[n].members,(function(e){t(e)}),e)}))};this.updatePosses=function(t,e,n){x((function(n){n.moveBy(t,e)}),n)},this.notifyPosseDragStop=function(t,e){x((function(t){t.stop(e,!0)}),t)},this.notifySelectionDragStop=function(t,e){w(o,(function(t){t.stop(e,!0)}),t)},this.notifySelectionDragStart=function(t,e){w(o,(function(t){t.notifyStart(e)}),t)},this.setZoom=function(t){l=t},this.getZoom=function(){return l};var C=function(t,e,n,i){k(t,(function(t){c(t,n),t[i](e),r(t,n)}))};k(["set","add","remove","toggle"],function(t){this[t+"Scope"]=function(e,n){C(e._katavorioDrag,n,this._dragsByScope,t+"Scope"),C(e._katavorioDrop,n,this._dropsByScope,t+"Scope")}.bind(this),this[t+"DragScope"]=function(e,n){C(e.constructor===T?e:e._katavorioDrag,n,this._dragsByScope,t+"Scope")}.bind(this),this[t+"DropScope"]=function(e,n){C(e.constructor===I?e:e._katavorioDrop,n,this._dropsByScope,t+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(t,e){for(var n in this._dragsByScope)w(this._dragsByScope[n],(function(n){n.snap(t,e)}))},this.getDragsForScope=function(t){return this._dragsByScope[t]},this.getDropsForScope=function(t){return this._dropsByScope[t]};var D=function(t,e,n){if(t=F(t),t[e]){var i=o.indexOf(t[e]);i>=0&&o.splice(i,1),c(t[e],n)&&k(t[e],(function(t){t.destroy()})),delete t[e]}},P=function(t,e,n,i){t=F(t),t[e]&&t[e].off(n,i)};this.elementRemoved=function(t){this.destroyDraggable(t),this.destroyDroppable(t)},this.destroyDraggable=function(t,e,n){1===arguments.length?D(t,"_katavorioDrag",this._dragsByScope):P(t,"_katavorioDrag",e,n)},this.destroyDroppable=function(t,e,n){1===arguments.length?D(t,"_katavorioDrop",this._dropsByScope):P(t,"_katavorioDrop",e,n)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},o=[],s={},E={}};var E={},j=function(t,n,i){var o=a(n)?n:n.id,s=!!a(n)||!1!==n.active,l=E[o]||function(){var t={name:o,members:[]};return E[o]=t,t}();return k(t,(function(t){if(t._katavorioDrag){if(i&&null!=t._katavorioDrag.posseRoles[l.name])return;e(l.members,t._katavorioDrag),e(t._katavorioDrag.posses,l.name),t._katavorioDrag.posseRoles[l.name]=s}})),l};this.addToPosse=function(t,e){for(var n=[],i=1;i<arguments.length;i++)n.push(j(t,arguments[i]));return 1===n.length?n[0]:n},this.setPosse=function(t,e){for(var n=[],a=1;a<arguments.length;a++)n.push(j(t,arguments[a],!0).name);return k(t,function(t){if(t._katavorioDrag){var e=i(t._katavorioDrag.posses,n),a=[];Array.prototype.push.apply(a,t._katavorioDrag.posses);for(var o=0;o<e.length;o++)this.removeFromPosse(t,e[o])}}.bind(this)),1===n.length?n[0]:n},this.removeFromPosse=function(t,e){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var i=1;i<arguments.length;i++)e=arguments[i],k(t,(function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){var i=t._katavorioDrag;k(e,(function(t){n(E[t].members,i),n(i.posses,t),delete i.posseRoles[t]}))}}))},this.removeFromAllPosses=function(t){k(t,(function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){var e=t._katavorioDrag;k(e.posses,(function(t){n(E[t].members,e)})),e.posses.length=0,e.posseRoles={}}}))},this.setPosseState=function(t,e,n){var i=E[e];i&&k(t,(function(t){t._katavorioDrag&&t._katavorioDrag.posses&&(t._katavorioDrag.posseRoles[i.name]=n)}))}},t.Katavorio.version="1.0.0","undefined"!==typeof exports&&(exports.Katavorio=t.Katavorio)}.call("undefined"!==typeof window?window:void 0),function(){var t=this;t.jsPlumbUtil=t.jsPlumbUtil||{};var e=t.jsPlumbUtil;function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){return"[object Number]"===Object.prototype.toString.call(t)}function a(t){return"string"===typeof t}function o(t){return"boolean"===typeof t}function s(t){return null==t}function l(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function r(t){return"[object Date]"===Object.prototype.toString.call(t)}function c(t){return"[object Function]"===Object.prototype.toString.call(t)}function u(t){return c(t)&&null!=t.name&&t.name.length>0}function d(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function p(t){if(a(t))return""+t;if(o(t))return!!t;if(r(t))return new Date(t.getTime());if(c(t))return t;if(n(t)){for(var e=[],i=0;i<t.length;i++)e.push(p(t[i]));return e}if(l(t)){var s={};for(var u in t)s[u]=p(t[u]);return s}return t}function h(t,e,i,s){var r,c,u={},d={};for(i=i||[],s=s||[],c=0;c<i.length;c++)u[i[c]]=!0;for(c=0;c<s.length;c++)d[s[c]]=!0;var h=p(t);for(c in e)if(null==h[c]||d[c])h[c]=e[c];else if(a(e[c])||o(e[c]))u[c]?(r=[],r.push.apply(r,n(h[c])?h[c]:[h[c]]),r.push.apply(r,o(e[c])?e[c]:[e[c]]),h[c]=r):h[c]=e[c];else if(n(e[c]))r=[],n(h[c])&&r.push.apply(r,h[c]),r.push.apply(r,e[c]),h[c]=r;else if(l(e[c]))for(var f in l(h[c])||(h[c]={}),e[c])h[c][f]=e[c][f];return h}function f(t,e,n){if(null!=t){var i=t,a=i;return e.replace(/([^\.])+/g,(function(t,e,i,o){var s=t.match(/([^\[0-9]+){1}(\[)([0-9+])/),l=i+t.length>=o.length,r=function(){return a[s[1]]||function(){return a[s[1]]=[],a[s[1]]}()};if(l)s?r()[s[3]]=n:a[t]=n;else if(s){var c=r();a=c[s[3]]||function(){return c[s[3]]={},c[s[3]]}()}else a=a[t]||function(){return a[t]={},a[t]}();return""})),t}}function m(t,e,n){for(var i=0;i<n.length;i++){var a=n[i][0][n[i][1]].apply(n[i][0],n[i][2]);if(a===e)return a}return t}function v(t,e,i,o){var s=function(t){var n=t.match(/(\${.*?})/g);if(null!=n)for(var i=0;i<n.length;i++){var a=e[n[i].substring(2,n[i].length-1)]||"";null!=a&&(t=t.replace(n[i],a))}return t},r=function t(r){if(null!=r){if(a(r))return s(r);if(!c(r)||o||null!=i&&0!==(r.name||"").indexOf(i)){if(n(r)){for(var u=[],d=0;d<r.length;d++)u.push(t(r[d]));return u}if(l(r)){var p={};for(var h in r)p[h]=t(r[h]);return p}return r}return r(e)}};return r(t)}function g(t,e){if(t)for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}function b(t,e){var n=g(t,e);return n>-1&&t.splice(n,1),-1!==n}function y(t,e){var n=t.indexOf(e);return n>-1&&t.splice(n,1),-1!==n}function _(t,e,n){-1===g(t,n)&&t.push(e)}function x(t,e,n,i){var a=t[e];return null==a&&(a=[],t[e]=a),a[i?"unshift":"push"](n),a}function w(t,e,n){return-1===t.indexOf(e)&&(n?t.unshift(e):t.push(e),!0)}function C(t,e,i){var a;e=n(e)?e:[e];var o=function(e){var n=e.__proto__;while(null!=n)if(null!=n.prototype){for(var i in n.prototype)n.prototype.hasOwnProperty(i)&&!t.prototype.hasOwnProperty(i)&&(t.prototype[i]=n.prototype[i]);n=n.prototype.__proto__}else n=null};for(a=0;a<e.length;a++){for(var s in e[a].prototype)e[a].prototype.hasOwnProperty(s)&&!t.prototype.hasOwnProperty(s)&&(t.prototype[s]=e[a].prototype[s]);o(e[a])}var l=function(t,n){return function(){for(a=0;a<e.length;a++)e[a].prototype[t]&&e[a].prototype[t].apply(this,arguments);return n.apply(this,arguments)}},r=function(e){for(var n in e)t.prototype[n]=l(n,e[n])};if(arguments.length>2)for(a=2;a<arguments.length;a++)r(arguments[a]);return t}function k(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}))}function D(t){if(null==t)return null;var e=t.replace(/^\s\s*/,""),n=/\s/,i=e.length;while(n.test(e.charAt(--i)));return e.slice(0,i+1)}function S(t,e){t=null==t.length||"string"===typeof t?[t]:t;for(var n=0;n<t.length;n++)e(t[n])}function P(t,e){for(var n=[],i=0;i<t.length;i++)n.push(e(t[i]));return n}function E(t,e,n){n=n||"parent";var i=function(t){return t?e[t]:null},a=function(t){return t?i(t[n]):null},o=function t(e,n){if(null==e)return n;var i=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];"override"===n.mergeStrategy&&Array.prototype.push.apply(i,["events","overlays"]);var o=h(e,n,[],i);return t(a(e),o)},s=function t(e){if(null==e)return{};if("string"===typeof e)return i(e);if(e.length){var n=!1,a=0,o=void 0;while(!n&&a<e.length)o=t(e[a]),o?n=!0:a++;return o}},l=s(t);return l?o(a(l),l):{}}function j(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.logEnabled&&"undefined"!==typeof console)try{var i=arguments[arguments.length-1];console.log(i)}catch(a){}}function L(t,e,n){return function(){var i=null;try{null!=e&&(i=e.apply(this,arguments))}catch(a){j("jsPlumb function failed : "+a)}if(null!=t&&(null==n||i!==n))try{i=t.apply(this,arguments)}catch(a){j("wrapped function failed : "+a)}return i}}"undefined"!==typeof exports&&(exports.jsPlumbUtil=e),e.isArray=n,e.isNumber=i,e.isString=a,e.isBoolean=o,e.isNull=s,e.isObject=l,e.isDate=r,e.isFunction=c,e.isNamedFunction=u,e.isEmpty=d,e.clone=p,e.merge=h,e.replace=f,e.functionChain=m,e.populate=v,e.findWithFunction=g,e.removeWithFunction=b,e.remove=y,e.addWithFunction=_,e.addToList=x,e.suggest=w,e.extend=C,e.uuid=k,e.fastTrim=D,e.each=S,e.map=P,e.mergeWithParents=E,e.logEnabled=!0,e.log=j,e.wrap=L;var T=function(){function t(){var t=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(e,n,i){var a=function(e){x(t._listeners,e,n,i),n.__jsPlumb=n.__jsPlumb||{},n.__jsPlumb[k()]=e};if("string"===typeof e)a(e);else if(null!=e.length)for(var o=0;o<e.length;o++)a(e[o]);return t},this.fire=function(t,e,n){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var i=this._listeners[t].length,a=0,o=!1,s=null;if(!this.shouldFireEvent||this.shouldFireEvent(t,e,n))while(!o&&a<i&&!1!==s){if(this.eventsToDieOn[t])this._listeners[t][a].apply(this,[e,n]);else try{s=this._listeners[t][a].apply(this,[e,n])}catch(l){j("jsPlumb: fire failed for event "+t+" : "+l)}a++,null!=this._listeners&&null!=this._listeners[t]||(o=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var e=t.queue.pop();e&&t.fire.apply(t,e)},this.unbind=function(t,e){if(0===arguments.length)this._listeners={};else if(1===arguments.length){if("string"===typeof t)delete this._listeners[t];else if(t.__jsPlumb){var n=void 0;for(var i in t.__jsPlumb)n=t.__jsPlumb[i],y(this._listeners[n]||[],t)}}else 2===arguments.length&&y(this._listeners[t]||[],e);return this},this.getListener=function(e){return t._listeners[e]},this.setSuspendEvents=function(e){t.eventsSuspended=e},this.isSuspendEvents=function(){return t.eventsSuspended},this.silently=function(e){t.setSuspendEvents(!0);try{e()}catch(n){j("Cannot execute silent function "+n)}t.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var e in t._listeners)t._listeners[e]=null}}return t}();e.EventGenerator=T}.call("undefined"!==typeof window?window:void 0),function(){var t=this;t.jsPlumbUtil.matchesSelector=function(t,e,n){n=n||t.parentNode;for(var i=n.querySelectorAll(e),a=0;a<i.length;a++)if(i[a]===t)return!0;return!1},t.jsPlumbUtil.consume=function(t,e){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!e&&t.preventDefault&&t.preventDefault()},t.jsPlumbUtil.sizeElement=function(t,e,n,i,a){t&&(t.style.height=a+"px",t.height=a,t.style.width=i+"px",t.width=i,t.style.left=e+"px",t.style.top=n+"px")}}.call("undefined"!==typeof window?window:void 0),function(){var t={deriveAnchor:function(t,e,n,i){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[t][e]}},e=this,n=function(t){this.count=0,this.instance=t,this.lists={},this.instance.addList=function(t,e){return this.listManager.addList(t,e)},this.instance.removeList=function(t){this.listManager.removeList(t)},this.instance.bind("manageElement",function(t){for(var e=this.instance.getSelector(t.el,"[jtk-scrollable-list]"),n=0;n<e.length;n++)this.addList(e[n])}.bind(this)),this.instance.bind("unmanageElement",(function(t){this.removeList(t.el)})),this.instance.bind("connection",function(t,e){null==e&&(this._maybeUpdateParentList(t.source),this._maybeUpdateParentList(t.target))}.bind(this))};e.jsPlumbListManager=n,n.prototype={addList:function(e,n){var a=this.instance.extend({},t);n=this.instance.extend(a,n||{});var o=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[o]=new i(this.instance,e,n,o)},removeList:function(t){var e=this.lists[t._jsPlumbList];e&&(e.destroy(),delete this.lists[t._jsPlumbList])},_maybeUpdateParentList:function(t){var e=t.parentNode,n=this.instance.getContainer();while(null!=e&&e!==n){if(null!=e._jsPlumbList&&null!=this.lists[e._jsPlumbList])return void e._jsPlumbScrollHandler();e=e.parentNode}}};var i=function(t,e,n,i){function a(t,e,i,a){return n.anchor?n.anchor:n.deriveAnchor(t,e,i,a)}function o(t,e,i,a){return n.deriveEndpoint?n.deriveEndpoint(t,e,i,a):n.endpoint?n.endpoint:i.type}function s(e){var n=e.parentNode,i=t.getContainer();while(null!=n&&n!==i){if(t.hasClass(n,"jtk-managed"))return void t.recalculateOffsets(n);n=n.parentNode}}e["_jsPlumbList"]=i;var l=function(n){for(var i=t.getSelector(e,".jtk-managed"),l=t.getId(e),r=0;r<i.length;r++){if(i[r].offsetTop<e.scrollTop)i[r]._jsPlumbProxies||(i[r]._jsPlumbProxies=i[r]._jsPlumbProxies||[],t.select({source:i[r]}).each((function(n){t.proxyConnection(n,0,e,l,(function(){return o("top",0,n.endpoints[0],n)}),(function(){return a("top",0,n.endpoints[0],n)})),i[r]._jsPlumbProxies.push([n,0])})),t.select({target:i[r]}).each((function(n){t.proxyConnection(n,1,e,l,(function(){return o("top",1,n.endpoints[1],n)}),(function(){return a("top",1,n.endpoints[1],n)})),i[r]._jsPlumbProxies.push([n,1])})));else if(i[r].offsetTop>e.scrollTop+e.offsetHeight)i[r]._jsPlumbProxies||(i[r]._jsPlumbProxies=i[r]._jsPlumbProxies||[],t.select({source:i[r]}).each((function(n){t.proxyConnection(n,0,e,l,(function(){return o("bottom",0,n.endpoints[0],n)}),(function(){return a("bottom",0,n.endpoints[0],n)})),i[r]._jsPlumbProxies.push([n,0])})),t.select({target:i[r]}).each((function(n){t.proxyConnection(n,1,e,l,(function(){return o("bottom",1,n.endpoints[1],n)}),(function(){return a("bottom",1,n.endpoints[1],n)})),i[r]._jsPlumbProxies.push([n,1])})));else if(i[r]._jsPlumbProxies){for(var c=0;c<i[r]._jsPlumbProxies.length;c++)t.unproxyConnection(i[r]._jsPlumbProxies[c][0],i[r]._jsPlumbProxies[c][1],l);delete i[r]._jsPlumbProxies}t.revalidate(i[r])}s(e)};t.setAttribute(e,"jtk-scrollable-list","true"),e._jsPlumbScrollHandler=l,t.on(e,"scroll",l),l(),this.destroy=function(){t.off(e,"scroll",l),delete e._jsPlumbScrollHandler;for(var n=t.getSelector(e,".jtk-managed"),i=t.getId(e),a=0;a<n.length;a++)if(n[a]._jsPlumbProxies){for(var o=0;o<n[a]._jsPlumbProxies.length;o++)t.unproxyConnection(n[a]._jsPlumbProxies[o][0],n[a]._jsPlumbProxies[o][1],i);delete n[a]._jsPlumbProxies}}}}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumbUtil,n=function(){return""+(new Date).getTime()},a=function(t){if(t._jsPlumb.paintStyle&&t._jsPlumb.hoverPaintStyle){var e={};m.extend(e,t._jsPlumb.paintStyle),m.extend(e,t._jsPlumb.hoverPaintStyle),delete t._jsPlumb.hoverPaintStyle,e.gradient&&t._jsPlumb.paintStyle.fill&&delete e.gradient,t._jsPlumb.hoverPaintStyle=e}},o=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],s=function(t,e,n,i){var a=t.getAttachedElements();if(a)for(var o=0,s=a.length;o<s;o++)i&&i===a[o]||a[o].setHover(e,!0,n)},l=function(t){return null==t?null:t.split(" ")},r=function(t,e,n){for(var i in e)t[i]=n},c=function(t,n,i){if(t.getDefaultType){var a=t.getTypeDescriptor(),o={},s=t.getDefaultType(),l=e.merge({},s);r(o,s,"__default");for(var c=0,u=t._jsPlumb.types.length;c<u;c++){var d=t._jsPlumb.types[c];if("__default"!==d){var p=t._jsPlumb.instance.getType(d,a);if(null!=p){var h=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],f=[];"override"===p.mergeStrategy?Array.prototype.push.apply(h,["events","overlays","cssClass"]):f.push("cssClass"),l=e.merge(l,p,f,h),r(o,p,d)}}}n&&(l=e.populate(l,n,"_")),t.applyType(l,i,o),i||t.repaint()}},u=t.jsPlumbUIComponent=function(t){e.EventGenerator.apply(this,arguments);var n=this,i=arguments,a=n.idPrefix,o=a+(new Date).getTime();this._jsPlumb={instance:t._jsPlumb,parameters:t.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:t.beforeDetach,beforeDrop:t.beforeDrop,overlayPlacements:[],hoverClass:t.hoverClass||t._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(t,e,n){this._jsPlumb.typeCache[n]=this._jsPlumb.typeCache[n]||{},this._jsPlumb.typeCache[n][t]=e},this.getCachedTypeItem=function(t,e){return this._jsPlumb.typeCache[e]?this._jsPlumb.typeCache[e][t]:null},this.getId=function(){return o};var s=t.overlays||[],l={};if(this.defaultOverlayKeys){for(var r=0;r<this.defaultOverlayKeys.length;r++)Array.prototype.push.apply(s,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[r]]||[]);for(r=0;r<s.length;r++){var c=m.convertToFullOverlaySpec(s[r]);l[c[1].id]=c}}var u={overlays:l,parameters:t.parameters||{},scope:t.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return u},this.appendToDefaultType=function(t){for(var e in t)u[e]=t[e]},t.events)for(var d in t.events)n.bind(d,t.events[d]);this.clone=function(){var t=Object.create(this.constructor.prototype);return this.constructor.apply(t,i),t}.bind(this),this.isDetachAllowed=function(t){var n=!0;if(this._jsPlumb.beforeDetach)try{n=this._jsPlumb.beforeDetach(t)}catch(i){e.log("jsPlumb: beforeDetach callback failed",i)}return n},this.isDropAllowed=function(t,n,i,a,o,s,l){var r=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:t,targetId:n,scope:i,connection:a,dropEndpoint:o,source:s,target:l});if(this._jsPlumb.beforeDrop)try{r=this._jsPlumb.beforeDrop({sourceId:t,targetId:n,scope:i,connection:a,dropEndpoint:o,source:s,target:l})}catch(c){e.log("jsPlumb: beforeDrop callback failed",c)}return r};var p=[];this.setListenerComponent=function(t){for(var e=0;e<p.length;e++)p[e][3]=t}},d=function(t,e){var n=t._jsPlumb.types[e],i=t._jsPlumb.instance.getType(n,t.getTypeDescriptor());null!=i&&i.cssClass&&t.canvas&&t._jsPlumb.instance.removeClass(t.canvas,i.cssClass)};e.extend(t.jsPlumbUIComponent,e.EventGenerator,{getParameter:function(t){return this._jsPlumb.parameters[t]},setParameter:function(t,e){this._jsPlumb.parameters[t]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(t){this._jsPlumb.parameters=t},getClass:function(){return m.getClass(this.canvas)},hasClass:function(t){return m.hasClass(this.canvas,t)},addClass:function(t){m.addClass(this.canvas,t)},removeClass:function(t){m.removeClass(this.canvas,t)},updateClasses:function(t,e){m.updateClasses(this.canvas,t,e)},setType:function(t,e,n){this.clearTypes(),this._jsPlumb.types=l(t)||[],c(this,e,n)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(t,e){c(this,t,e)},hasType:function(t){return-1!==this._jsPlumb.types.indexOf(t)},addType:function(t,e,n){var i=l(t),a=!1;if(null!=i){for(var o=0,s=i.length;o<s;o++)this.hasType(i[o])||(this._jsPlumb.types.push(i[o]),a=!0);a&&c(this,e,n)}},removeType:function(t,e,n){var i=l(t),a=!1,o=function(t){var e=this._jsPlumb.types.indexOf(t);return-1!==e&&(d(this,e),this._jsPlumb.types.splice(e,1),!0)}.bind(this);if(null!=i){for(var s=0,r=i.length;s<r;s++)a=o(i[s])||a;a&&c(this,e,n)}},clearTypes:function(t,e){for(var n=this._jsPlumb.types.length,i=0;i<n;i++)d(this,0),this._jsPlumb.types.splice(0,1);c(this,t,e)},toggleType:function(t,e,n){var i=l(t);if(null!=i){for(var a=0,o=i.length;a<o;a++){var s=this._jsPlumb.types.indexOf(i[a]);-1!==s?(d(this,s),this._jsPlumb.types.splice(s,1)):this._jsPlumb.types.push(i[a])}c(this,e,n)}},applyType:function(t,e){if(this.setPaintStyle(t.paintStyle,e),this.setHoverPaintStyle(t.hoverPaintStyle,e),t.parameters)for(var n in t.parameters)this.setParameter(n,t.parameters[n]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(t,e){this._jsPlumb.paintStyle=t,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,a(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(t,e){this._jsPlumb.hoverPaintStyle=t,a(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(t){(t||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(t,e,i){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=t;var a=t?"addClass":"removeClass";null!=this.canvas&&(null!=this._jsPlumb.instance.hoverClass&&this._jsPlumb.instance[a](this.canvas,this._jsPlumb.instance.hoverClass),null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[a](this.canvas,this._jsPlumb.hoverClass)),null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=t?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(i=i||n(),this.repaint({timestamp:i,recalc:!1}))),this.getAttachedElements&&!e&&s(this,t,n(),this)}}});var p=0,h=function(){var t=p+1;return p++,t},f=t.jsPlumbInstance=function(a){this.version="2.12.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},a&&m.extend(this.Defaults,a),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},e.EventGenerator.apply(this);var s=this,l=h(),r=s.bind,c={},d=1,p=function(t){if(null==t)return null;if(3===t.nodeType||8===t.nodeType)return{el:t,text:!0};var n=s.getElement(t);return{el:n,id:e.isString(t)&&null==n?t:H(n)}};for(var f in this.getInstanceIndex=function(){return l},this.setZoom=function(t,e){return d=t,s.fire("zoom",d),e&&s.repaintEverything(),!0},this.getZoom=function(){return d},this.Defaults)c[f]=this.Defaults[f];var v,g=[];this.unbindContainer=function(){if(null!=v&&g.length>0)for(var t=0;t<g.length;t++)s.off(v,g[t][0],g[t][1])},this.setContainer=function(t){this.unbindContainer(),t=this.getElement(t),this.select().each((function(e){e.moveParent(t)})),this.selectEndpoints().each((function(e){e.moveParent(t)}));var e=v;v=t,g.length=0;for(var n={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},i=function(t,e,i){var a=e.srcElement||e.target,o=(a&&a.parentNode?a.parentNode._jsPlumb:null)||(a?a._jsPlumb:null)||(a&&a.parentNode&&a.parentNode.parentNode?a.parentNode.parentNode._jsPlumb:null);if(o){o.fire(t,o,e);var l=i&&n[i+t]||t;s.fire(l,o.component||o,e)}},a=function(t,e,n){g.push([t,n]),s.on(v,t,e,n)},l=function(t){a(t,".jtk-connector",(function(e){i(t,e)})),a(t,".jtk-endpoint",(function(e){i(t,e,"endpoint")})),a(t,".jtk-overlay",(function(e){i(t,e)}))},r=0;r<o.length;r++)l(o[r]);for(var c in C){var u=C[c].el;u.parentNode===e&&(e.removeChild(u),v.appendChild(u))}},this.getContainer=function(){return v},this.bind=function(t,e){"ready"===t&&y?e():r.apply(s,[t,e])},s.importDefaults=function(t){for(var e in t)s.Defaults[e]=t[e];return t.Container&&s.setContainer(t.Container),s},s.restoreDefaults=function(){return s.Defaults=m.extend({},c),s};var b=null,y=!1,_=[],x={},w={},C={},k={},D={},S=!1,P=[],E=!1,j=null,L=this.Defaults.Scope,T=1,I=function(){return""+T++},O=function(t,e){v?v.appendChild(t):e?this.getElement(e).appendChild(t):this.appendToRoot(t)}.bind(this),$=function(t,e,i,a){if(!E){var o,l=H(t),r=s.getDragManager();r&&(o=r.getElementsForDraggable(l)),null==i&&(i=n());var c=mt({elId:l,offset:e,recalc:!1,timestamp:i});if(o&&c&&c.o)for(var u in o)mt({elId:o[u].id,offset:{left:c.o.left+o[u].offset.left,top:c.o.top+o[u].offset.top},recalc:!1,timestamp:i});if(s.anchorManager.redraw(l,e,i,null,a),o)for(var d in o)s.anchorManager.redraw(o[d].id,e,i,o[d].offset,a,!0)}},F=function(t){return w[t]},A=function(t,e){for(var n=t.scope.split(/\s/),i=e.scope.split(/\s/),a=0;a<n.length;a++)for(var o=0;o<i.length;o++)if(i[o]===n[a])return!0;return!1},M=function(t,e){var n=m.extend({},t);for(var i in e)e[i]&&(n[i]=e[i]);return n},N=function(t,n){var i=m.extend({},t);if(n&&m.extend(i,n),i.source&&(i.source.endpoint?i.sourceEndpoint=i.source:i.source=s.getElement(i.source)),i.target&&(i.target.endpoint?i.targetEndpoint=i.target:i.target=s.getElement(i.target)),t.uuids&&(i.sourceEndpoint=F(t.uuids[0]),i.targetEndpoint=F(t.uuids[1])),i.sourceEndpoint&&i.sourceEndpoint.isFull())e.log(s,"could not add connection; source endpoint is full");else if(i.targetEndpoint&&i.targetEndpoint.isFull())e.log(s,"could not add connection; target endpoint is full");else{if(!i.type&&i.sourceEndpoint&&(i.type=i.sourceEndpoint.connectionType),i.sourceEndpoint&&i.sourceEndpoint.connectorOverlays){i.overlays=i.overlays||[];for(var a=0,o=i.sourceEndpoint.connectorOverlays.length;a<o;a++)i.overlays.push(i.sourceEndpoint.connectorOverlays[a])}i.sourceEndpoint&&i.sourceEndpoint.scope&&(i.scope=i.sourceEndpoint.scope),!i["pointer-events"]&&i.sourceEndpoint&&i.sourceEndpoint.connectorPointerEvents&&(i["pointer-events"]=i.sourceEndpoint.connectorPointerEvents);var l=function(t,e,n){var a=M(e,{anchor:i.anchors?i.anchors[n]:i.anchor,endpoint:i.endpoints?i.endpoints[n]:i.endpoint,paintStyle:i.endpointStyles?i.endpointStyles[n]:i.endpointStyle,hoverPaintStyle:i.endpointHoverStyles?i.endpointHoverStyles[n]:i.endpointHoverStyle});return s.addEndpoint(t,a)},r=function(t,e,n,a){if(i[t]&&!i[t].endpoint&&!i[t+"Endpoint"]&&!i.newConnection){var o=H(i[t]),s=n[o];if(s=s?s[a]:null,s){if(!s.enabled)return!1;var r=m.extend({},s.def);delete r.label;var c=null!=s.endpoint&&s.endpoint._jsPlumb?s.endpoint:l(i[t],r,e);if(c.isFull())return!1;i[t+"Endpoint"]=c,!i.scope&&r.scope&&(i.scope=r.scope),s.uniqueEndpoint?s.endpoint?c.finalEndpoint=s.endpoint:(s.endpoint=c,c.setDeleteOnEmpty(!1)):c.setDeleteOnEmpty(!0),0===e&&s.def.connectorOverlays&&(i.overlays=i.overlays||[],Array.prototype.push.apply(i.overlays,s.def.connectorOverlays))}}};if(!1!==r("source",0,this.sourceEndpointDefinitions,i.type||"default")&&!1!==r("target",1,this.targetEndpointDefinitions,i.type||"default"))return i.sourceEndpoint&&i.targetEndpoint&&(A(i.sourceEndpoint,i.targetEndpoint)||(i=null)),i}}.bind(s),R=function t(e){var n=s.Defaults.ConnectionType||s.getDefaultConnectionType();e._jsPlumb=s,e.newConnection=t,e.newEndpoint=B,e.endpointsByUUID=w,e.endpointsByElement=x,e.finaliseConnection=z,e.id="con_"+I();var i=new n(e);return i.isDetachable()&&(i.endpoints[0].initDraggable("_jsPlumbSource"),i.endpoints[1].initDraggable("_jsPlumbTarget")),i},z=s.finaliseConnection=function(t,e,n,i){if(e=e||{},t.suspendedEndpoint||_.push(t),t.pending=null,t.endpoints[0].isTemporarySource=!1,!1!==i&&s.anchorManager.newConnection(t),$(t.source),!e.doNotFireConnectionEvent&&!1!==e.fireEvent){var a={connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]};s.fire("connection",a,n)}},B=function t(e,n){var i=s.Defaults.EndpointType||m.Endpoint,a=m.extend({},e);a._jsPlumb=s,a.newConnection=R,a.newEndpoint=t,a.endpointsByUUID=w,a.endpointsByElement=x,a.fireDetachEvent=X,a.elementId=n||H(a.source);var o=new i(a);return o.id="ep_"+I(),ft(a.elementId,a.source),m.headless||s.getDragManager().endpointAdded(a.source,n),o},U=function(t,e,n){var i=x[t];if(i&&i.length)for(var a=0,o=i.length;a<o;a++){for(var s=0,l=i[a].connections.length;s<l;s++){var r=e(i[a].connections[s]);if(r)return}n&&n(i[a])}},V=function(t,e,n){e="block"===e;var i=null;n&&(i=function(t){t.setVisible(e,!0,!0)});var a=p(t);U(a.id,(function(t){if(e&&n){var i=t.sourceId===a.id?1:0;t.endpoints[i].isVisible()&&t.setVisible(!0)}else t.setVisible(e)}),i)},Q=function(t,e){var n=null;e&&(n=function(t){var e=t.isVisible();t.setVisible(!e)}),U(t,(function(t){var e=t.isVisible();t.setVisible(!e)}),n)},G=function(t){var e=k[t];return e?{o:e,s:P[t]}:mt({elId:t})},H=function(t,n,i){if(e.isString(t))return t;if(null==t)return null;var a=s.getAttribute(t,"id");return a&&"undefined"!==a||(2===arguments.length&&void 0!==arguments[1]?a=n:(1===arguments.length||3===arguments.length&&!arguments[2])&&(a="jsPlumb_"+l+"_"+I()),i||s.setAttribute(t,"id",a)),a};this.setConnectionBeingDragged=function(t){S=t},this.isConnectionBeingDragged=function(){return S},this.getManagedElements=function(){return C},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(t,n,i){i=i||{};var a=m.extend({},i);m.extend(a,n),a.endpoint=a.endpoint||s.Defaults.Endpoint,a.paintStyle=a.paintStyle||s.Defaults.EndpointStyle;for(var o=[],l=e.isArray(t)||null!=t.length&&!e.isString(t)?t:[t],r=0,c=l.length;r<c;r++){a.source=s.getElement(l[r]),pt(a.source);var u=H(a.source),d=B(a,u),p=ft(u,a.source).info.o;e.addToList(x,u,d),E||d.paint({anchorLoc:d.anchor.compute({xy:[p.left,p.top],wh:P[u],element:d,timestamp:j}),timestamp:j}),o.push(d)}return 1===o.length?o[0]:o},this.addEndpoints=function(t,n,i){for(var a=[],o=0,l=n.length;o<l;o++){var r=s.addEndpoint(t,n[o],i);e.isArray(r)?Array.prototype.push.apply(a,r):a.push(r)}return a},this.animate=function(t,n,i){if(!this.animationSupported)return!1;i=i||{};var a=s.getElement(t),o=H(a),l=m.animEvents.step,r=m.animEvents.complete;i[l]=e.wrap(i[l],(function(){s.revalidate(o)})),i[r]=e.wrap(i[r],(function(){s.revalidate(o)})),s.doAnimate(a,n,i)},this.checkCondition=function(t,n){var i=s.getListener(t),a=!0;if(i&&i.length>0){var o=Array.prototype.slice.call(arguments,1);try{for(var l=0,r=i.length;l<r;l++)a=a&&i[l].apply(i[l],o)}catch(c){e.log(s,"cannot check condition ["+t+"]"+c)}}return a},this.connect=function(t,n){var i,a=N(t,n);if(a){if(null==a.source&&null==a.sourceEndpoint)return void e.log("Cannot establish connection - source does not exist");if(null==a.target&&null==a.targetEndpoint)return void e.log("Cannot establish connection - target does not exist");pt(a.source),i=R(a),z(i,a)}return i};var q=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],W=function(t,e,n,i){var a,o,s,l=q[n],r=t[l.elId],c=(t[l.el],t.endpoints[n]),u={index:n,originalSourceId:0===n?r:t.sourceId,newSourceId:t.sourceId,originalTargetId:1===n?r:t.targetId,newTargetId:t.targetId,connection:t};if(e.constructor===m.Endpoint)a=e,a.addConnection(t),e=a.element;else if(o=H(e),s=this[l.epDefs][o],o===t[l.elId])a=null;else if(s)for(var d in s){if(!s[d].enabled)return;a=null!=s[d].endpoint&&s[d].endpoint._jsPlumb?s[d].endpoint:this.addEndpoint(e,s[d].def),s[d].uniqueEndpoint&&(s[d].endpoint=a),a.addConnection(t)}else a=t.makeEndpoint(0===n,e,o);return null!=a&&(c.detachFromConnection(t),t.endpoints[n]=a,t[l.el]=a.element,t[l.elId]=a.elementId,u[0===n?"newSourceId":"newTargetId"]=a.elementId,Y(u),i||t.repaint()),u.element=e,u}.bind(this);this.setSource=function(t,e,n){var i=W(t,e,0,n);this.anchorManager.sourceChanged(i.originalSourceId,i.newSourceId,t,i.el)},this.setTarget=function(t,e,n){var i=W(t,e,1,n);this.anchorManager.updateOtherEndpoint(i.originalSourceId,i.originalTargetId,i.newTargetId,t)},this.deleteEndpoint=function(t,e,n){var i="string"===typeof t?w[t]:t;return i&&s.deleteObject({endpoint:i,dontUpdateHover:e,deleteAttachedObjects:n}),s},this.deleteEveryEndpoint=function(){var t=s.setSuspendDrawing(!0);for(var e in x){var n=x[e];if(n&&n.length)for(var i=0,a=n.length;i<a;i++)s.deleteEndpoint(n[i],!0)}x={},C={},w={},k={},D={},s.anchorManager.reset();var o=s.getDragManager();return o&&o.reset(),t||s.setSuspendDrawing(!1),s};var X=function(t,e,n){var i=s.Defaults.ConnectionType||s.getDefaultConnectionType(),a=t.constructor===i,o=a?{connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]}:t;e&&s.fire("connectionDetached",o,n),s.fire("internal.connectionDetached",o,n),s.anchorManager.connectionDetached(o)},Y=s.fireMoveEvent=function(t,e){s.fire("connectionMoved",t,e)};this.unregisterEndpoint=function(t){for(var e in t._jsPlumb.uuid&&(w[t._jsPlumb.uuid]=null),s.anchorManager.deleteEndpoint(t),x){var n=x[e];if(n){for(var i=[],a=0,o=n.length;a<o;a++)n[a]!==t&&i.push(n[a]);x[e]=i}x[e].length<1&&delete x[e]}};var J="isDetachAllowed",K="beforeDetach",Z="checkCondition";this.deleteConnection=function(t,n){return!(null==t||(n=n||{},!n.force&&!e.functionChain(!0,!1,[[t.endpoints[0],J,[t]],[t.endpoints[1],J,[t]],[t,J,[t]],[s,Z,[K,t]]])))&&(t.setHover(!1),X(t,!t.pending&&!1!==n.fireEvent,n.originalEvent),t.endpoints[0].detachFromConnection(t),t.endpoints[1].detachFromConnection(t),e.removeWithFunction(_,(function(e){return t.id===e.id})),t.cleanup(),t.destroy(),!0)},this.deleteEveryConnection=function(t){t=t||{};var e=_.length,n=0;return s.batch((function(){for(var i=0;i<e;i++)n+=s.deleteConnection(_[0],t)?1:0})),n},this.deleteConnectionsForElement=function(t,e){e=e||{},t=s.getElement(t);var n=H(t),i=x[n];if(i&&i.length)for(var a=0,o=i.length;a<o;a++)i[a].deleteEveryConnection(e);return s},this.deleteObject=function(t){var n={endpoints:{},connections:{},endpointCount:0,connectionCount:0},i=!1!==t.deleteAttachedObjects,a=function(e){null!=e&&null==n.connections[e.id]&&(t.dontUpdateHover||null==e._jsPlumb||e.setHover(!1),n.connections[e.id]=e,n.connectionCount++)},o=function(e){if(null!=e&&null==n.endpoints[e.id]&&(t.dontUpdateHover||null==e._jsPlumb||e.setHover(!1),n.endpoints[e.id]=e,n.endpointCount++,i))for(var o=0;o<e.connections.length;o++){var s=e.connections[o];a(s)}};for(var l in t.connection?a(t.connection):o(t.endpoint),n.connections){var r=n.connections[l];if(r._jsPlumb){e.removeWithFunction(_,(function(t){return r.id===t.id})),X(r,!1!==t.fireEvent&&!r.pending,t.originalEvent);var c=null==t.deleteAttachedObjects?null:!t.deleteAttachedObjects;r.endpoints[0].detachFromConnection(r,null,c),r.endpoints[1].detachFromConnection(r,null,c),r.cleanup(!0),r.destroy(!0)}}for(var u in n.endpoints){var d=n.endpoints[u];d._jsPlumb&&(s.unregisterEndpoint(d),d.cleanup(!0),d.destroy(!0))}return n};var tt=function(t,e,n,i){for(var a=0,o=t.length;a<o;a++)t[a][e].apply(t[a],n);return i(t)},et=function(t,e,n){for(var i=[],a=0,o=t.length;a<o;a++)i.push([t[a][e].apply(t[a],n),t[a]]);return i},nt=function(t,e,n){return function(){return tt(t,e,arguments,n)}},it=function(t,e){return function(){return et(t,e,arguments)}},at=function(t,e){var n=[];if(t)if("string"===typeof t){if("*"===t)return t;n.push(t)}else if(e)n=t;else if(t.length)for(var i=0,a=t.length;i<a;i++)n.push(p(t[i]).id);else n.push(p(t).id);return n},ot=function(t,e,n){return"*"===t||(t.length>0?-1!==t.indexOf(e):!n)};this.getConnections=function(t,e){t?t.constructor===String&&(t={scope:t}):t={};for(var n=t.scope||s.getDefaultScope(),i=at(n,!0),a=at(t.source),o=at(t.target),l=!e&&i.length>1?{}:[],r=function(t,n){if(!e&&i.length>1){var a=l[t];null==a&&(a=l[t]=[]),a.push(n)}else l.push(n)},c=0,u=_.length;c<u;c++){var d=_[c],p=d.proxies&&d.proxies[0]?d.proxies[0].originalEp.elementId:d.sourceId,h=d.proxies&&d.proxies[1]?d.proxies[1].originalEp.elementId:d.targetId;ot(i,d.scope)&&ot(a,p)&&ot(o,h)&&r(d.scope,d)}return l};var st=function(t,e){return function(n){for(var i=0,a=t.length;i<a;i++)n(t[i]);return e(t)}},lt=function(t){return function(e){return t[e]}},rt=function(t,e){var n,i,a={length:t.length,each:st(t,e),get:lt(t)},o=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],s=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(n=0,i=o.length;n<i;n++)a[o[n]]=nt(t,o[n],e);for(n=0,i=s.length;n<i;n++)a[s[n]]=it(t,s[n]);return a},ct=function t(e){var n=rt(e,t);return m.extend(n,{setDetachable:nt(e,"setDetachable",t),setReattach:nt(e,"setReattach",t),setConnector:nt(e,"setConnector",t),delete:function(){for(var t=0,n=e.length;t<n;t++)s.deleteConnection(e[t])},isDetachable:it(e,"isDetachable"),isReattach:it(e,"isReattach")})},ut=function t(e){var n=rt(e,t);return m.extend(n,{setEnabled:nt(e,"setEnabled",t),setAnchor:nt(e,"setAnchor",t),isEnabled:it(e,"isEnabled"),deleteEveryConnection:function(){for(var t=0,n=e.length;t<n;t++)e[t].deleteEveryConnection()},delete:function(){for(var t=0,n=e.length;t<n;t++)s.deleteEndpoint(e[t])}})};this.select=function(t){return t=t||{},t.scope=t.scope||"*",ct(t.connections||s.getConnections(t,!0))},this.selectEndpoints=function(t){t=t||{},t.scope=t.scope||"*";var e=!t.element&&!t.source&&!t.target,n=e?"*":at(t.element),i=e?"*":at(t.source),a=e?"*":at(t.target),o=at(t.scope,!0),s=[];for(var l in x){var r=ot(n,l,!0),c=ot(i,l,!0),u="*"!==i,d=ot(a,l,!0),p="*"!==a;if(r||c||d)t:for(var h=0,f=x[l].length;h<f;h++){var m=x[l][h];if(ot(o,m.scope,!0)){var v=u&&i.length>0&&!m.isSource,g=p&&a.length>0&&!m.isTarget;if(v||g)continue t;s.push(m)}}}return ut(s)},this.getAllConnections=function(){return _},this.getDefaultScope=function(){return L},this.getEndpoint=F,this.getEndpoints=function(t){return x[p(t).id]||[]},this.getDefaultEndpointType=function(){return m.Endpoint},this.getDefaultConnectionType=function(){return m.Connection},this.getId=H,this.draw=$,this.info=p,this.appendElement=O;var dt=!1;this.isHoverSuspended=function(){return dt},this.setHoverSuspended=function(t){dt=t},this.hide=function(t,e){return V(t,"none",e),s},this.idstamp=I;var pt=function(t){if(!v&&t){var e=s.getElement(t);e.offsetParent&&s.setContainer(e.offsetParent)}},ht=function(){s.Defaults.Container&&s.setContainer(s.Defaults.Container)},ft=s.manage=function(t,e,n){return C[t]||(C[t]={el:e,endpoints:[],connections:[]},C[t].info=mt({elId:t,timestamp:j}),s.addClass(e,"jtk-managed"),n||s.fire("manageElement",{id:t,info:C[t].info,el:e})),C[t]},mt=(s.unmanage=function(t){if(C[t]){var e=C[t].el;s.removeClass(e,"jtk-managed"),delete C[t],s.fire("unmanageElement",{id:t,el:e})}},function(t){var e,n=t.timestamp,i=t.recalc,a=t.offset,o=t.elId;return E&&!n&&(n=j),!i&&n&&n===D[o]?{o:t.offset||k[o],s:P[o]}:(i||!a&&null==k[o]?(e=C[o]?C[o].el:null,null!=e&&(P[o]=s.getSize(e),k[o]=s.getOffset(e),D[o]=n)):(k[o]=a||k[o],null==P[o]&&(e=C[o].el,null!=e&&(P[o]=s.getSize(e))),D[o]=n),k[o]&&!k[o].right&&(k[o].right=k[o].left+P[o][0],k[o].bottom=k[o].top+P[o][1],k[o].width=P[o][0],k[o].height=P[o][1],k[o].centerx=k[o].left+k[o].width/2,k[o].centery=k[o].top+k[o].height/2),{o:k[o],s:P[o]})});this.updateOffset=mt,this.init=function(){y||(ht(),s.anchorManager=new t.jsPlumb.AnchorManager({jsPlumbInstance:s}),y=!0,s.fire("ready",s))}.bind(this),this.log=b,this.jsPlumbUIComponent=u,this.makeAnchor=function(){var n,i=function(e,n){if(t.jsPlumb.Anchors[e])return new t.jsPlumb.Anchors[e](n);if(!s.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+e+"'"}};if(0===arguments.length)return null;var a=arguments[0],o=arguments[1],l=null;if(a.compute&&a.getOrientation)return a;if("string"===typeof a)l=i(arguments[0],{elementId:o,jsPlumbInstance:s});else if(e.isArray(a))if(e.isArray(a[0])||e.isString(a[0]))2===a.length&&e.isObject(a[1])?e.isString(a[0])?(n=t.jsPlumb.extend({elementId:o,jsPlumbInstance:s},a[1]),l=i(a[0],n)):(n=t.jsPlumb.extend({elementId:o,jsPlumbInstance:s,anchors:a[0]},a[1]),l=new t.jsPlumb.DynamicAnchor(n)):l=new m.DynamicAnchor({anchors:a,selector:null,elementId:o,jsPlumbInstance:s});else{var r={x:a[0],y:a[1],orientation:a.length>=4?[a[2],a[3]]:[0,0],offsets:a.length>=6?[a[4],a[5]]:[0,0],elementId:o,jsPlumbInstance:s,cssClass:7===a.length?a[6]:null};l=new t.jsPlumb.Anchor(r),l.clone=function(){return new t.jsPlumb.Anchor(r)}}return l.id||(l.id="anchor_"+I()),l},this.makeAnchors=function(n,i,a){for(var o=[],l=0,r=n.length;l<r;l++)"string"===typeof n[l]?o.push(t.jsPlumb.Anchors[n[l]]({elementId:i,jsPlumbInstance:a})):e.isArray(n[l])&&o.push(s.makeAnchor(n[l],i,a));return o},this.makeDynamicAnchor=function(e,n){return new t.jsPlumb.DynamicAnchor({anchors:e,selector:n,elementId:null,jsPlumbInstance:s})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var vt=function(t,e,n,i,a){for(var o=t.target||t.srcElement,s=!1,l=i.getSelector(e,n),r=0;r<l.length;r++)if(l[r]===o){s=!0;break}return a?!s:s},gt=function(n,i,a,o,l){var r=new u(i),c=i._jsPlumb.EndpointDropHandler({jsPlumb:s,enabled:function(){return n.def.enabled},isFull:function(){var t=s.select({target:n.id}).length;return n.def.maxConnections>0&&t>=n.def.maxConnections},element:n.el,elementId:n.id,isSource:o,isTarget:l,addClass:function(t){s.addClass(n.el,t)},removeClass:function(t){s.removeClass(n.el,t)},onDrop:function(t){var e=t.endpoints[0];e.anchor.unlock()},isDropAllowed:function(){return r.isDropAllowed.apply(r,arguments)},isRedrop:function(t){return null!=t.suspendedElement&&null!=t.suspendedEndpoint&&t.suspendedEndpoint.element===n.el},getEndpoint:function(e){var a=n.def.endpoint;if(null==a||null==a._jsPlumb){var o=s.deriveEndpointAndAnchorSpec(e.getType().join(" "),!0),l=o.endpoints?t.jsPlumb.extend(i,{endpoint:n.def.def.endpoint||o.endpoints[1]}):i;o.anchors&&(l=t.jsPlumb.extend(l,{anchor:n.def.def.anchor||o.anchors[1]})),a=s.addEndpoint(n.el,l),a._mtNew=!0}if(i.uniqueEndpoint&&(n.def.endpoint=a),a.setDeleteOnEmpty(!0),e.isDetachable()&&a.initDraggable(),null!=a.anchor.positionFinder){var r=s.getUIPosition(arguments,s.getZoom()),c=s.getOffset(n.el),u=s.getSize(n.el),d=null==r?[0,0]:a.anchor.positionFinder(r,c,u,a.anchor.constructorParams);a.anchor.x=d[0],a.anchor.y=d[1]}return a},maybeCleanup:function(t){t._mtNew&&0===t.connections.length?s.deleteObject({endpoint:t}):delete t._mtNew}}),d=t.jsPlumb.dragEvents.drop;return a.scope=a.scope||i.scope||s.Defaults.Scope,a[d]=e.wrap(a[d],c,!0),a.rank=i.rank||0,l&&(a[t.jsPlumb.dragEvents.over]=function(){return!0}),!1===i.allowLoopback&&(a.canDrop=function(t){var e=t.getDragElement()._jsPlumbRelatedElement;return e!==n.el}),s.initDroppable(n.el,a,"internal"),c};this.makeTarget=function(e,n,i){var a=t.jsPlumb.extend({_jsPlumb:this},i);t.jsPlumb.extend(a,n);for(var o=a.maxConnections||-1,l=function(e){var n=p(e),i=n.id,l=t.jsPlumb.extend({},a.dropOptions||{}),r=a.connectionType||"default";this.targetEndpointDefinitions[i]=this.targetEndpointDefinitions[i]||{},pt(i),n.el._isJsPlumbGroup&&null==l.rank&&(l.rank=-1);var c={def:t.jsPlumb.extend({},a),uniqueEndpoint:a.uniqueEndpoint,maxConnections:o,enabled:!0};a.createEndpoint&&(c.uniqueEndpoint=!0,c.endpoint=s.addEndpoint(e,c.def),c.endpoint.setDeleteOnEmpty(!1)),n.def=c,this.targetEndpointDefinitions[i][r]=c,gt(n,a,l,!0===a.isSource,!0),n.el._katavorioDrop[n.el._katavorioDrop.length-1].targetDef=c}.bind(this),r=e.length&&e.constructor!==String?e:[e],c=0,u=r.length;c<u;c++)l(r[c]);return this},this.unmakeTarget=function(t,e){var n=p(t);return s.destroyDroppable(n.el,"internal"),e||delete this.targetEndpointDefinitions[n.id],this},this.makeSource=function(n,i,a){var o=t.jsPlumb.extend({_jsPlumb:this},a);t.jsPlumb.extend(o,i);var l=o.connectionType||"default",r=s.deriveEndpointAndAnchorSpec(l);o.endpoint=o.endpoint||r.endpoints[0],o.anchor=o.anchor||r.anchors[0];for(var c=o.maxConnections||-1,u=o.onMaxConnections,h=function(i){var a=i.id,r=this.getElement(i.el);this.sourceEndpointDefinitions[a]=this.sourceEndpointDefinitions[a]||{},pt(a);var p={def:t.jsPlumb.extend({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:c,enabled:!0};o.createEndpoint&&(p.uniqueEndpoint=!0,p.endpoint=s.addEndpoint(n,p.def),p.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[a][l]=p,i.def=p;var h=t.jsPlumb.dragEvents.stop,f=t.jsPlumb.dragEvents.drag,m=t.jsPlumb.extend({},o.dragOptions||{}),v=m.drag,g=m.stop,b=null,y=!1;m.scope=m.scope||o.scope,m[f]=e.wrap(m[f],(function(){v&&v.apply(this,arguments),y=!1})),m[h]=e.wrap(m[h],function(){if(g&&g.apply(this,arguments),this.currentlyDragging=!1,null!=b._jsPlumb){var t=o.anchor||this.Defaults.Anchor,e=b.anchor,n=b.connections[0],i=this.makeAnchor(t,a,this),l=b.element;if(null!=i.positionFinder){var r=s.getOffset(l),c=this.getSize(l),u={left:r.left+e.x*c[0],top:r.top+e.y*c[1]},d=i.positionFinder(u,r,c,i.constructorParams);i.x=d[0],i.y=d[1]}b.setAnchor(i,!0),b.repaint(),this.repaint(b.elementId),null!=n&&this.repaint(n.targetId)}}.bind(this));var _=function(n){if(3!==n.which&&2!==n.button){var p=this.sourceEndpointDefinitions[a][l];if(p.enabled){if(a=this.getId(this.getElement(i.el)),o.filter){var h=e.isString(o.filter)?vt(n,i.el,o.filter,this,o.filterExclude):o.filter(n,i.el);if(!1===h)return}var f=this.select({source:a}).length;if(p.maxConnections>=0&&f>=p.maxConnections)return u&&u({element:i.el,maxConnections:c},n),!1;var v=t.jsPlumb.getPositionOnElement(n,r,d),g={};t.jsPlumb.extend(g,p.def),g.isTemporarySource=!0,g.anchor=[v[0],v[1],0,0],g.dragOptions=m,p.def.scope&&(g.scope=p.def.scope),b=this.addEndpoint(a,g),y=!0,b.setDeleteOnEmpty(!0),p.uniqueEndpoint&&(p.endpoint?b.finalEndpoint=p.endpoint:(p.endpoint=b,b.setDeleteOnEmpty(!1)));var _=function t(){s.off(b.canvas,"mouseup",t),s.off(i.el,"mouseup",t),y&&(y=!1,s.deleteEndpoint(b))};s.on(b.canvas,"mouseup",_),s.on(i.el,"mouseup",_);var x={};if(p.def.extract)for(var w in p.def.extract){var C=(n.srcElement||n.target).getAttribute(w);C&&(x[p.def.extract[w]]=C)}s.trigger(b.canvas,"mousedown",n,x),e.consume(n)}}}.bind(this);this.on(i.el,"mousedown",_),p.trigger=_,o.filter&&(e.isString(o.filter)||e.isFunction(o.filter))&&s.setDragFilter(i.el,o.filter);var x=t.jsPlumb.extend({},o.dropOptions||{});gt(i,o,x,!0,!0===o.isTarget)}.bind(this),f=n.length&&n.constructor!==String?n:[n],m=0,v=f.length;m<v;m++)h(p(f[m]));return this},this.unmakeSource=function(t,e,n){var i=p(t);s.destroyDroppable(i.el,"internal");var a=this.sourceEndpointDefinitions[i.id];if(a)for(var o in a)if(null==e||e===o){var l=a[o].trigger;l&&s.off(i.el,"mousedown",l),n||delete this.sourceEndpointDefinitions[i.id][o]}return this},this.unmakeEverySource=function(){for(var t in this.sourceEndpointDefinitions)s.unmakeSource(t,null,!0);return this.sourceEndpointDefinitions={},this};var bt=function(t,n,i){n=e.isArray(n)?n:[n];var a=H(t);i=i||"default";for(var o=0;o<n.length;o++){var s=this[n[o]][a];if(s&&s[i])return s[i].def.scope||this.Defaults.Scope}}.bind(this),yt=function(t,n,i,a){i=e.isArray(i)?i:[i];var o=H(t);a=a||"default";for(var s=0;s<i.length;s++){var l=this[i[s]][o];l&&l[a]&&(l[a].def.scope=n)}}.bind(this);this.getScope=function(t,e){return bt(t,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(t){return bt(t,"sourceEndpointDefinitions")},this.getTargetScope=function(t){return bt(t,"targetEndpointDefinitions")},this.setScope=function(t,e,n){this.setSourceScope(t,e,n),this.setTargetScope(t,e,n)},this.setSourceScope=function(t,e,n){yt(t,e,"sourceEndpointDefinitions",n),this.setDragScope(t,e)},this.setTargetScope=function(t,e,n){yt(t,e,"targetEndpointDefinitions",n),this.setDropScope(t,e)},this.unmakeEveryTarget=function(){for(var t in this.targetEndpointDefinitions)s.unmakeTarget(t,!0);return this.targetEndpointDefinitions={},this};var _t=function(t,n,i,a,o){var l,r,c,u="source"===t?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(o=o||"default",n.length&&!e.isString(n)){l=[];for(var d=0,h=n.length;d<h;d++)r=p(n[d]),u[r.id]&&u[r.id][o]&&(l[d]=u[r.id][o].enabled,c=a?!l[d]:i,u[r.id][o].enabled=c,s[c?"removeClass":"addClass"](r.el,"jtk-"+t+"-disabled"))}else{r=p(n);var f=r.id;u[f]&&u[f][o]&&(l=u[f][o].enabled,c=a?!l:i,u[f][o].enabled=c,s[c?"removeClass":"addClass"](r.el,"jtk-"+t+"-disabled"))}return l}.bind(this),xt=function(t,n){return e.isString(t)||!t.length?n.apply(this,[t]):t.length?n.apply(this,[t[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(t,e){return _t("source",t,null,!0,e),this.isSourceEnabled(t,e)},this.setSourceEnabled=function(t,e,n){return _t("source",t,e,null,n)},this.isSource=function(t,e){return e=e||"default",xt(t,function(t){var n=this.sourceEndpointDefinitions[p(t).id];return null!=n&&null!=n[e]}.bind(this))},this.isSourceEnabled=function(t,e){return e=e||"default",xt(t,function(t){var n=this.sourceEndpointDefinitions[p(t).id];return n&&n[e]&&!0===n[e].enabled}.bind(this))},this.toggleTargetEnabled=function(t,e){return _t("target",t,null,!0,e),this.isTargetEnabled(t,e)},this.isTarget=function(t,e){return e=e||"default",xt(t,function(t){var n=this.targetEndpointDefinitions[p(t).id];return null!=n&&null!=n[e]}.bind(this))},this.isTargetEnabled=function(t,e){return e=e||"default",xt(t,function(t){var n=this.targetEndpointDefinitions[p(t).id];return n&&n[e]&&!0===n[e].enabled}.bind(this))},this.setTargetEnabled=function(t,e,n){return _t("target",t,e,null,n)},this.ready=function(t){s.bind("ready",t)};var wt=function(t,e){if("object"===Object(i["a"])(t)&&t.length)for(var n=0,a=t.length;n<a;n++)e(t[n]);else e(t);return s};this.repaint=function(t,e,n){return wt(t,(function(t){$(t,e,n)}))},this.revalidate=function(t,e,n){return wt(t,(function(t){var i=n?t:s.getId(t);s.updateOffset({elId:i,recalc:!0,timestamp:e});var a=s.getDragManager();a&&a.updateOffsets(i),s.repaint(t)}))},this.repaintEverything=function(){var t,e=n();for(t in x)s.updateOffset({elId:t,recalc:!0,timestamp:e});for(t in x)$(t,null,e);return this},this.removeAllEndpoints=function(t,e,n){n=n||[];var i=function t(i){var a,o,l=p(i),r=x[l.id];if(r)for(n.push(l),a=0,o=r.length;a<o;a++)s.deleteEndpoint(r[a],!1);if(delete x[l.id],e&&l.el&&3!==l.el.nodeType&&8!==l.el.nodeType)for(a=0,o=l.el.childNodes.length;a<o;a++)t(l.el.childNodes[a])};return i(t),this};var Ct=function(t,e){s.removeAllEndpoints(t.id,!0,e);for(var n=s.getDragManager(),i=function(t){n&&n.elementRemoved(t.id),s.anchorManager.clearFor(t.id),s.anchorManager.removeFloatingConnection(t.id),s.isSource(t.el)&&s.unmakeSource(t.el),s.isTarget(t.el)&&s.unmakeTarget(t.el),s.destroyDraggable(t.el),s.destroyDroppable(t.el),delete s.floatingConnections[t.id],delete C[t.id],delete k[t.id],t.el&&(s.removeElement(t.el),t.el._jsPlumb=null)},a=1;a<e.length;a++)i(e[a]);i(t)};this.remove=function(t,e){var n=p(t),i=[];return n.text&&n.el.parentNode?n.el.parentNode.removeChild(n.el):n.id&&s.batch((function(){Ct(n,i)}),!0===e),s},this.empty=function(t,e){var n=[],i=function t(e,i){var a=p(e);if(a.text)a.el.parentNode.removeChild(a.el);else if(a.el){while(a.el.childNodes.length>0)t(a.el.childNodes[0]);i||Ct(a,n)}};return s.batch((function(){i(t,!0)}),!1===e),s},this.reset=function(t){s.silently(function(){dt=!1,s.removeAllGroups(),s.removeGroupManager(),s.deleteEveryEndpoint(),t||s.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},_.length=0,this.doReset&&this.doReset()}.bind(this))};var kt=function(t){t.canvas&&t.canvas.parentNode&&t.canvas.parentNode.removeChild(t.canvas),t.cleanup(),t.destroy()};this.clear=function(){s.select().each(kt),s.selectEndpoints().each(kt),x={},w={}},this.setDefaultScope=function(t){return L=t,s},this.deriveEndpointAndAnchorSpec=function(t,e){for(var n=((e?"":"default ")+t).split(/[\s]/),i=null,a=null,o=null,l=null,r=0;r<n.length;r++){var c=s.getType(n[r],"connection");c&&(c.endpoints&&(i=c.endpoints),c.endpoint&&(a=c.endpoint),c.anchors&&(l=c.anchors),c.anchor&&(o=c.anchor))}return{endpoints:i||[a,a],anchors:l||[o,o]}},this.setId=function(t,n,i){var a;e.isString(t)?a=t:(t=this.getElement(t),a=this.getId(t));var o=this.getConnections({source:a,scope:"*"},!0),s=this.getConnections({target:a,scope:"*"},!0);n=""+n,i?t=this.getElement(n):(t=this.getElement(a),this.setAttribute(t,"id",n)),x[n]=x[a]||[];for(var l=0,r=x[n].length;l<r;l++)x[n][l].setElementId(n),x[n][l].setReferenceElement(t);delete x[a],this.sourceEndpointDefinitions[n]=this.sourceEndpointDefinitions[a],delete this.sourceEndpointDefinitions[a],this.targetEndpointDefinitions[n]=this.targetEndpointDefinitions[a],delete this.targetEndpointDefinitions[a],this.anchorManager.changeId(a,n);var c=this.getDragManager();c&&c.changeId(a,n),C[n]=C[a],delete C[a];var u=function(e,i,a){for(var o=0,s=e.length;o<s;o++)e[o].endpoints[i].setElementId(n),e[o].endpoints[i].setReferenceElement(t),e[o][a+"Id"]=n,e[o][a]=t};u(o,0,"source"),u(s,1,"target"),this.repaint(n)},this.setDebugLog=function(t){b=t},this.setSuspendDrawing=function(t,e){var n=E;return E=t,j=t?(new Date).getTime():null,e&&this.repaintEverything(),n},this.isSuspendDrawing=function(){return E},this.getSuspendedAt=function(){return j},this.batch=function(t,n){var i=this.isSuspendDrawing();i||this.setSuspendDrawing(!0);try{t()}catch(a){e.log("Function run while suspended failed",a)}i||this.setSuspendDrawing(!1,!n)},this.doWhileSuspended=this.batch,this.getCachedData=G,this.timestamp=n,this.show=function(t,e){return V(t,"block",e),s},this.toggleVisible=Q,this.addListener=this.bind;var Dt=[];this.registerFloatingConnection=function(t,n,i){Dt[t.id]=n,e.addToList(x,t.id,i)},this.getFloatingConnectionFor=function(t){return Dt[t]},this.listManager=new t.jsPlumbListManager(this)};e.extend(t.jsPlumbInstance,e.EventGenerator,{setAttribute:function(t,e,n){this.setAttribute(t,e,n)},getAttribute:function(e,n){return this.getAttribute(t.jsPlumb.getElement(e),n)},convertToFullOverlaySpec:function(t){return e.isString(t)&&(t=[t,{}]),t[1].id=t[1].id||e.uuid(),t},registerConnectionType:function(e,n){if(this._connectionTypes[e]=t.jsPlumb.extend({},n),n.overlays){for(var i={},a=0;a<n.overlays.length;a++){var o=this.convertToFullOverlaySpec(n.overlays[a]);i[o[1].id]=o}this._connectionTypes[e].overlays=i}},registerConnectionTypes:function(t){for(var e in t)this.registerConnectionType(e,t[e])},registerEndpointType:function(e,n){if(this._endpointTypes[e]=t.jsPlumb.extend({},n),n.overlays){for(var i={},a=0;a<n.overlays.length;a++){var o=this.convertToFullOverlaySpec(n.overlays[a]);i[o[1].id]=o}this._endpointTypes[e].overlays=i}},registerEndpointTypes:function(t){for(var e in t)this.registerEndpointType(e,t[e])},getType:function(t,e){return"connection"===e?this._connectionTypes[t]:this._endpointTypes[t]},setIdChanged:function(t,e){this.setId(t,e,!0)},setParent:function(t,e){var n=this.getElement(t),i=this.getId(n),a=this.getElement(e),o=this.getId(a),s=this.getDragManager();n.parentNode.removeChild(n),a.appendChild(n),s&&s.setParent(n,i,a,o)},extend:function(t,e,n){var i;if(n)for(i=0;i<n.length;i++)t[n[i]]=e[n[i]];else for(i in e)t[i]=e[i];return t},floatingConnections:{},getFloatingAnchorIndex:function(t){return t.endpoints[0].isFloating()?0:t.endpoints[1].isFloating()?1:-1},proxyConnection:function(t,e,n,i,a,o){var s,l=t.endpoints[e].elementId,r=t.endpoints[e];t.proxies=t.proxies||[],s=t.proxies[e]?t.proxies[e].ep:this.addEndpoint(n,{endpoint:a(t,e),anchor:o(t,e),parameters:{isProxyEndpoint:!0}}),s.setDeleteOnEmpty(!0),t.proxies[e]={ep:s,originalEp:r},0===e?this.anchorManager.sourceChanged(l,i,t,n):(this.anchorManager.updateOtherEndpoint(t.endpoints[0].elementId,l,i,t),t.target=n,t.targetId=i),r.detachFromConnection(t,null,!0),s.connections=[t],t.endpoints[e]=s,r.setVisible(!1),t.setVisible(!0),this.revalidate(n)},unproxyConnection:function(t,e,n){if(null!=t._jsPlumb&&null!=t.proxies&&null!=t.proxies[e]){var i=t.proxies[e].originalEp.element,a=t.proxies[e].originalEp.elementId;t.endpoints[e]=t.proxies[e].originalEp,0===e?this.anchorManager.sourceChanged(n,a,t,i):(this.anchorManager.updateOtherEndpoint(t.endpoints[0].elementId,n,a,t),t.target=i,t.targetId=a),t.proxies[e].ep.detachFromConnection(t,null),t.proxies[e].originalEp.addConnection(t),t.isVisible()&&t.proxies[e].originalEp.setVisible(!0),delete t.proxies[e]}}});var m=new f;t.jsPlumb=m,m.getInstance=function(t,e){var n=new f(t);if(e)for(var i in e)n[i]=e[i];return n.init(),n},m.each=function(t,e){if(null!=t)if("string"===typeof t)e(m.getElement(t));else if(null!=t.length)for(var n=0;n<t.length;n++)e(m.getElement(t[n]));else e(t)},"undefined"!==typeof exports&&(exports.jsPlumb=m)}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i="__label",a=function(t,n){var a={cssClass:n.cssClass,labelStyle:t.labelStyle,id:i,component:t,_jsPlumb:t._jsPlumb.instance},o=e.extend(a,n);return new(e.Overlays[t._jsPlumb.instance.getRenderMode()].Label)(o)},o=function(t,i){var a=null;if(n.isArray(i)){var o=i[0],s=e.extend({component:t,_jsPlumb:t._jsPlumb.instance},i[1]);3===i.length&&e.extend(s,i[2]),a=new(e.Overlays[t._jsPlumb.instance.getRenderMode()][o])(s)}else a=i.constructor===String?new(e.Overlays[t._jsPlumb.instance.getRenderMode()][i])({component:t,_jsPlumb:t._jsPlumb.instance}):i;return a.id=a.id||n.uuid(),t.cacheTypeItem("overlay",a,a.id),t._jsPlumb.overlays[a.id]=a,a};e.OverlayCapableJsPlumbUIComponent=function(e){t.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},e.label?this.getDefaultType().overlays[i]=["Label",{label:e.label,location:e.labelLocation||this.defaultLabelLocation||.5,labelStyle:e.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:i}]:e.id&&(this.getDefaultType().overlays[i]=["Label",{label:e.label,location:e.labelLocation||this.defaultLabelLocation||.5,labelStyle:e.emptyLabelStyle||this._jsPlumb.instance.Defaults.emptyLabelStyle,id:i}]),this.setListenerComponent=function(t){if(this._jsPlumb)for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].setListenerComponent(t)}},e.OverlayCapableJsPlumbUIComponent.applyType=function(t,e){if(e.overlays){var n,i={};for(n in e.overlays){var a=t._jsPlumb.overlays[e.overlays[n][1].id];if(a)a.updateFrom(e.overlays[n][1]),i[e.overlays[n][1].id]=!0;else{var o=t.getCachedTypeItem("overlay",e.overlays[n][1].id);null!=o?(o.reattach(t._jsPlumb.instance,t),o.setVisible(!0),o.updateFrom(e.overlays[n][1]),t._jsPlumb.overlays[o.id]=o):o=t.addOverlay(e.overlays[n],!0),i[o.id]=!0}}for(n in t._jsPlumb.overlays)null==i[t._jsPlumb.overlays[n].id]&&t.removeOverlay(t._jsPlumb.overlays[n].id,!0)}},n.extend(e.OverlayCapableJsPlumbUIComponent,t.jsPlumbUIComponent,{setHover:function(t,e){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n][t?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(t,e){var i=o(this,t);if(this.getData&&"Label"===i.type&&n.isArray(t)){var a=this.getData(),s=t[1];if(a){var l=s.labelLocationAttribute||"labelLocation",r=a?a[l]:null;r&&(i.loc=r)}}return e||this.repaint(),i},getOverlay:function(t){return this._jsPlumb.overlays[t]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(t){var e=this.getOverlay(t);e&&e.hide()},hideOverlays:function(){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].hide()},showOverlay:function(t){var e=this.getOverlay(t);e&&e.show()},showOverlays:function(){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].show()},removeAllOverlays:function(t){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].cleanup&&this._jsPlumb.overlays[e].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},t||this.repaint()},removeOverlay:function(t,e){var n=this._jsPlumb.overlays[t];n&&(n.setVisible(!1),!e&&n.cleanup&&n.cleanup(),delete this._jsPlumb.overlays[t],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[t],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[t])},removeOverlays:function(){for(var t=0,e=arguments.length;t<e;t++)this.removeOverlay(arguments[t])},moveParent:function(t){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),t.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode)for(var e in this.canvas.parentNode.removeChild(this.canvas),t.appendChild(this.canvas),this._jsPlumb.overlays)if(this._jsPlumb.overlays[e].isAppendedAtTopLevel){var n=this._jsPlumb.overlays[e].getElement();n.parentNode.removeChild(n),t.appendChild(n)}},getLabel:function(){var t=this.getOverlay(i);return null!=t?t.getLabel():null},getLabelOverlay:function(){return this.getOverlay(i)},setLabel:function(t){var e=this.getOverlay(i);if(e)t.constructor===String||t.constructor===Function?e.setLabel(t):(t.label||(t.label=""),e.setLabel(t.label),t.location&&e.setLocation(t.location));else{var n=t.constructor===String||t.constructor===Function?{label:t}:t;e=a(this,n),this._jsPlumb.overlays[i]=e}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(t){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].cleanup(t),this._jsPlumb.overlays[e].destroy(t);t&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(t){this[t?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(t,e){this._jsPlumb.overlayPositions[t.id]=e},getAbsoluteOverlayPosition:function(t){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[t.id]:null},_clazzManip:function(t,e,n){if(!n)for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i][t+"Class"](e)},addClass:function(t,e){this._clazzManip("add",t,e)},removeClass:function(t,e){this._clazzManip("remove",t,e)}})}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,a=function(t,e,n){var i=!1;return{drag:function(){if(i)return i=!1,!0;if(e.element){var a=n.getUIPosition(arguments,n.getZoom());null!=a&&n.setPosition(e.element,a),n.repaint(e.element,a),t.paint({anchorPoint:t.anchor.getCurrentLocation({element:t})})}},stopDrag:function(){i=!0}}},o=function(t,e,n,i){var a=e.createElement("div",{position:"absolute"});e.appendElement(a);var o=e.getId(a);e.setPosition(a,n),a.style.width=i[0]+"px",a.style.height=i[1]+"px",e.manage(o,a,!0),t.id=o,t.element=a},s=function(t,n,i,a,o,s,l,r){var c=new e.FloatingAnchor({reference:n,referenceCanvas:a,jsPlumbInstance:s});return l({paintStyle:t,endpoint:i,anchor:c,source:o,scope:r})},l=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],r=function(t,e){var n=0;if(null!=e)for(var i=0;i<t.connections.length;i++)if(t.connections[i].sourceId===e||t.connections[i].targetId===e){n=i;break}return t.connections[n]};e.Endpoint=function(t){var c=t._jsPlumb,u=t.newConnection,d=t.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],e.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:t.connectionType,maxConnections:null==t.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:t.maxConnections,paintStyle:t.endpointStyle||t.paintStyle||t.style||this._jsPlumb.instance.Defaults.EndpointStyle||e.Defaults.EndpointStyle,hoverPaintStyle:t.endpointHoverStyle||t.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||e.Defaults.EndpointHoverStyle,connectorStyle:t.connectorStyle,connectorHoverStyle:t.connectorHoverStyle,connectorClass:t.connectorClass,connectorHoverClass:t.connectorHoverClass,connectorOverlays:t.connectorOverlays,connector:t.connector,connectorTooltip:t.connectorTooltip}),this._jsPlumb.enabled=!(!1===t.enabled),this._jsPlumb.visible=!0,this.element=e.getElement(t.source),this._jsPlumb.uuid=t.uuid,this._jsPlumb.floatingEndpoint=null;var p=null;this._jsPlumb.uuid&&(t.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=t.elementId,this.dragProxy=t.dragProxy,this._jsPlumb.connectionCost=t.connectionCost,this._jsPlumb.connectionsDirected=t.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var h=!0===t.deleteOnEmpty;this.setDeleteOnEmpty=function(t){h=t};var f=function(){var t=c.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var n=c.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(t),this.addClass(n),e.updateClasses(this.element,n,t)}.bind(this);this.prepareAnchor=function(t){var e=this._jsPlumb.instance.makeAnchor(t,this.elementId,c);return e.bind("anchorChanged",function(t){this.fire("anchorChanged",{endpoint:this,anchor:t}),f()}.bind(this)),e},this.setPreparedAnchor=function(t,e){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=t,f(),e||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(t,e){var n=this.prepareAnchor(t);return this.setPreparedAnchor(n,e),this};var m=function(t){if(this.connections.length>0)for(var e=0;e<this.connections.length;e++)this.connections[e].setHover(t,!1);else this.setHover(t)}.bind(this);this.bind("mouseover",(function(){m(!0)})),this.bind("mouseout",(function(){m(!1)})),t._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.prepareEndpoint=function(i,a){var o,s=function(t,n){var i=c.getRenderMode();if(e.Endpoints[i][t])return new e.Endpoints[i][t](n);if(!c.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+t+"'"}},l={_jsPlumb:this._jsPlumb.instance,cssClass:t.cssClass,container:t.container,tooltip:t.tooltip,connectorTooltip:t.connectorTooltip,endpoint:this};return n.isString(i)?o=s(i,l):n.isArray(i)?(l=n.merge(i[1],l),o=s(i[0],l)):o=i.clone(),o.clone=function(){return n.isString(i)?s(i,l):n.isArray(i)?(l=n.merge(i[1],l),s(i[0],l)):void 0}.bind(this),o.typeId=a,o},this.setEndpoint=function(t,e){var n=this.prepareEndpoint(t);this.setPreparedEndpoint(n,!0)},this.setPreparedEndpoint=function(t,e){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=t,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},e.extend(this,t,l),this.isSource=t.isSource||!1,this.isTemporarySource=t.isTemporarySource||!1,this.isTarget=t.isTarget||!1,this.connections=t.connections||[],this.connectorPointerEvents=t["connector-pointer-events"],this.scope=t.scope||c.getDefaultScope(),this.timestamp=null,this.reattachConnections=t.reattach||c.Defaults.ReattachConnections,this.connectionsDetachable=c.Defaults.ConnectionsDetachable,!1!==t.connectionsDetachable&&!1!==t.detachable||(this.connectionsDetachable=!1),this.dragAllowedWhenFull=!1!==t.dragAllowedWhenFull,t.onMaxConnections&&this.bind("maxConnections",t.onMaxConnections),this.addConnection=function(t){this.connections.push(t),this[(this.connections.length>0?"add":"remove")+"Class"](c.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](c.endpointFullClass)},this.detachFromConnection=function(t,e,n){e=null==e?this.connections.indexOf(t):e,e>=0&&(this.connections.splice(e,1),this[(this.connections.length>0?"add":"remove")+"Class"](c.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](c.endpointFullClass)),!n&&h&&0===this.connections.length&&c.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!0!==n})},this.deleteEveryConnection=function(t){for(var e=this.connections.length,n=0;n<e;n++)c.deleteConnection(this.connections[0],t)},this.detachFrom=function(t,e,n){for(var i=[],a=0;a<this.connections.length;a++)this.connections[a].endpoints[1]!==t&&this.connections[a].endpoints[0]!==t||i.push(this.connections[a]);for(var o=0,s=i.length;o<s;o++)c.deleteConnection(i[0]);return this},this.getElement=function(){return this.element},this.setElement=function(i){var a=this._jsPlumb.instance.getId(i),o=this.elementId;return n.removeWithFunction(t.endpointsByElement[this.elementId],function(t){return t.id===this.id}.bind(this)),this.element=e.getElement(i),this.elementId=c.getId(this.element),c.anchorManager.rehomeEndpoint(this,o,this.element),c.dragManager.endpointAdded(this.element),n.addToList(t.endpointsByElement,a,this),this},this.makeInPlaceCopy=function(){var e=this.anchor.getCurrentLocation({element:this}),n=this.anchor.getOrientation(this),i=this.anchor.getCssClass(),a={bind:function(){},compute:function(){return[e[0],e[1]]},getCurrentLocation:function(){return[e[0],e[1]]},getOrientation:function(){return n},getCssClass:function(){return i}};return d({dropOptions:t.dropOptions,anchor:a,source:this.element,paintStyle:this.getPaintStyle(),endpoint:t.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(t){t=t||{};var e=t.timestamp,n=!(!1===t.recalc);if(!e||this.timestamp!==e){var i=c.updateOffset({elId:this.elementId,timestamp:e}),a=t.offset?t.offset.o:i.o;if(null!=a){var o=t.anchorPoint,s=t.connectorPaintStyle;if(null==o){var l=t.dimensions||i.s,u={xy:[a.left,a.top],wh:l,element:this,timestamp:e};if(n&&this.anchor.isDynamic&&this.connections.length>0){var d=r(this,t.elementWithPrecedence),p=d.endpoints[0]===this?1:0,h=0===p?d.sourceId:d.targetId,f=c.getCachedData(h),m=f.o,v=f.s;u.index=0===p?1:0,u.connection=d,u.txy=[m.left,m.top],u.twh=v,u.tElement=d.endpoints[p]}else this.connections.length>0&&(u.connection=this.connections[0]);o=this.anchor.compute(u)}for(var g in this.endpoint.compute(o,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,s||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=e,this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(g)){var b=this._jsPlumb.overlays[g];b.isVisible()&&(this._jsPlumb.overlayPlacements[g]=b.draw(this.endpoint,this._jsPlumb.paintStyleInUse),b.paint(this._jsPlumb.overlayPlacements[g]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var v=!1;this.initDraggable=function(){if(!v&&e.isDragSupported(this.element)){var l,r={id:null,element:null},h=null,f=!1,m=null,g=a(this,r,c),b=t.dragOptions||{},y={},_=e.dragEvents.start,x=e.dragEvents.stop,w=e.dragEvents.drag,C=e.dragEvents.beforeStart,k=function(t){l=t.e.payload||{}},D=function(n){h=this.connectorSelector();var a=!0;this.isEnabled()||(a=!1),null!=h||this.isSource||this.isTemporarySource||(a=!1),!this.isSource||!this.isFull()||null!=h&&this.dragAllowedWhenFull||(a=!1),null==h||h.isDetachable(this)||(this.isFull()?a=!1:h=null);var p=c.checkCondition(null==h?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:h});if(!1===p?a=!1:"object"===Object(i["a"])(p)?e.extend(p,l||{}):p=l||{},!1===a)return c.stopDrag&&c.stopDrag(this.canvas),g.stopDrag(),!1;for(var v=0;v<this.connections.length;v++)this.connections[v].setHover(!1);this.addClass("endpointDrag"),c.setConnectionBeingDragged(!0),h&&!this.isFull()&&this.isSource&&(h=null),c.updateOffset({elId:this.elementId});var b=this._jsPlumb.instance.getOffset(this.canvas),y=this.canvas,_=this._jsPlumb.instance.getSize(this.canvas);o(r,c,b,_),c.setAttributes(this.canvas,{dragId:r.id,elId:this.elementId});var x=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var w=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);w.endpoints[1]&&(x=w.endpoints[1])}var C=this._jsPlumb.instance.makeAnchor("Center");C.isFloating=!0,this._jsPlumb.floatingEndpoint=s(this.getPaintStyle(),C,x,this.canvas,r.element,c,d,this.scope);var k=this._jsPlumb.floatingEndpoint.anchor;if(null==h)this.setHover(!1,!1),h=u({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:r.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:t.connectorStyle,hoverPaintStyle:t.connectorHoverStyle,connector:t.connector,overlays:t.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:t.scope,data:p}),h.pending=!0,h.addClass(c.draggingClass),this._jsPlumb.floatingEndpoint.addClass(c.draggingClass),this._jsPlumb.floatingEndpoint.anchor=k,c.fire("connectionDrag",h),c.anchorManager.newConnection(h);else{f=!0,h.setHover(!1);var D=h.endpoints[0].id===this.id?0:1;this.detachFromConnection(h,null,!0);var S=c.getDragScope(y);c.setAttribute(this.canvas,"originalScope",S),c.fire("connectionDrag",h),0===D?(m=[h.source,h.sourceId,y,S],c.anchorManager.sourceChanged(h.endpoints[D].elementId,r.id,h,r.element)):(m=[h.target,h.targetId,y,S],h.target=r.element,h.targetId=r.id,c.anchorManager.updateOtherEndpoint(h.sourceId,h.endpoints[D].elementId,h.targetId,h)),h.suspendedEndpoint=h.endpoints[D],h.suspendedElement=h.endpoints[D].getElement(),h.suspendedElementId=h.endpoints[D].elementId,h.suspendedElementType=0===D?"source":"target",h.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=h.suspendedEndpoint,h.endpoints[D]=this._jsPlumb.floatingEndpoint,h.addClass(c.draggingClass),this._jsPlumb.floatingEndpoint.addClass(c.draggingClass)}c.registerFloatingConnection(r,h,this._jsPlumb.floatingEndpoint),c.currentlyDragging=!0}.bind(this),S=function(){if(c.setConnectionBeingDragged(!1),h&&null!=h.endpoints){var t=c.getDropEvent(arguments),e=c.getFloatingAnchorIndex(h);if(h.endpoints[0===e?1:0].anchor.unlock(),h.removeClass(c.draggingClass),this._jsPlumb&&(h.deleteConnectionNow||h.endpoints[e]===this._jsPlumb.floatingEndpoint)&&f&&h.suspendedEndpoint){0===e?(h.floatingElement=h.source,h.floatingId=h.sourceId,h.floatingEndpoint=h.endpoints[0],h.floatingIndex=0,h.source=m[0],h.sourceId=m[1]):(h.floatingElement=h.target,h.floatingId=h.targetId,h.floatingEndpoint=h.endpoints[1],h.floatingIndex=1,h.target=m[0],h.targetId=m[1]);var n=this._jsPlumb.floatingEndpoint;c.setDragScope(m[2],m[3]),h.endpoints[e]=h.suspendedEndpoint,h.isReattach()||h._forceReattach||h._forceDetach||!c.deleteConnection(h,{originalEvent:t})?(h.setHover(!1),h._forceDetach=null,h._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(h),h.suspendedEndpoint.addConnection(h),1===e?c.anchorManager.updateOtherEndpoint(h.sourceId,h.floatingId,h.targetId,h):c.anchorManager.sourceChanged(h.floatingId,h.sourceId,h,h.source),c.repaint(m[1])):c.deleteObject({endpoint:n})}this.deleteAfterDragStop?c.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),c.fire("connectionDragStop",h,t),h.pending&&c.fire("connectionAborted",h,t),c.currentlyDragging=!1,h.suspendedElement=null,h.suspendedEndpoint=null,h=null}r&&r.element&&c.remove(r.element,!1,!1),p&&c.deleteObject({endpoint:p}),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.unlock(),this._jsPlumb.floatingEndpoint=null)}.bind(this);b=e.extend(y,b),b.scope=this.scope||b.scope,b[C]=n.wrap(b[C],k,!1),b[_]=n.wrap(b[_],D,!1),b[w]=n.wrap(b[w],g.drag),b[x]=n.wrap(b[x],S),b.multipleDrop=!1,b.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&!1!==this.connectionsDetachable}.bind(this),c.initDraggable(this.canvas,b,"internal"),this.canvas._jsPlumbRelatedElement=this.element,v=!0}};var g=t.endpoint||this._jsPlumb.instance.Defaults.Endpoint||e.Defaults.Endpoint;this.setEndpoint(g,!0);var b=t.anchor?t.anchor:t.anchors?t.anchors:c.Defaults.Anchor||"Top";this.setAnchor(b,!0);var y=["default",t.type||""].join(" ");this.addType(y,t.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var _=function(i,a,o,s){if(e.isDropSupported(this.element)){var l=t.dropOptions||c.Defaults.DropOptions||e.Defaults.DropOptions;l=e.extend({},l),l.scope=l.scope||this.scope;var r=e.dragEvents.drop,u=e.dragEvents.over,d=e.dragEvents.out,p=this,h=c.EndpointDropHandler({getEndpoint:function(){return p},jsPlumb:c,enabled:function(){return null==o||o.isEnabled()},isFull:function(){return o.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(t){p.addClass(t)},removeClass:function(t){p.removeClass(t)},isDropAllowed:function(){return p.isDropAllowed.apply(p,arguments)},reference:s,isRedrop:function(t,e){return t.suspendedEndpoint&&e.reference&&t.suspendedEndpoint.id===e.reference.id}});l[r]=n.wrap(l[r],h,!0),l[u]=n.wrap(l[u],function(){var t=e.getDragObject(arguments),n=c.getAttribute(e.getElement(t),"dragId"),i=c.getFloatingConnectionFor(n);if(null!=i){var a=c.getFloatingAnchorIndex(i),o=this.isTarget&&0!==a||i.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===i.suspendedEndpoint.id;if(o){var s=c.checkCondition("checkDropAllowed",{sourceEndpoint:i.endpoints[a],targetEndpoint:this,connection:i});this[(s?"add":"remove")+"Class"](c.endpointDropAllowedClass),this[(s?"remove":"add")+"Class"](c.endpointDropForbiddenClass),i.endpoints[a].anchor.over(this.anchor,this)}}}.bind(this)),l[d]=n.wrap(l[d],function(){var t=e.getDragObject(arguments),n=null==t?null:c.getAttribute(e.getElement(t),"dragId"),i=n?c.getFloatingConnectionFor(n):null;if(null!=i){var a=c.getFloatingAnchorIndex(i),o=this.isTarget&&0!==a||i.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===i.suspendedEndpoint.id;o&&(this.removeClass(c.endpointDropAllowedClass),this.removeClass(c.endpointDropForbiddenClass),i.endpoints[a].anchor.out())}}.bind(this)),c.initDroppable(i,l,"internal",a)}}.bind(this);return this.anchor.isFloating||_(this.canvas,!(t._transient||this.anchor.isFloating),this,t.reference),this},n.extend(e.Endpoint,e.OverlayCapableJsPlumbUIComponent,{setVisible:function(t,e,n){if(this._jsPlumb.visible=t,this.canvas&&(this.canvas.style.display=t?"block":"none"),this[t?"showOverlays":"hideOverlays"](),!e)for(var i=0;i<this.connections.length;i++)if(this.connections[i].setVisible(t),!n){var a=this===this.connections[i].endpoints[0]?1:0;1===this.connections[i].endpoints[a].connections.length&&this.connections[i].endpoints[a].setVisible(t,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(t,n){this.setPaintStyle(t.endpointStyle||t.paintStyle,n),this.setHoverPaintStyle(t.endpointHoverStyle||t.hoverPaintStyle,n),null!=t.maxConnections&&(this._jsPlumb.maxConnections=t.maxConnections),t.scope&&(this.scope=t.scope),e.extend(this,t,l),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass),e.OverlayCapableJsPlumbUIComponent.applyType(this,t)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(t){this._jsPlumb.enabled=t},cleanup:function(){var t=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");e.removeClass(this.element,t),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(t){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(t)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(t){var e=!1;if(t)for(var n=0;n<this.connections.length;n++)if(this.connections[n].endpoints[1]===t||this.connections[n].endpoints[0]===t){e=!0;break}return e},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(t){this._jsPlumb.connectionCost=t},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(t){this._jsPlumb.connectionsDirected=t},setElementId:function(t){this.elementId=t,this.anchor.elementId=t},setReferenceElement:function(t){this.element=e.getElement(t)},setDragAllowedWhenFull:function(t){this.dragAllowedWhenFull=t},equals:function(t){return this.anchor.equals(t.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(t){return this.anchor.compute(t)}}),t.jsPlumbInstance.prototype.EndpointDropHandler=function(t){return function(e){var i=t.jsPlumb;t.removeClass(i.endpointDropAllowedClass),t.removeClass(i.endpointDropForbiddenClass);var a=i.getDropEvent(arguments),o=i.getDragObject(arguments),s=i.getAttribute(o,"dragId"),l=(i.getAttribute(o,"elId"),i.getAttribute(o,"originalScope")),r=i.getFloatingConnectionFor(s);if(null!=r){var c=null!=r.suspendedEndpoint;if(!c||null!=r.suspendedEndpoint._jsPlumb){var u=t.getEndpoint(r);if(null!=u){if(t.isRedrop(r,t))return r._forceReattach=!0,r.setHover(!1),void(t.maybeCleanup&&t.maybeCleanup(u));var d=i.getFloatingAnchorIndex(r);if(0===d&&!t.isSource||1===d&&!t.isTarget)t.maybeCleanup&&t.maybeCleanup(u);else{t.onDrop&&t.onDrop(r),l&&i.setDragScope(o,l);var p=t.isFull(e);if(p&&u.fire("maxConnections",{endpoint:this,connection:r,maxConnections:u._jsPlumb.maxConnections},a),!p&&t.enabled()){var h=!0;0===d?(r.floatingElement=r.source,r.floatingId=r.sourceId,r.floatingEndpoint=r.endpoints[0],r.floatingIndex=0,r.source=t.element,r.sourceId=t.elementId):(r.floatingElement=r.target,r.floatingId=r.targetId,r.floatingEndpoint=r.endpoints[1],r.floatingIndex=1,r.target=t.element,r.targetId=t.elementId),c&&r.suspendedEndpoint.id!==u.id&&(r.isDetachAllowed(r)&&r.endpoints[d].isDetachAllowed(r)&&r.suspendedEndpoint.isDetachAllowed(r)&&i.checkCondition("beforeDetach",r)||(h=!1));var f=function(e){r.endpoints[d].detachFromConnection(r),r.suspendedEndpoint&&r.suspendedEndpoint.detachFromConnection(r),r.endpoints[d]=u,u.addConnection(r);var o=u.getParameters();for(var s in o)r.setParameter(s,o[s]);if(c){var l=r.suspendedEndpoint.elementId;i.fireMoveEvent({index:d,originalSourceId:0===d?l:r.sourceId,newSourceId:0===d?u.elementId:r.sourceId,originalTargetId:1===d?l:r.targetId,newTargetId:1===d?u.elementId:r.targetId,originalSourceEndpoint:0===d?r.suspendedEndpoint:r.endpoints[0],newSourceEndpoint:0===d?u:r.endpoints[0],originalTargetEndpoint:1===d?r.suspendedEndpoint:r.endpoints[1],newTargetEndpoint:1===d?u:r.endpoints[1],connection:r},a)}else o.draggable&&i.initDraggable(this.element,t.dragOptions,"internal",i);if(1===d?i.anchorManager.updateOtherEndpoint(r.sourceId,r.floatingId,r.targetId,r):i.anchorManager.sourceChanged(r.floatingId,r.sourceId,r,r.source),r.endpoints[0].finalEndpoint){var p=r.endpoints[0];p.detachFromConnection(r),r.endpoints[0]=r.endpoints[0].finalEndpoint,r.endpoints[0].addConnection(r)}n.isObject(e)&&r.mergeData(e),i.finaliseConnection(r,null,a,!1),r.setHover(!1),i.revalidate(r.endpoints[0].element)}.bind(this),m=function(){r.suspendedEndpoint&&(r.endpoints[d]=r.suspendedEndpoint,r.setHover(!1),r._forceDetach=!0,0===d?(r.source=r.suspendedEndpoint.element,r.sourceId=r.suspendedEndpoint.elementId):(r.target=r.suspendedEndpoint.element,r.targetId=r.suspendedEndpoint.elementId),r.suspendedEndpoint.addConnection(r),1===d?i.anchorManager.updateOtherEndpoint(r.sourceId,r.floatingId,r.targetId,r):i.anchorManager.sourceChanged(r.floatingId,r.sourceId,r,r.source),i.repaint(r.sourceId),r._forceDetach=!1)};if(h=h&&t.isDropAllowed(r.sourceId,r.targetId,r.scope,r,u),h)return f(h),!0;m()}t.maybeCleanup&&t.maybeCleanup(u),i.currentlyDragging=!1}}}}}}}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i=function(t,i,a,o,s){if(e.Connectors[i]=e.Connectors[i]||{},null==e.Connectors[i][a]){if(null==e.Connectors[a]){if(t.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+a+"'")}e.Connectors[i][a]=function(){e.Connectors[a].apply(this,arguments),e.ConnectorRenderers[i].apply(this,arguments)},n.extend(e.Connectors[i][a],[e.Connectors[a],e.ConnectorRenderers[i]])}return new e.Connectors[i][a](o,s)},a=function(t,e,n){return t?n.makeAnchor(t,e,n):null},o=function(t,e,i,a){null!=e&&(e._jsPlumbConnections=e._jsPlumbConnections||{},a?delete e._jsPlumbConnections[t.id]:e._jsPlumbConnections[t.id]=!0,n.isEmpty(e._jsPlumbConnections)?i.removeClass(e,i.connectedClass):i.addClass(e,i.connectedClass))};e.Connection=function(t){var i=t.newEndpoint;this.id=t.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=t.previousConnection,this.source=e.getElement(t.source),this.target=e.getElement(t.target),e.OverlayCapableJsPlumbUIComponent.apply(this,arguments),t.sourceEndpoint?(this.source=t.sourceEndpoint.getElement(),this.sourceId=t.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),t.targetEndpoint?(this.target=t.targetEndpoint.getElement(),this.targetId=t.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=t.scope,this.endpoints=[],this.endpointStyles=[];var a=this._jsPlumb.instance;a.manage(this.sourceId,this.source),a.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:t.cssClass,container:t.container,"pointer-events":t["pointer-events"],editorParams:t.editorParams,overlays:t.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(e,n,o,s,l){return o=o||this._jsPlumb.instance.getId(n),this.prepareEndpoint(a,i,this,s,e?0:1,t,n,o,l)},t.type&&(t.endpoints=t.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(t.type).endpoints);var o=this.makeEndpoint(!0,this.source,this.sourceId,t.sourceEndpoint),s=this.makeEndpoint(!1,this.target,this.targetId,t.targetEndpoint);o&&n.addToList(t.endpointsByElement,this.sourceId,o),s&&n.addToList(t.endpointsByElement,this.targetId,s),this.scope||(this.scope=this.endpoints[0].scope),null!=t.deleteEndpointsOnEmpty&&(this.endpoints[0].setDeleteOnEmpty(t.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(t.deleteEndpointsOnEmpty));var l=a.Defaults.ConnectionsDetachable;!1===t.detachable&&(l=!1),!1===this.endpoints[0].connectionsDetachable&&(l=!1),!1===this.endpoints[1].connectionsDetachable&&(l=!1);var r=t.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||a.Defaults.ReattachConnections;this.appendToDefaultType({detachable:l,reattach:r,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||t.paintStyle||a.Defaults.PaintStyle||e.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||t.hoverPaintStyle||a.Defaults.HoverPaintStyle||e.Defaults.HoverPaintStyle});var c=a.getSuspendedAt();if(!a.isSuspendDrawing()){var u=a.getCachedData(this.sourceId),d=u.o,p=u.s,h=a.getCachedData(this.targetId),f=h.o,m=h.s,v=c||a.timestamp(),g=this.endpoints[0].anchor.compute({xy:[d.left,d.top],wh:p,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[f.left,f.top],twh:m,tElement:this.endpoints[1],timestamp:v});this.endpoints[0].paint({anchorLoc:g,timestamp:v}),g=this.endpoints[1].anchor.compute({xy:[f.left,f.top],wh:m,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[d.left,d.top],twh:p,tElement:this.endpoints[0],timestamp:v}),this.endpoints[1].paint({anchorLoc:g,timestamp:v})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(t){return!1!==this._jsPlumb.detachable&&(null!=t?!0===t.connectionsDetachable:!0===this._jsPlumb.detachable)},this.setDetachable=function(t){this._jsPlumb.detachable=!0===t},this.isReattach=function(){return!0===this._jsPlumb.reattach||!0===this.endpoints[0].reattachConnections||!0===this.endpoints[1].reattachConnections},this.setReattach=function(t){this._jsPlumb.reattach=!0===t},this._jsPlumb.cost=t.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=t.directed,null==t.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var b=e.extend({},this.endpoints[1].getParameters());e.extend(b,this.endpoints[0].getParameters()),e.extend(b,this.getParameters()),this.setParameters(b),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||t.connector||a.Defaults.Connector||e.Defaults.Connector,!0);var y=null!=t.data&&n.isObject(t.data)?t.data:{};this.getData=function(){return y},this.setData=function(t){y=t||{}},this.mergeData=function(t){y=e.extend(y,t)};var _=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,t.type].join(" ");/[^\s]/.test(_)&&this.addType(_,t.data,!0),this.updateConnectedClass()},n.extend(e.Connection,e.OverlayCapableJsPlumbUIComponent,{applyType:function(t,n,i){var a=null;null!=t.connector&&(a=this.getCachedTypeItem("connector",i.connector),null==a&&(a=this.prepareConnector(t.connector,i.connector),this.cacheTypeItem("connector",a,i.connector)),this.setPreparedConnector(a)),null!=t.detachable&&this.setDetachable(t.detachable),null!=t.reattach&&this.setReattach(t.reattach),t.scope&&(this.scope=t.scope),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass);var o=null;t.anchor?(o=this.getCachedTypeItem("anchors",i.anchor),null==o&&(o=[this._jsPlumb.instance.makeAnchor(t.anchor),this._jsPlumb.instance.makeAnchor(t.anchor)],this.cacheTypeItem("anchors",o,i.anchor))):t.anchors&&(o=this.getCachedTypeItem("anchors",i.anchors),null==o&&(o=[this._jsPlumb.instance.makeAnchor(t.anchors[0]),this._jsPlumb.instance.makeAnchor(t.anchors[1])],this.cacheTypeItem("anchors",o,i.anchors))),null!=o&&(this.endpoints[0].anchor=o[0],this.endpoints[1].anchor=o[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),e.OverlayCapableJsPlumbUIComponent.applyType(this,t)},addClass:function(t,e){e&&(this.endpoints[0].addClass(t),this.endpoints[1].addClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(t)),this.connector&&this.connector.addClass(t)},removeClass:function(t,e){e&&(this.endpoints[0].removeClass(t),this.endpoints[1].removeClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(t)),this.connector&&this.connector.removeClass(t)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(t){this._jsPlumb.visible=t,this.connector&&this.connector.setVisible(t),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(t){this._jsPlumb&&(o(this,this.source,this._jsPlumb.instance,t),o(this,this.target,this._jsPlumb.instance,t))},setHover:function(e){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(e),t.jsPlumb[e?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),t.jsPlumb[e?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(t){this._jsPlumb.cost=t},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(t,e){var a,o={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},s=this._jsPlumb.instance.getRenderMode();return n.isString(t)?a=i(this._jsPlumb.instance,s,t,o,this):n.isArray(t)&&(a=1===t.length?i(this._jsPlumb.instance,s,t[0],o,this):i(this._jsPlumb.instance,s,t[0],n.merge(t[1],o),this)),null!=e&&(a.typeId=e),a},setPreparedConnector:function(t,e,n,i){if(this.connector!==t){var a,o="";if(null!=this.connector&&(a=this.connector,o=a.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=t,i&&this.cacheTypeItem("connector",t,i),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(o),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=a)for(var s=this.getOverlays(),l=0;l<s.length;l++)s[l].transfer&&s[l].transfer(this.connector);n||this.setListenerComponent(this.connector),e||this.repaint()}},setConnector:function(t,e,n,i){var a=this.prepareConnector(t,i);this.setPreparedConnector(a,e,n,i)},paint:function(t){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){t=t||{};var e=t.timestamp,n=!1,i=n?this.sourceId:this.targetId,a=n?this.targetId:this.sourceId,o=n?0:1,s=n?1:0;if(null==e||e!==this._jsPlumb.lastPaintedAt){var l=this._jsPlumb.instance.updateOffset({elId:a}).o,r=this._jsPlumb.instance.updateOffset({elId:i}).o,c=this.endpoints[s],u=this.endpoints[o],d=c.anchor.getCurrentLocation({xy:[l.left,l.top],wh:[l.width,l.height],element:c,timestamp:e}),p=u.anchor.getCurrentLocation({xy:[r.left,r.top],wh:[r.width,r.height],element:u,timestamp:e});this.connector.resetBounds(),this.connector.compute({sourcePos:d,targetPos:p,sourceOrientation:c.anchor.getOrientation(c),targetOrientation:u.anchor.getOrientation(u),sourceEndpoint:this.endpoints[s],targetEndpoint:this.endpoints[o],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:l,targetInfo:r});var h={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var f in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(f)){var m=this._jsPlumb.overlays[f];m.isVisible()&&(this._jsPlumb.overlayPlacements[f]=m.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(m)),h.minX=Math.min(h.minX,this._jsPlumb.overlayPlacements[f].minX),h.maxX=Math.max(h.maxX,this._jsPlumb.overlayPlacements[f].maxX),h.minY=Math.min(h.minY,this._jsPlumb.overlayPlacements[f].minY),h.maxY=Math.max(h.maxY,this._jsPlumb.overlayPlacements[f].maxY))}var v=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,g=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),b={xmin:Math.min(this.connector.bounds.minX-(v+g),h.minX),ymin:Math.min(this.connector.bounds.minY-(v+g),h.minY),xmax:Math.max(this.connector.bounds.maxX+(v+g),h.maxX),ymax:Math.max(this.connector.bounds.maxY+(v+g),h.maxY)};for(var y in this.connector.paintExtents=b,this.connector.paint(this._jsPlumb.paintStyleInUse,null,b),this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(y)){var _=this._jsPlumb.overlays[y];_.isVisible()&&_.paint(this._jsPlumb.overlayPlacements[y],b)}}this._jsPlumb.lastPaintedAt=e}},repaint:function(t){var e=jsPlumb.extend(t||{},{});e.elId=this.sourceId,this.paint(e)},prepareEndpoint:function(t,n,i,o,s,l,r,c,u){var d;if(o)i.endpoints[s]=o,o.addConnection(i);else{l.endpoints||(l.endpoints=[null,null]);var p=u||l.endpoints[s]||l.endpoint||t.Defaults.Endpoints[s]||e.Defaults.Endpoints[s]||t.Defaults.Endpoint||e.Defaults.Endpoint;l.endpointStyles||(l.endpointStyles=[null,null]),l.endpointHoverStyles||(l.endpointHoverStyles=[null,null]);var h=l.endpointStyles[s]||l.endpointStyle||t.Defaults.EndpointStyles[s]||e.Defaults.EndpointStyles[s]||t.Defaults.EndpointStyle||e.Defaults.EndpointStyle;null==h.fill&&null!=l.paintStyle&&(h.fill=l.paintStyle.stroke),null==h.outlineStroke&&null!=l.paintStyle&&(h.outlineStroke=l.paintStyle.outlineStroke),null==h.outlineWidth&&null!=l.paintStyle&&(h.outlineWidth=l.paintStyle.outlineWidth);var f=l.endpointHoverStyles[s]||l.endpointHoverStyle||t.Defaults.EndpointHoverStyles[s]||e.Defaults.EndpointHoverStyles[s]||t.Defaults.EndpointHoverStyle||e.Defaults.EndpointHoverStyle;null!=l.hoverPaintStyle&&(null==f&&(f={}),null==f.fill&&(f.fill=l.hoverPaintStyle.stroke));var m=l.anchors?l.anchors[s]:l.anchor?l.anchor:a(t.Defaults.Anchors[s],c,t)||a(e.Defaults.Anchors[s],c,t)||a(t.Defaults.Anchor,c,t)||a(e.Defaults.Anchor,c,t),v=l.uuids?l.uuids[s]:null;d=n({paintStyle:h,hoverPaintStyle:f,endpoint:p,connections:[i],uuid:v,anchor:m,source:r,scope:l.scope,reattach:l.reattach||t.Defaults.ReattachConnections,detachable:l.detachable||t.Defaults.ConnectionsDetachable}),null==o&&d.setDeleteOnEmpty(!0),i.endpoints[s]=d,!1===l.drawEndpoints&&d.setVisible(!1,!0,!0)}return d},replaceEndpoint:function(t,e){var n=this.endpoints[t],i=n.elementId,a=this._jsPlumb.instance.getEndpoints(i),o=a.indexOf(n),s=this.makeEndpoint(0===t,n.element,i,null,e);this.endpoints[t]=s,a.splice(o,1,s),this._jsPlumb.instance.deleteObject({endpoint:n,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:n,current:s}),this._jsPlumb.instance.anchorManager.updateOtherEndpoint(this.endpoints[0].elementId,this.endpoints[1].elementId,this.endpoints[1].elementId,this)}})}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumbUtil,n=t.jsPlumb;n.AnchorManager=function(t){var i={},a={},o={},s={},l=this,r={},c=t.jsPlumbInstance,u={},d=function(t,e,n,i,a,o,s){for(var l=[],r=e[a?0:1]/(i.length+1),c=0;c<i.length;c++){var u=(c+1)*r,d=o*e[a?1:0];s&&(u=e[a?0:1]-u);var p=a?u:d,h=n[0]+p,f=p/e[0],m=a?d:u,v=n[1]+m,g=m/e[1];l.push([h,v,f,g,i[c][1],i[c][2]])}return l},p=function(t){return function(e,n){var i=!0;return i=t?e[0][0]<n[0][0]:e[0][0]>n[0][0],!1===i?-1:1}},h=function(t,e){var n=t[0][0]<0?-Math.PI-t[0][0]:Math.PI-t[0][0],i=e[0][0]<0?-Math.PI-e[0][0]:Math.PI-e[0][0];return n>i?1:-1},f={top:function(t,e){return t[0]>e[0]?1:-1},right:p(!0),bottom:p(!0),left:h},m=function(t,e){return t.sort(e)},v=function(t,e){var n=c.getCachedData(t),i=n.s,s=n.o,l=function(e,n,i,s,l,r,c){if(s.length>0)for(var u=m(s,f[e]),p="right"===e||"top"===e,h=d(e,n,i,u,l,r,p),v=function(t,e){a[t.id]=[e[0],e[1],e[2],e[3]],o[t.id]=c},g=0;g<h.length;g++){var b=h[g][4],y=b.endpoints[0].elementId===t,_=b.endpoints[1].elementId===t;y&&v(b.endpoints[0],h[g]),_&&v(b.endpoints[1],h[g])}};l("bottom",i,[s.left,s.top],e.bottom,!0,1,[0,1]),l("top",i,[s.left,s.top],e.top,!0,0,[0,-1]),l("left",i,[s.left,s.top],e.left,!1,0,[-1,0]),l("right",i,[s.left,s.top],e.right,!1,1,[1,0])};this.reset=function(){i={},s={},r={}},this.addFloatingConnection=function(t,e){u[t]=e},this.removeFloatingConnection=function(t){delete u[t]},this.newConnection=function(t){var i=t.sourceId,a=t.targetId,o=t.endpoints,l=!0,r=function(r,c,u,d,p){i===a&&u.isContinuous&&(t._jsPlumb.instance.removeElement(o[1].canvas),l=!1),e.addToList(s,d,[p,c,u.constructor===n.DynamicAnchor])};r(0,o[0],o[0].anchor,a,t),l&&r(1,o[1],o[1].anchor,i,t)};var g=function(t){(function(t,n){if(t){var i=function(t){return t[4]===n};e.removeWithFunction(t.top,i),e.removeWithFunction(t.left,i),e.removeWithFunction(t.bottom,i),e.removeWithFunction(t.right,i)}})(r[t.elementId],t.id)};this.connectionDetached=function(t,n){var i=t.connection||t,a=t.sourceId,o=t.targetId,r=i.endpoints,c=function(t,n,i,a,o){e.removeWithFunction(s[a],(function(t){return t[0].id===o.id}))};c(1,r[1],r[1].anchor,a,i),c(0,r[0],r[0].anchor,o,i),i.floatingId&&(c(i.floatingIndex,i.floatingEndpoint,i.floatingEndpoint.anchor,i.floatingId,i),g(i.floatingEndpoint)),g(i.endpoints[0]),g(i.endpoints[1]),n||(l.redraw(i.sourceId),i.targetId!==i.sourceId&&l.redraw(i.targetId))},this.add=function(t,n){e.addToList(i,n,t)},this.changeId=function(t,e){s[e]=s[t],i[e]=i[t],delete s[t],delete i[t]},this.getConnectionsFor=function(t){return s[t]||[]},this.getEndpointsFor=function(t){return i[t]||[]},this.deleteEndpoint=function(t){e.removeWithFunction(i[t.elementId],(function(e){return e.id===t.id})),g(t)},this.clearFor=function(t){delete i[t],i[t]=[]};var b=function(n,i,a,o,s,l,r,c,u,d,p,h){var f,m,v=-1,g=-1,b=o.endpoints[r],y=b.id,_=[1,0][r],x=[[i,a],o,s,l,y],w=n[u],C=b._continuousAnchorEdge?n[b._continuousAnchorEdge]:null;if(C){var k=e.findWithFunction(C,(function(t){return t[4]===y}));if(-1!==k)for(C.splice(k,1),f=0;f<C.length;f++)m=C[f][1],e.addWithFunction(p,m,(function(t){return t.id===m.id})),e.addWithFunction(h,C[f][1].endpoints[r],(function(t){return t.id===m.endpoints[r].id})),e.addWithFunction(h,C[f][1].endpoints[_],(function(t){return t.id===m.endpoints[_].id}))}for(f=0;f<w.length;f++)m=w[f][1],1===t.idx&&w[f][3]===l&&-1===g&&(g=f),e.addWithFunction(p,m,(function(t){return t.id===m.id})),e.addWithFunction(h,w[f][1].endpoints[r],(function(t){return t.id===m.endpoints[r].id})),e.addWithFunction(h,w[f][1].endpoints[_],(function(t){return t.id===m.endpoints[_].id}));if(-1!==v)w[v]=x;else{var D=c?-1!==g?g:0:w.length;w.splice(D,0,x)}b._continuousAnchorEdge=u};this.updateOtherEndpoint=function(t,i,a,o){var l=e.findWithFunction(s[t],(function(t){return t[0].id===o.id})),r=e.findWithFunction(s[i],(function(t){return t[0].id===o.id}));-1!==l&&(s[t][l][0]=o,s[t][l][1]=o.endpoints[1],s[t][l][2]=o.endpoints[1].anchor.constructor===n.DynamicAnchor),r>-1&&(s[i].splice(r,1),e.addToList(s,a,[o,o.endpoints[0],o.endpoints[0].anchor.constructor===n.DynamicAnchor])),o.updateConnectedClass()},this.sourceChanged=function(t,i,a,o){if(t!==i){a.sourceId=i,a.source=o,e.removeWithFunction(s[t],(function(t){return t[0].id===a.id}));var l=e.findWithFunction(s[a.targetId],(function(t){return t[0].id===a.id}));l>-1&&(s[a.targetId][l][0]=a,s[a.targetId][l][1]=a.endpoints[0],s[a.targetId][l][2]=a.endpoints[0].anchor.constructor===n.DynamicAnchor),e.addToList(s,i,[a,a.endpoints[1],a.endpoints[1].anchor.constructor===n.DynamicAnchor]),a.endpoints[1].anchor.isContinuous&&(a.source===a.target?a._jsPlumb.instance.removeElement(a.endpoints[1].canvas):null==a.endpoints[1].canvas.parentNode&&a._jsPlumb.instance.appendElement(a.endpoints[1].canvas)),a.updateConnectedClass()}},this.rehomeEndpoint=function(t,e,n){var a=i[e]||[],o=c.getId(n);if(o!==e){var s=a.indexOf(t);if(s>-1){var r=a.splice(s,1)[0];l.add(r,o)}}for(var u=0;u<t.connections.length;u++)t.connections[u].sourceId===e?l.sourceChanged(e,t.elementId,t.connections[u],t.element):t.connections[u].targetId===e&&(t.connections[u].targetId=t.elementId,t.connections[u].target=t.element,l.updateOtherEndpoint(t.connections[u].sourceId,e,t.elementId,t.connections[u]))},this.redraw=function(t,a,o,l,d,p){if(!c.isSuspendDrawing()){var h=i[t]||[],f=s[t]||[],m=[],g=[],y=[];o=o||c.timestamp(),l=l||{left:0,top:0},a&&(a={left:a.left+l.left,top:a.top+l.top});for(var _=c.updateOffset({elId:t,offset:a,recalc:!1,timestamp:o}),x={},w=0;w<f.length;w++){var C=f[w][0],k=C.sourceId,D=C.targetId,S=C.endpoints[0].anchor.isContinuous,P=C.endpoints[1].anchor.isContinuous;if(S||P){var E=k+"_"+D,j=x[E],L=C.sourceId===t?1:0;S&&!r[k]&&(r[k]={top:[],right:[],bottom:[],left:[]}),P&&!r[D]&&(r[D]={top:[],right:[],bottom:[],left:[]}),t!==D&&c.updateOffset({elId:D,timestamp:o}),t!==k&&c.updateOffset({elId:k,timestamp:o});var T=c.getCachedData(D),I=c.getCachedData(k);D===k&&(S||P)?(b(r[k],-Math.PI/2,0,C,!1,D,0,!1,"top",k,m,g),b(r[D],-Math.PI/2,0,C,!1,k,1,!1,"top",D,m,g)):(j||(j=this.calculateOrientation(k,D,I.o,T.o,C.endpoints[0].anchor,C.endpoints[1].anchor,C),x[E]=j),S&&b(r[k],j.theta,0,C,!1,D,0,!1,j.a[0],k,m,g),P&&b(r[D],j.theta2,-1,C,!0,k,1,!0,j.a[1],D,m,g)),S&&e.addWithFunction(y,k,(function(t){return t===k})),P&&e.addWithFunction(y,D,(function(t){return t===D})),e.addWithFunction(m,C,(function(t){return t.id===C.id})),(S&&0===L||P&&1===L)&&e.addWithFunction(g,C.endpoints[L],(function(t){return t.id===C.endpoints[L].id}))}}for(w=0;w<h.length;w++)0===h[w].connections.length&&h[w].anchor.isContinuous&&(r[t]||(r[t]={top:[],right:[],bottom:[],left:[]}),b(r[t],-Math.PI/2,0,{endpoints:[h[w],h[w]],paint:function(){}},!1,t,0,!1,h[w].anchor.getDefaultFace(),t,m,g),e.addWithFunction(y,t,(function(e){return e===t})));for(w=0;w<y.length;w++)v(y[w],r[y[w]]);for(w=0;w<h.length;w++)h[w].paint({timestamp:o,offset:_,dimensions:_.s,recalc:!0!==p});for(w=0;w<g.length;w++){var O=c.getCachedData(g[w].elementId);g[w].paint({timestamp:null,offset:O,dimensions:O.s})}for(w=0;w<f.length;w++){var $=f[w][1];if($.anchor.constructor===n.DynamicAnchor){$.paint({elementWithPrecedence:t,timestamp:o}),e.addWithFunction(m,f[w][0],(function(t){return t.id===f[w][0].id}));for(var F=0;F<$.connections.length;F++)$.connections[F]!==f[w][0]&&e.addWithFunction(m,$.connections[F],(function(t){return t.id===$.connections[F].id}))}else e.addWithFunction(m,f[w][0],(function(t){return t.id===f[w][0].id}))}var A=u[t];for(A&&A.paint({timestamp:o,recalc:!1,elId:t}),w=0;w<m.length;w++)m[w].paint({elId:t,timestamp:null,recalc:!1,clearEdits:d})}};var y=function(t){e.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var n=t.faces||["top","right","bottom","left"],i=!(!1===t.clockwise),s={},l={top:"bottom",right:"left",left:"right",bottom:"top"},r={top:"right",right:"bottom",left:"top",bottom:"left"},c={top:"left",right:"top",left:"bottom",bottom:"right"},u=i?r:c,d=i?c:r,p=t.cssClass||"",h=null,f=null,m=["left","right"],v=["top","bottom"],g=null,b=0;b<n.length;b++)s[n[b]]=!0;this.getDefaultFace=function(){return 0===n.length?"top":n[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(t){return s[t]?t:s[l[t]]?l[t]:s[u[t]]?u[t]:s[d[t]]?d[t]:t},this.isEdgeSupported=function(t){return null==g?null==f?!0===s[t]:f===t:-1!==g.indexOf(t)},this.setCurrentFace=function(t,e){h=t,e&&null!=f&&(f=h)},this.getCurrentFace=function(){return h},this.getSupportedFaces=function(){var t=[];for(var e in s)s[e]&&t.push(e);return t},this.lock=function(){f=h},this.unlock=function(){f=null},this.isLocked=function(){return null!=f},this.lockCurrentAxis=function(){null!=h&&(g="left"===h||"right"===h?m:v)},this.unlockCurrentAxis=function(){g=null},this.compute=function(t){return a[t.element.id]||[0,0]},this.getCurrentLocation=function(t){return a[t.element.id]||[0,0]},this.getOrientation=function(t){return o[t.id]||[0,0]},this.getCssClass=function(){return p}};c.continuousAnchorFactory={get:function(t){return new y(t)},clear:function(t){delete a[t]}}},n.AnchorManager.prototype.calculateOrientation=function(t,e,n,i,a,o){var s={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},l=["left","top","right","bottom"];if(t===e)return{orientation:s.IDENTITY,a:["top","top"]};var r=Math.atan2(i.centery-n.centery,i.centerx-n.centerx),c=Math.atan2(n.centery-i.centery,n.centerx-i.centerx),u=[],d={};(function(t,e){for(var n=0;n<t.length;n++)d[t[n]]={left:[e[n].left,e[n].centery],right:[e[n].right,e[n].centery],top:[e[n].centerx,e[n].top],bottom:[e[n].centerx,e[n].bottom]}})(["source","target"],[n,i]);for(var p=0;p<l.length;p++)for(var h=0;h<l.length;h++)u.push({source:l[p],target:l[h],dist:Biltong.lineLength(d.source[l[p]],d.target[l[h]])});u.sort((function(t,e){return t.dist<e.dist?-1:t.dist>e.dist?1:0}));for(var f=u[0].source,m=u[0].target,v=0;v<u.length;v++)if(f=!a.isContinuous||a.isEdgeSupported(u[v].source)?u[v].source:null,m=!o.isContinuous||o.isEdgeSupported(u[v].target)?u[v].target:null,null!=f&&null!=m)break;return a.isContinuous&&a.setCurrentFace(f),o.isContinuous&&o.setCurrentFace(m),{a:[f,m],theta:r,theta2:c}},n.Anchor=function(t){this.x=t.x||0,this.y=t.y||0,this.elementId=t.elementId,this.cssClass=t.cssClass||"",this.userDefinedLocation=null,this.orientation=t.orientation||[0,0],this.lastReturnValue=null,this.offsets=t.offsets||[0,0],this.timestamp=null;var n=!1!==t.relocatable;this.isRelocatable=function(){return n},this.setRelocatable=function(t){n=t};var i=!1!==t.snapOnRelocate;this.isSnapOnRelocate=function(){return i};var a=!1;this.lock=function(){a=!0},this.unlock=function(){a=!1},this.isLocked=function(){return a},e.EventGenerator.apply(this),this.compute=function(t){var e=t.xy,n=t.wh,i=t.timestamp;return t.clearUserDefinedLocation&&(this.userDefinedLocation=null),i&&i===this.timestamp||(null!=this.userDefinedLocation?this.lastReturnValue=this.userDefinedLocation:this.lastReturnValue=[e[0]+this.x*n[0]+this.offsets[0],e[1]+this.y*n[1]+this.offsets[1],this.x,this.y],this.timestamp=i),this.lastReturnValue},this.getCurrentLocation=function(t){return t=t||{},null==this.lastReturnValue||null!=t.timestamp&&this.timestamp!==t.timestamp?this.compute(t):this.lastReturnValue},this.setPosition=function(t,e,n,i,o){a&&!o||(this.x=t,this.y=e,this.orientation=[n,i],this.lastReturnValue=null)}},e.extend(n.Anchor,e.EventGenerator,{equals:function(t){if(!t)return!1;var e=t.getOrientation(),n=this.getOrientation();return this.x===t.x&&this.y===t.y&&this.offsets[0]===t.offsets[0]&&this.offsets[1]===t.offsets[1]&&n[0]===e[0]&&n[1]===e[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(t){this.userDefinedLocation=t},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),n.FloatingAnchor=function(t){n.Anchor.apply(this,arguments);var e=t.reference,i=t.referenceCanvas,a=n.getSize(i),o=0,s=0,l=null,r=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(t){var e=t.xy,n=[e[0]+a[0]/2,e[1]+a[1]/2];return r=n,n},this.getOrientation=function(t){if(l)return l;var n=e.getOrientation(t);return[Math.abs(n[0])*o*-1,Math.abs(n[1])*s*-1]},this.over=function(t,e){l=t.getOrientation(e)},this.out=function(){l=null},this.getCurrentLocation=function(t){return null==r?this.compute(t):r}},e.extend(n.FloatingAnchor,n.Anchor);var i=function(t,e,i){return t.constructor===n.Anchor?t:e.makeAnchor(t,i,e)};n.DynamicAnchor=function(t){n.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=t.elementId,this.jsPlumbInstance=t.jsPlumbInstance;for(var e=0;e<t.anchors.length;e++)this.anchors[e]=i(t.anchors[e],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var a=this.anchors.length>0?this.anchors[0]:null,o=a,s=this,l=function(t,e,n,i,a){var o=i[0]+t.x*a[0],s=i[1]+t.y*a[1],l=i[0]+a[0]/2,r=i[1]+a[1]/2;return Math.sqrt(Math.pow(e-o,2)+Math.pow(n-s,2))+Math.sqrt(Math.pow(l-o,2)+Math.pow(r-s,2))},r=t.selector||function(t,e,n,i,a){for(var o=n[0]+i[0]/2,s=n[1]+i[1]/2,r=-1,c=1/0,u=0;u<a.length;u++){var d=l(a[u],o,s,t,e);d<c&&(r=u+0,c=d)}return a[r]};this.compute=function(t){var e=t.xy,n=t.wh,i=t.txy,l=t.twh;this.timestamp=t.timestamp;var c=s.getUserDefinedLocation();return null!=c?c:(this.isLocked()||null==i||null==l||(t.timestamp=null,a=r(e,n,i,l,this.anchors),this.x=a.x,this.y=a.y,a!==o&&this.fire("anchorChanged",a),o=a),a.compute(t))},this.getCurrentLocation=function(t){return this.getUserDefinedLocation()||(null!=a?a.getCurrentLocation(t):null)},this.getOrientation=function(t){return null!=a?a.getOrientation(t):[0,0]},this.over=function(t,e){null!=a&&a.over(t,e)},this.out=function(){null!=a&&a.out()},this.setAnchor=function(t){a=t},this.getCssClass=function(){return a&&a.getCssClass()||""},this.setAnchorCoordinates=function(t){var e=jsPlumbUtil.findWithFunction(this.anchors,(function(e){return e.x===t[0]&&e.y===t[1]}));return-1!==e&&(this.setAnchor(this.anchors[e]),!0)}},e.extend(n.DynamicAnchor,n.Anchor);var a=function(t,e,i,a,o,s){n.Anchors[o]=function(n){var l=n.jsPlumbInstance.makeAnchor([t,e,i,a,0,0],n.elementId,n.jsPlumbInstance);return l.type=o,s&&s(l,n),l}};a(.5,0,0,-1,"TopCenter"),a(.5,1,0,1,"BottomCenter"),a(0,.5,-1,0,"LeftMiddle"),a(1,.5,1,0,"RightMiddle"),a(.5,0,0,-1,"Top"),a(.5,1,0,1,"Bottom"),a(0,.5,-1,0,"Left"),a(1,.5,1,0,"Right"),a(.5,.5,0,0,"Center"),a(1,0,0,-1,"TopRight"),a(1,1,0,1,"BottomRight"),a(0,0,0,-1,"TopLeft"),a(0,1,0,1,"BottomLeft"),n.Defaults.DynamicAnchors=function(t){return t.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],t.elementId,t.jsPlumbInstance)},n.Anchors.AutoDefault=function(t){var e=t.jsPlumbInstance.makeDynamicAnchor(n.Defaults.DynamicAnchors(t));return e.type="AutoDefault",e};var o=function(t,e){n.Anchors[t]=function(n){var i=n.jsPlumbInstance.makeAnchor(["Continuous",{faces:e}],n.elementId,n.jsPlumbInstance);return i.type=t,i}};n.Anchors.Continuous=function(t){return t.jsPlumbInstance.continuousAnchorFactory.get(t)},o("ContinuousLeft",["left"]),o("ContinuousTop",["top"]),o("ContinuousBottom",["bottom"]),o("ContinuousRight",["right"]),a(0,0,0,0,"Assign",(function(t,e){var n=e.position||"Fixed";t.positionFinder=n.constructor===String?e.jsPlumbInstance.AnchorPositionFinders[n]:n,t.constructorParams=e})),t.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(t,e,n){return[(t.left-e.left)/n[0],(t.top-e.top)/n[1]]},Grid:function(t,e,n,i){var a=t.left-e.left,o=t.top-e.top,s=n[0]/i.grid[0],l=n[1]/i.grid[1],r=Math.floor(a/s),c=Math.floor(o/l);return[(r*s+s/2)/n[0],(c*l+l/2)/n[1]]}},n.Anchors.Perimeter=function(t){t=t||{};var e=t.anchorCount||60,n=t.shape;if(!n)throw new Error("no shape supplied to Perimeter Anchor type");var i=function(){for(var t=.5,n=2*Math.PI/e,i=0,a=[],o=0;o<e;o++){var s=t+t*Math.sin(i),l=t+t*Math.cos(i);a.push([s,l,0,0]),i+=n}return a},a=function(t){for(var n=e/t.length,i=[],a=function(t,a,o,s,l,r,c){n=e*l;for(var u=(o-t)/n,d=(s-a)/n,p=0;p<n;p++)i.push([t+u*p,a+d*p,null==r?0:r,null==c?0:c])},o=0;o<t.length;o++)a.apply(null,t[o]);return i},o=function(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n][0],t[n][1],t[n][2],t[n][3],1/t.length,t[n][4],t[n][5]]);return a(e)},s=function(){return o([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},l={Circle:i,Ellipse:i,Diamond:function(){return o([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:s,Square:s,Triangle:function(){return o([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(t){for(var e=t.points,n=[],i=0,o=0;o<e.length-1;o++){var s=Math.sqrt(Math.pow(e[o][2]-e[o][0])+Math.pow(e[o][3]-e[o][1]));i+=s,n.push([e[o][0],e[o][1],e[o+1][0],e[o+1][1],s])}for(var l=0;l<n.length;l++)n[l][4]=n[l][4]/i;return a(n)}},r=function(t,e){for(var n=[],i=e/180*Math.PI,a=0;a<t.length;a++){var o=t[a][0]-.5,s=t[a][1]-.5;n.push([o*Math.cos(i)-s*Math.sin(i)+.5,o*Math.sin(i)+s*Math.cos(i)+.5,t[a][2],t[a][3]])}return n};if(!l[n])throw new Error("Shape ["+n+"] is unknown by Perimeter Anchor type");var c=l[n](t);t.rotation&&(c=r(c,t.rotation));var u=t.jsPlumbInstance.makeDynamicAnchor(c);return u.type="Perimeter",u}}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i=t.Biltong;e.Segments={AbstractSegment:function(t){this.params=t,this.findClosestPointOnPath=function(t,e){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(t.x1,t.x2),minY:Math.min(t.y1,t.y2),maxX:Math.max(t.x1,t.x2),maxY:Math.max(t.y1,t.y2)}},this.lineIntersection=function(t,e,n,i){return[]},this.boxIntersection=function(t,e,n,i){var a=[];return a.push.apply(a,this.lineIntersection(t,e,t+n,e)),a.push.apply(a,this.lineIntersection(t+n,e,t+n,e+i)),a.push.apply(a,this.lineIntersection(t+n,e+i,t,e+i)),a.push.apply(a,this.lineIntersection(t,e+i,t,e)),a},this.boundingBoxIntersection=function(t){return this.boxIntersection(t.x,t.y,t.w,t.y)}},Straight:function(t){e.Segments.AbstractSegment.apply(this,arguments);var n,a,o,s,l,r,c,u=function(){n=Math.sqrt(Math.pow(l-s,2)+Math.pow(c-r,2)),a=i.gradient({x:s,y:r},{x:l,y:c}),o=-1/a};this.type="Straight",this.getLength=function(){return n},this.getGradient=function(){return a},this.getCoordinates=function(){return{x1:s,y1:r,x2:l,y2:c}},this.setCoordinates=function(t){s=t.x1,r=t.y1,l=t.x2,c=t.y2,u()},this.setCoordinates({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}),this.getBounds=function(){return{minX:Math.min(s,l),minY:Math.min(r,c),maxX:Math.max(s,l),maxY:Math.max(r,c)}},this.pointOnPath=function(t,e){if(0!==t||e){if(1!==t||e){var a=e?t>0?t:n+t:t*n;return i.pointOnLine({x:s,y:r},{x:l,y:c},a)}return{x:l,y:c}}return{x:s,y:r}},this.gradientAtPoint=function(t){return a},this.pointAlongPathFrom=function(t,e,n){var a=this.pointOnPath(t,n),o=e<=0?{x:s,y:r}:{x:l,y:c};return e<=0&&Math.abs(e)>1&&(e*=-1),i.pointOnLine(a,o,e)};var d=function(t,e,n){return n>=Math.min(t,e)&&n<=Math.max(t,e)},p=function(t,e,n){return Math.abs(n-t)<Math.abs(n-e)?t:e};this.findClosestPointOnPath=function(t,e){var u={d:1/0,x:null,y:null,l:null,x1:s,x2:l,y1:r,y2:c};if(0===a)u.y=r,u.x=d(s,l,t)?t:p(s,l,t);else if(a===1/0||a===-1/0)u.x=s,u.y=d(r,c,e)?e:p(r,c,e);else{var h=r-a*s,f=e-o*t,m=(f-h)/(a-o),v=a*m+h;u.x=d(s,l,m)?m:p(s,l,m),u.y=d(r,c,v)?v:p(r,c,v)}var g=i.lineLength([u.x,u.y],[s,r]);return u.d=i.lineLength([t,e],[u.x,u.y]),u.l=g/n,u};var h=function(t,e,n){return n>e?e<=t&&t<=n:e>=t&&t>=n},f=h;this.lineIntersection=function(t,e,n,o){var u=Math.abs(i.gradient({x:t,y:e},{x:n,y:o})),d=Math.abs(a),p=d===1/0?s:r-d*s,h=[],m=u===1/0?t:e-u*t;if(u!==d)if(u===1/0&&0===d)f(t,s,l)&&f(r,e,o)&&(h=[t,r]);else if(0===u&&d===1/0)f(e,r,c)&&f(s,t,n)&&(h=[s,e]);else{var v,g;u===1/0?(v=t,f(v,s,l)&&(g=d*t+p,f(g,e,o)&&(h=[v,g]))):0===u?(g=e,f(g,r,c)&&(v=(e-p)/d,f(v,t,n)&&(h=[v,g]))):(v=(m-p)/(d-u),g=d*v+p,f(v,s,l)&&f(g,r,c)&&(h=[v,g]))}return h},this.boxIntersection=function(t,e,n,i){var a=[];return a.push.apply(a,this.lineIntersection(t,e,t+n,e)),a.push.apply(a,this.lineIntersection(t+n,e,t+n,e+i)),a.push.apply(a,this.lineIntersection(t+n,e+i,t,e+i)),a.push.apply(a,this.lineIntersection(t,e+i,t,e)),a},this.boundingBoxIntersection=function(t){return this.boxIntersection(t.x,t.y,t.w,t.h)}},Arc:function(t){e.Segments.AbstractSegment.apply(this,arguments);var n=function(e,n){return i.theta([t.cx,t.cy],[e,n])},a=function(t,e){if(t.anticlockwise){var n=t.startAngle<t.endAngle?t.startAngle+o:t.startAngle,i=Math.abs(n-t.endAngle);return n-i*e}var a=t.endAngle<t.startAngle?t.endAngle+o:t.endAngle,s=Math.abs(a-t.startAngle);return t.startAngle+s*e},o=2*Math.PI;this.radius=t.r,this.anticlockwise=t.ac,this.type="Arc",t.startAngle&&t.endAngle?(this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.x1=t.cx+this.radius*Math.cos(t.startAngle),this.y1=t.cy+this.radius*Math.sin(t.startAngle),this.x2=t.cx+this.radius*Math.cos(t.endAngle),this.y2=t.cy+this.radius*Math.sin(t.endAngle)):(this.startAngle=n(t.x1,t.y1),this.endAngle=n(t.x2,t.y2),this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2),this.endAngle<0&&(this.endAngle+=o),this.startAngle<0&&(this.startAngle+=o);var s=this.endAngle<this.startAngle?this.endAngle+o:this.endAngle;this.sweep=Math.abs(s-this.startAngle),this.anticlockwise&&(this.sweep=o-this.sweep);var l=2*Math.PI*this.radius,r=this.sweep/o,c=l*r;this.getLength=function(){return c},this.getBounds=function(){return{minX:t.cx-t.r,maxX:t.cx+t.r,minY:t.cy-t.r,maxY:t.cy+t.r}};var u=1e-10,d=function(t){var e=Math.floor(t),n=Math.ceil(t);return t-e<u?e:n-t<u?n:t};this.pointOnPath=function(e,n){if(0===e)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1===e)return{x:this.x2,y:this.y2,theta:this.endAngle};n&&(e/=c);var i=a(this,e),o=t.cx+t.r*Math.cos(i),s=t.cy+t.r*Math.sin(i);return{x:d(o),y:d(s),theta:i}},this.gradientAtPoint=function(e,n){var a=this.pointOnPath(e,n),o=i.normal([t.cx,t.cy],[a.x,a.y]);return this.anticlockwise||o!==1/0&&o!==-1/0||(o*=-1),o},this.pointAlongPathFrom=function(e,n,i){var a=this.pointOnPath(e,i),o=n/l*2*Math.PI,s=this.anticlockwise?-1:1,r=a.theta+s*o,c=t.cx+this.radius*Math.cos(r),u=t.cy+this.radius*Math.sin(r);return{x:c,y:u}}},Bezier:function(n){this.curve=[{x:n.x1,y:n.y1},{x:n.cp1x,y:n.cp1y},{x:n.cp2x,y:n.cp2y},{x:n.x2,y:n.y2}];e.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(n.x1,n.x2,n.cp1x,n.cp2x),minY:Math.min(n.y1,n.y2,n.cp1y,n.cp2y),maxX:Math.max(n.x1,n.x2,n.cp1x,n.cp2x),maxY:Math.max(n.y1,n.y2,n.cp1y,n.cp2y)},this.type="Bezier";var i=function(e,n,i){return i&&(n=t.jsBezier.locationAlongCurveFrom(e,n>0?0:1,n)),n};this.pointOnPath=function(e,n){return e=i(this.curve,e,n),t.jsBezier.pointOnCurve(this.curve,e)},this.gradientAtPoint=function(e,n){return e=i(this.curve,e,n),t.jsBezier.gradientAtPoint(this.curve,e)},this.pointAlongPathFrom=function(e,n,a){return e=i(this.curve,e,a),t.jsBezier.pointAlongCurveFrom(this.curve,e,n)},this.getLength=function(){return t.jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(e,n){var i=t.jsBezier.nearestPointOnCurve({x:e,y:n},this.curve);return{d:Math.sqrt(Math.pow(i.point.x-e,2)+Math.pow(i.point.y-n,2)),x:i.point.x,y:i.point.y,l:1-i.location,s:this}},this.lineIntersection=function(e,n,i,a){return t.jsBezier.lineIntersection(e,n,i,a,this.curve)}}},e.SegmentRenderer={getPath:function(t,e){return{Straight:function(e){var n=t.getCoordinates();return(e?"M "+n.x1+" "+n.y1+" ":"")+"L "+n.x2+" "+n.y2},Bezier:function(e){var n=t.params;return(e?"M "+n.x2+" "+n.y2+" ":"")+"C "+n.cp2x+" "+n.cp2y+" "+n.cp1x+" "+n.cp1y+" "+n.x1+" "+n.y1},Arc:function(e){var n=t.params,i=t.sweep>Math.PI?1:0,a=t.anticlockwise?0:1;return(e?"M"+t.x1+" "+t.y1+" ":"")+"A "+t.radius+" "+n.r+" 0 "+i+","+a+" "+t.x2+" "+t.y2}}[t.type](e)}};var a=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};e.Connectors.AbstractConnector=function(t){a.apply(this,arguments);var o=[],s=0,l=[],r=[],c=t.stub||0,u=n.isArray(c)?c[0]:c,d=n.isArray(c)?c[1]:c,p=t.gap||0,h=n.isArray(p)?p[0]:p,f=n.isArray(p)?p[1]:p,m=null,v=null;this.getPathData=function(){for(var t="",n=0;n<o.length;n++)t+=e.SegmentRenderer.getPath(o[n],0===n),t+=" ";return t},this.findSegmentForPoint=function(t,e){for(var n={d:1/0,s:null,x:null,y:null,l:null},i=0;i<o.length;i++){var a=o[i].findClosestPointOnPath(t,e);a.d<n.d&&(n.d=a.d,n.l=a.l,n.x=a.x,n.y=a.y,n.s=o[i],n.x1=a.x1,n.x2=a.x2,n.y1=a.y1,n.y2=a.y2,n.index=i,n.connectorLocation=l[i][0]+a.l*(l[i][1]-l[i][0]))}return n},this.lineIntersection=function(t,e,n,i){for(var a=[],s=0;s<o.length;s++)a.push.apply(a,o[s].lineIntersection(t,e,n,i));return a},this.boxIntersection=function(t,e,n,i){for(var a=[],s=0;s<o.length;s++)a.push.apply(a,o[s].boxIntersection(t,e,n,i));return a},this.boundingBoxIntersection=function(t){for(var e=[],n=0;n<o.length;n++)e.push.apply(e,o[n].boundingBoxIntersection(t));return e};var g=function(){for(var t=0,e=0;e<o.length;e++){var n=o[e].getLength();r[e]=n/s,l[e]=[t,t+=n/s]}},b=function(t,e){e&&(t=t>0?t/s:(s+t)/s);for(var n=l.length-1,i=1,a=0;a<l.length;a++)if(l[a][1]>=t){n=a,i=1===t?1:0===t?0:(t-l[a][0])/r[a];break}return{segment:o[n],proportion:i,index:n}},y=function(t,n,i){if(i.x1!==i.x2||i.y1!==i.y2){var a=new e.Segments[n](i);o.push(a),s+=a.getLength(),t.updateBounds(a)}},_=function(){s=o.length=l.length=r.length=0};this.setSegments=function(t){m=[],s=0;for(var e=0;e<t.length;e++)m.push(t[e]),s+=t[e].getLength()},this.getLength=function(){return s};var x=function(t){this.strokeWidth=t.strokeWidth;var e=i.quadrant(t.sourcePos,t.targetPos),n=t.targetPos[0]<t.sourcePos[0],a=t.targetPos[1]<t.sourcePos[1],o=t.strokeWidth||1,s=t.sourceEndpoint.anchor.getOrientation(t.sourceEndpoint),l=t.targetEndpoint.anchor.getOrientation(t.targetEndpoint),r=n?t.targetPos[0]:t.sourcePos[0],c=a?t.targetPos[1]:t.sourcePos[1],p=Math.abs(t.targetPos[0]-t.sourcePos[0]),m=Math.abs(t.targetPos[1]-t.sourcePos[1]);if(0===s[0]&&0===s[1]||0===l[0]&&0===l[1]){var v=p>m?0:1,g=[1,0][v];s=[],l=[],s[v]=t.sourcePos[v]>t.targetPos[v]?-1:1,l[v]=t.sourcePos[v]>t.targetPos[v]?1:-1,s[g]=0,l[g]=0}var b=n?p+h*s[0]:h*s[0],y=a?m+h*s[1]:h*s[1],_=n?f*l[0]:p+f*l[0],x=a?f*l[1]:m+f*l[1],w=s[0]*l[0]+s[1]*l[1],C={sx:b,sy:y,tx:_,ty:x,lw:o,xSpan:Math.abs(_-b),ySpan:Math.abs(x-y),mx:(b+_)/2,my:(y+x)/2,so:s,to:l,x:r,y:c,w:p,h:m,segment:e,startStubX:b+s[0]*u,startStubY:y+s[1]*u,endStubX:_+l[0]*d,endStubY:x+l[1]*d,isXGreaterThanStubTimes2:Math.abs(b-_)>u+d,isYGreaterThanStubTimes2:Math.abs(y-x)>u+d,opposite:-1===w,perpendicular:0===w,orthogonal:1===w,sourceAxis:0===s[0]?"y":"x",points:[r,c,p,m,b,y,_,x],stubs:[u,d]};return C.anchorOrientation=C.opposite?"opposite":C.orthogonal?"orthogonal":"perpendicular",C};this.getSegments=function(){return o},this.updateBounds=function(t){var e=t.getBounds();this.bounds.minX=Math.min(this.bounds.minX,e.minX),this.bounds.maxX=Math.max(this.bounds.maxX,e.maxX),this.bounds.minY=Math.min(this.bounds.minY,e.minY),this.bounds.maxY=Math.max(this.bounds.maxY,e.maxY)};return this.pointOnPath=function(t,e){var n=b(t,e);return n.segment&&n.segment.pointOnPath(n.proportion,!1)||[0,0]},this.gradientAtPoint=function(t,e){var n=b(t,e);return n.segment&&n.segment.gradientAtPoint(n.proportion,!1)||0},this.pointAlongPathFrom=function(t,e,n){var i=b(t,n);return i.segment&&i.segment.pointAlongPathFrom(i.proportion,e,!1)||[0,0]},this.compute=function(t){v=x.call(this,t),_(),this._compute(v,t),this.x=v.points[0],this.y=v.points[1],this.w=v.points[2],this.h=v.points[3],this.segment=v.segment,g()},{addSegment:y,prepareCompute:x,sourceStub:u,targetStub:d,maxStub:Math.max(u,d),sourceGap:h,targetGap:f,maxGap:Math.max(h,f)}},n.extend(e.Connectors.AbstractConnector,a),e.Endpoints.AbstractEndpoint=function(t){a.apply(this,arguments);var e=this.compute=function(t,e,n,i){var a=this._compute.apply(this,arguments);return this.x=a[0],this.y=a[1],this.w=a[2],this.h=a[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,a};return{compute:e,cssClass:t.cssClass}},n.extend(e.Endpoints.AbstractEndpoint,a),e.Endpoints.Dot=function(t){this.type="Dot";e.Endpoints.AbstractEndpoint.apply(this,arguments);t=t||{},this.radius=t.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(t,e,n,i){this.radius=n.radius||this.radius;var a=t[0]-this.radius,o=t[1]-this.radius,s=2*this.radius,l=2*this.radius;if(n.stroke){var r=n.strokeWidth||1;a-=r,o-=r,s+=2*r,l+=2*r}return[a,o,s,l,this.radius]}},n.extend(e.Endpoints.Dot,e.Endpoints.AbstractEndpoint),e.Endpoints.Rectangle=function(t){this.type="Rectangle";e.Endpoints.AbstractEndpoint.apply(this,arguments);t=t||{},this.width=t.width||20,this.height=t.height||20,this._compute=function(t,e,n,i){var a=n.width||this.width,o=n.height||this.height,s=t[0]-a/2,l=t[1]-o/2;return[s,l,a,o]}},n.extend(e.Endpoints.Rectangle,e.Endpoints.AbstractEndpoint);var o=function(t){e.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};n.extend(o,e.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(t){this._jsPlumb.displayElements.push(t)}}),e.Endpoints.Image=function(i){this.type="Image",o.apply(this,arguments),e.Endpoints.AbstractEndpoint.apply(this,arguments);var a=i.onload,s=i.src||i.url,l=i.cssClass?" "+i.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=i.width,this._jsPlumb.heightToUse=i.height,this._jsPlumb.endpoint=i.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,a&&a(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(t,e){var n=t.constructor===String?t:t.src;a=e,this._jsPlumb.img.src=n,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(s,a),this._compute=function(t,e,n,i){return this.anchorPoint=t,this._jsPlumb.ready?[t[0]-this._jsPlumb.widthToUse/2,t[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=e.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+l),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(t,e,i){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var a=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,o=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;n.sizeElement(this.canvas,a,o,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(e,n){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(e,n):t.setTimeout(function(){this.paint(e,n)}.bind(this),200))}},n.extend(e.Endpoints.Image,[o,e.Endpoints.AbstractEndpoint],{cleanup:function(t){t&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),e.Endpoints.Blank=function(t){e.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank",o.apply(this,arguments),this._compute=function(t,e,n,i){return[t[0],t[1],10,0]};var i=t.cssClass?" "+t.cssClass:"";this.canvas=e.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+i),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(t,e){n.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},n.extend(e.Endpoints.Blank,[e.Endpoints.AbstractEndpoint,o],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),e.Endpoints.Triangle=function(t){this.type="Triangle",e.Endpoints.AbstractEndpoint.apply(this,arguments);var n=this;t=t||{},t.width=t.width||55,t.height=t.height||55,this.width=t.width,this.height=t.height,this._compute=function(t,e,i,a){var o=i.width||n.width,s=i.height||n.height,l=t[0]-o/2,r=t[1]-s/2;return[l,r,o,s]}};var s=e.Overlays.AbstractOverlay=function(t){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=t.component,this.loc=null==t.location?.5:t.location,this.endpointLoc=null==t.endpointLocation?[.5,.5]:t.endpointLocation,this.visible=!1!==t.visible};s.prototype={cleanup:function(t){t&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(t,e){},setVisible:function(t){this.visible=t,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(t){this.loc+=t,this.component.repaint()},setLocation:function(t){this.loc=t,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},e.Overlays.Arrow=function(t){this.type="Arrow",s.apply(this,arguments),this.isAppendedAtTopLevel=!1,t=t||{};var a=this;this.length=t.length||20,this.width=t.width||20,this.id=t.id,this.direction=(t.direction||1)<0?-1:1;var o=t.paintStyle||{"stroke-width":1},l=t.foldback||.623;this.computeMaxSize=function(){return 1.5*a.width},this.elementCreated=function(n,i){if(this.path=n,t.events)for(var a in t.events)e.on(n,a,t.events[a])},this.draw=function(t,e){var a,s,r,c,u;if(t.pointAlongPathFrom){if(n.isString(this.loc)||this.loc>1||this.loc<0){var d=parseInt(this.loc,10),p=this.loc<0?1:0;a=t.pointAlongPathFrom(p,d,!1),s=t.pointAlongPathFrom(p,d-this.direction*this.length/2,!1),r=i.pointOnLine(a,s,this.length)}else if(1===this.loc){if(a=t.pointOnPath(this.loc),s=t.pointAlongPathFrom(this.loc,-this.length),r=i.pointOnLine(a,s,this.length),-1===this.direction){var h=r;r=a,a=h}}else if(0===this.loc){if(r=t.pointOnPath(this.loc),s=t.pointAlongPathFrom(this.loc,this.length),a=i.pointOnLine(r,s,this.length),-1===this.direction){var f=r;r=a,a=f}}else a=t.pointAlongPathFrom(this.loc,this.direction*this.length/2),s=t.pointOnPath(this.loc),r=i.pointOnLine(a,s,this.length);c=i.perpendicularLineTo(a,r,this.width),u=i.pointOnLine(a,r,l*this.length);var m={hxy:a,tail:c,cxy:u},v=o.stroke||e.stroke,g=o.fill||e.stroke,b=o.strokeWidth||e.strokeWidth;return{component:t,d:m,"stroke-width":b,stroke:v,fill:g,minX:Math.min(a.x,c[0].x,c[1].x),maxX:Math.max(a.x,c[0].x,c[1].x),minY:Math.min(a.y,c[0].y,c[1].y),maxY:Math.max(a.y,c[0].y,c[1].y)}}return{component:t,minX:0,maxX:0,minY:0,maxY:0}}},n.extend(e.Overlays.Arrow,s,{updateFrom:function(t){this.length=t.length||this.length,this.width=t.width||this.width,this.direction=null!=t.direction?t.direction:this.direction,this.foldback=t.foldback||this.foldback},cleanup:function(){this.path&&this.canvas&&this.canvas.removeChild(this.path)}}),e.Overlays.PlainArrow=function(t){t=t||{};var n=e.extend(t,{foldback:1});e.Overlays.Arrow.call(this,n),this.type="PlainArrow"},n.extend(e.Overlays.PlainArrow,e.Overlays.Arrow),e.Overlays.Diamond=function(t){t=t||{};var n=t.length||40,i=e.extend(t,{length:n/2,foldback:2});e.Overlays.Arrow.call(this,i),this.type="Diamond"},n.extend(e.Overlays.Diamond,e.Overlays.Arrow);var l=function(t,e){return(null==t._jsPlumb.cachedDimensions||e)&&(t._jsPlumb.cachedDimensions=t.getDimensions()),t._jsPlumb.cachedDimensions},r=function(t){e.jsPlumbUIComponent.apply(this,arguments),s.apply(this,arguments);var i=this.fire;this.fire=function(){i.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=t.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=t.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=t.create,this._jsPlumb.initiallyInvisible=!1===t.visible,this.getElement=function(){if(null==this._jsPlumb.div){var n=this._jsPlumb.div=e.getElement(this._jsPlumb.create(this._jsPlumb.component));n.style.position="absolute",jsPlumb.addClass(n,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:t.cssClass?t.cssClass:"")),this._jsPlumb.instance.appendElement(n),this._jsPlumb.instance.getId(n),this.canvas=n;var i="translate(-50%, -50%)";n.style.webkitTransform=i,n.style.mozTransform=i,n.style.msTransform=i,n.style.oTransform=i,n.style.transform=i,n._jsPlumb=this,!1===t.visible&&(n.style.display="none")}return this._jsPlumb.div},this.draw=function(t,e,i){var a=l(this);if(null!=a&&2===a.length){var o={x:0,y:0};if(i)o={x:i[0],y:i[1]};else if(t.pointOnPath){var s=this.loc,r=!1;(n.isString(this.loc)||this.loc<0||this.loc>1)&&(s=parseInt(this.loc,10),r=!0),o=t.pointOnPath(s,r)}else{var c=this.loc.constructor===Array?this.loc:this.endpointLoc;o={x:c[0]*t.w,y:c[1]*t.h}}var u=o.x-a[0]/2,d=o.y-a[1]/2;return{component:t,d:{minx:u,miny:d,td:a,cxy:o},minX:u,maxX:u+a[0],minY:d,maxY:d+a[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};n.extend(r,[e.jsPlumbUIComponent,s],{getDimensions:function(){return[1,1]},setVisible:function(t){this._jsPlumb.div&&(this._jsPlumb.div.style.display=t?"block":"none",t&&this._jsPlumb.initiallyInvisible&&(l(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(t){t?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(t,e){null!=this._jsPlumb.div&&t.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var t=l(this);return Math.max(t[0],t[1])},paint:function(t,e){this._jsPlumb.initialised||(this.getElement(),t.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=t.component.x+t.d.minx+"px",this._jsPlumb.div.style.top=t.component.y+t.d.miny+"px"}}),e.Overlays.Custom=function(t){this.type="Custom",r.apply(this,arguments)},n.extend(e.Overlays.Custom,r),e.Overlays.GuideLines=function(){var t=this;t.length=50,t.strokeWidth=5,this.type="GuideLines",s.apply(this,arguments),e.jsPlumbUIComponent.apply(this,arguments),this.draw=function(e,n){var a=e.pointAlongPathFrom(t.loc,t.length/2),o=e.pointOnPath(t.loc),s=i.pointOnLine(a,o,t.length),l=i.perpendicularLineTo(a,s,40),r=i.perpendicularLineTo(s,a,20);return{connector:e,head:a,tail:s,headLine:r,tailLine:l,minX:Math.min(a.x,s.x,r[0].x,r[1].x),minY:Math.min(a.y,s.y,r[0].y,r[1].y),maxX:Math.max(a.x,s.x,r[0].x,r[1].x),maxY:Math.max(a.y,s.y,r[0].y,r[1].y)}}},e.Overlays.Label=function(t){this.labelStyle=t.labelStyle;this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var n=e.extend({create:function(){return e.createElement("div")}},t);if(e.Overlays.Custom.call(this,n),this.type="Label",this.label=t.label||"",this.labelText=null,this.labelStyle){var i=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",i.style.font=this.labelStyle.font,i.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(i.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var a=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";i.style.border=this.labelStyle.borderWidth+"px solid "+a}this.labelStyle.padding&&(i.style.padding=this.labelStyle.padding)}},n.extend(e.Overlays.Label,e.Overlays.Custom,{cleanup:function(t){t&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(t){this.label=t,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),r.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"===typeof this.label){var t=this.label(this);this.getElement().innerHTML=t.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(t){null!=t.label&&this.setLabel(t.label)}})}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumbUtil,n=t.jsPlumbInstance,i="jtk-group-collapsed",a="jtk-group-expanded",o="[jtk-group-content]",s="elementDraggable",l="stop",r="revert",c="_groupManager",u="_jsPlumbGroup",d="_jsPlumbGroupDrag",p="group:addMember",h="group:removeMember",f="group:add",m="group:remove",v="group:expand",g="group:collapse",b="groupDragStop",y="connectionMoved",_="internal.connectionDetached",x="removeAll",w="orphanAll",C="show",k="hide",D=function(t){var n={},o={},s={},l=this;function r(t){delete t.proxies;var n,i=o[t.id];null!=i&&(n=function(e){return e.id===t.id},e.removeWithFunction(i.connections.source,n),e.removeWithFunction(i.connections.target,n),delete o[t.id]),i=s[t.id],null!=i&&(n=function(e){return e.id===t.id},e.removeWithFunction(i.connections.source,n),e.removeWithFunction(i.connections.target,n),delete s[t.id])}function c(e,n){for(var i=e.getMembers(),a=0;a<i.length;a++)t[n?C:k](i[a],!0)}t.bind("connection",(function(t){null!=t.source[u]&&null!=t.target[u]&&t.source[u]===t.target[u]?(o[t.connection.id]=t.source[u],s[t.connection.id]=t.source[u]):(null!=t.source[u]&&(e.suggest(t.source[u].connections.source,t.connection),o[t.connection.id]=t.source[u]),null!=t.target[u]&&(e.suggest(t.target[u].connections.target,t.connection),s[t.connection.id]=t.target[u]))})),t.bind(_,(function(t){r(t.connection)})),t.bind(y,(function(t){var e=0===t.index?o:s,n=e[t.connection.id];if(n){var i=n.connections[0===t.index?"source":"target"],a=i.indexOf(t.connection);-1!==a&&i.splice(a,1)}})),this.addGroup=function(e){t.addClass(e.getEl(),a),n[e.id]=e,e.manager=this,b(e),t.fire(f,{group:e})},this.addToGroup=function(e,n,i){if(e=this.getGroup(e),e){var a=e.getEl();if(n._isJsPlumbGroup)return;var o=n._jsPlumbGroup;if(o!==e){var s=t.getOffset(n,!0),r=e.collapsed?t.getOffset(a,!0):t.getOffset(e.getDragArea(),!0);null!=o&&(o.remove(n,!1,i,!1,e),l.updateConnectionsForGroup(o)),e.add(n,i);var c=function(t,n){var i=0===n?1:0;t.each((function(t){t.setVisible(!1),t.endpoints[i].element._jsPlumbGroup===e?(t.endpoints[i].setVisible(!1),h(t,i,e)):(t.endpoints[n].setVisible(!1),d(t,n,e))}))};e.collapsed&&(c(t.select({source:n}),0),c(t.select({target:n}),1));var u=t.getId(n);t.dragManager.setParent(n,u,a,t.getId(a),s);var f={left:s.left-r.left,top:s.top-r.top};if(t.setPosition(n,f),t.dragManager.revalidateParent(n,u,s),l.updateConnectionsForGroup(e),t.revalidate(u),!i){var m={group:e,el:n,pos:f};o&&(m.sourceGroup=o),t.fire(p,m)}}}},this.removeFromGroup=function(t,e,n){t=this.getGroup(t),t&&t.remove(e,null,n)},this.getGroup=function(t){var i=t;if(e.isString(t)&&(i=n[t],null==i))throw new TypeError("No such group ["+t+"]");return i},this.getGroups=function(){var t=[];for(var e in n)t.push(n[e]);return t},this.removeGroup=function(e,i,a,o){e=this.getGroup(e),this.expandGroup(e,!0);var s=e[i?x:w](a,o);return t.remove(e.getEl()),delete n[e.id],delete t._groups[e.id],t.fire(m,{group:e}),s},this.removeAllGroups=function(t,e,i){for(var a in n)this.removeGroup(n[a],t,e,i)};var d=function(e,n,i){var a=e.endpoints[0===n?1:0].element;if(!a[u]||a[u].shouldProxy()||!a[u].collapsed){var o=i.getEl(),s=t.getId(o);t.proxyConnection(e,n,o,s,(function(t,e){return i.getEndpoint(t,e)}),(function(t,e){return i.getAnchor(t,e)}))}};this.collapseGroup=function(e){if(e=this.getGroup(e),null!=e&&!e.collapsed){var n=e.getEl();if(c(e,!1),e.shouldProxy()){var o=function(t,n){for(var i=0;i<t.length;i++){var a=t[i];d(a,n,e)}};o(e.connections.source,0),o(e.connections.target,1)}e.collapsed=!0,t.removeClass(n,a),t.addClass(n,i),t.revalidate(n),t.fire(g,{group:e})}};var h=function(e,n,i){t.unproxyConnection(e,n,t.getId(i.getEl()))};function b(e){var n=e.getMembers(),i=t.getConnections({source:n,scope:"*"},!0),a=t.getConnections({target:n,scope:"*"},!0),l={};e.connections.source.length=0,e.connections.target.length=0;var r=function(t){for(var n=0;n<t.length;n++)l[t[n].id]||(l[t[n].id]=!0,t[n].source._jsPlumbGroup===e?(t[n].target._jsPlumbGroup!==e&&e.connections.source.push(t[n]),o[t[n].id]=e):t[n].target._jsPlumbGroup===e&&(e.connections.target.push(t[n]),s[t[n].id]=e))};r(i),r(a)}this.expandGroup=function(e,n){if(e=this.getGroup(e),null!=e&&e.collapsed){var o=e.getEl();if(c(e,!0),e.shouldProxy()){var s=function(t,n){for(var i=0;i<t.length;i++){var a=t[i];h(a,n,e)}};s(e.connections.source,0),s(e.connections.target,1)}e.collapsed=!1,t.addClass(o,a),t.removeClass(o,i),t.revalidate(o),this.repaintGroup(e),n||t.fire(v,{group:e})}},this.repaintGroup=function(e){e=this.getGroup(e);for(var n=e.getMembers(),i=0;i<n.length;i++)t.revalidate(n[i])},this.updateConnectionsForGroup=b,this.refreshAllGroups=function(){for(var e in n)b(n[e]),t.dragManager.updateOffsets(t.getId(n[e].getEl()))}},S=function(n,i){var a=this,c=i.el;this.getEl=function(){return c},this.id=i.id||e.uuid(),c._isJsPlumbGroup=!0;var p=this.getDragArea=function(){var t=n.getSelector(c,o);return t&&t.length>0?t[0]:c},f=!0===i.ghost,m=f||!0===i.constrain,v=!1!==i.revert,g=!0===i.orphan,y=!0===i.prune,_=!0===i.dropOverride,x=!1!==i.proxied,w=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(t,e){return i.anchor||"Continuous"},this.getEndpoint=function(t,e){return i.endpoint||["Dot",{radius:10}]},this.collapsed=!1,!1!==i.draggable){var C={stop:function(t){n.fire(b,jsPlumb.extend(t,{group:a}))},scope:d};i.dragOptions&&t.jsPlumb.extend(C,i.dragOptions),n.draggable(i.el,C)}!1!==i.droppable&&n.droppable(i.el,{drop:function(t){var e=t.drag.el;if(!e._isJsPlumbGroup){var i=e._jsPlumbGroup;if(i!==a){if(null!=i&&i.overrideDrop(e,a))return;n.getGroupManager().addToGroup(a,e,!1)}}}});var k=function(t,e){for(var n=null==t.nodeType?t:[t],i=0;i<n.length;i++)e(n[i])};function D(t){return t.offsetParent}function S(t,e){var i=D(t),a=n.getSize(i),o=n.getSize(t),s=e[0],l=s+o[0],r=e[1],c=r+o[1];return l>0&&s<a[0]&&c>0&&r<a[1]}function P(t){var e=n.getId(t),i=n.getOffset(t);return t.parentNode.removeChild(t),n.getContainer().appendChild(t),n.setPosition(t,i),L(t),n.dragManager.clearParent(t,e),[e,i]}function E(t){var e=[];function i(t,e,i){var a=null;if(!S(t,[e,i])){var o=t._jsPlumbGroup;y?n.remove(t):a=P(t),o.remove(t)}return a}for(var a=0;a<t.selection.length;a++)e.push(i(t.selection[a][0],t.selection[a][1].left,t.selection[a][1].top));return 1===e.length?e[0]:e}function j(t){var e=n.getId(t);n.revalidate(t),n.dragManager.revalidateParent(t,e)}function L(t){t._katavorioDrag&&((y||g)&&t._katavorioDrag.off(l,E),y||g||!v||(t._katavorioDrag.off(r,j),t._katavorioDrag.setRevert(null)))}function T(t){t._katavorioDrag&&((y||g)&&t._katavorioDrag.on(l,E),m&&t._katavorioDrag.setConstrain(!0),f&&t._katavorioDrag.setUseGhostProxy(!0),y||g||!v||(t._katavorioDrag.on(r,j),t._katavorioDrag.setRevert((function(t,e){return!S(t,e)}))))}this.overrideDrop=function(t,e){return _&&(v||y||g)},this.add=function(t,e){var i=p();k(t,(function(t){if(null!=t._jsPlumbGroup){if(t._jsPlumbGroup===a)return;t._jsPlumbGroup.remove(t,!0,e,!1)}t._jsPlumbGroup=a,w.push(t),n.isAlreadyDraggable(t)&&T(t),t.parentNode!==i&&i.appendChild(t)})),n.getGroupManager().updateConnectionsForGroup(a)},this.remove=function(t,i,o,s,l){k(t,(function(t){if(t._jsPlumbGroup===a){if(delete t._jsPlumbGroup,e.removeWithFunction(w,(function(e){return e===t})),i)try{a.getDragArea().removeChild(t)}catch(r){jsPlumbUtil.log("Could not remove element from Group "+r)}if(L(t),!o){var s={group:a,el:t};l&&(s.targetGroup=l),n.fire(h,s)}}})),s||n.getGroupManager().updateConnectionsForGroup(a)},this.removeAll=function(t,e){for(var i=0,o=w.length;i<o;i++){var s=w[0];a.remove(s,t,e,!0),n.remove(s,!0)}w.length=0,n.getGroupManager().updateConnectionsForGroup(a)},this.orphanAll=function(){for(var t={},e=0;e<w.length;e++){var n=P(w[e]);t[n[0]]=n[1]}return w.length=0,t},this.getMembers=function(){return w},c[u]=this,n.bind(s,function(t){t.el._jsPlumbGroup===this&&T(t.el)}.bind(this)),this.shouldProxy=function(){return x},n.getGroupManager().addGroup(this)};n.prototype.addGroup=function(t){var e=this;if(e._groups=e._groups||{},null!=e._groups[t.id])throw new TypeError("cannot create Group ["+t.id+"]; a Group with that ID exists");if(null!=t.el[u])throw new TypeError("cannot create Group ["+t.id+"]; the given element is already a Group");var n=new S(e,t);return e._groups[n.id]=n,t.collapsed&&this.collapseGroup(n),n},n.prototype.addToGroup=function(t,e,n){var i=function(e){var i=this.getId(e);this.manage(i,e),this.getGroupManager().addToGroup(t,e,n)}.bind(this);if(Array.isArray(e))for(var a=0;a<e.length;a++)i(e[a]);else i(e)},n.prototype.removeFromGroup=function(t,e,n){this.getGroupManager().removeFromGroup(t,e,n)},n.prototype.removeGroup=function(t,e,n,i){return this.getGroupManager().removeGroup(t,e,n,i)},n.prototype.removeAllGroups=function(t,e,n){this.getGroupManager().removeAllGroups(t,e,n)},n.prototype.getGroup=function(t){return this.getGroupManager().getGroup(t)},n.prototype.getGroups=function(){return this.getGroupManager().getGroups()},n.prototype.expandGroup=function(t){this.getGroupManager().expandGroup(t)},n.prototype.collapseGroup=function(t){this.getGroupManager().collapseGroup(t)},n.prototype.repaintGroup=function(t){this.getGroupManager().repaintGroup(t)},n.prototype.toggleGroup=function(t){t=this.getGroupManager().getGroup(t),null!=t&&this.getGroupManager()[t.collapsed?"expandGroup":"collapseGroup"](t)},n.prototype.getGroupManager=function(){var t=this[c];return null==t&&(t=this[c]=new D(this)),t},n.prototype.removeGroupManager=function(){delete this[c]},n.prototype.getGroupFor=function(t){if(t=this.getElement(t),t)return t[u]}}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i="Straight",a="Arc",o=function(t){this.type="Flowchart",t=t||{},t.stub=null==t.stub?30:t.stub;var n,o=e.Connectors.AbstractConnector.apply(this,arguments),s=null==t.midpoint?.5:t.midpoint,l=!0===t.alwaysRespectStubs,r=null,c=null,u=null!=t.cornerRadius?t.cornerRadius:0,d=(t.loopbackRadius,function(t){return t<0?-1:0===t?0:1}),p=function(t){return[d(t[2]-t[0]),d(t[3]-t[1])]},h=function(t,e,n,i){if(r!==e||c!==n){var a=null==r?i.sx:r,o=null==c?i.sy:c,s=a===e?"v":"h";r=e,c=n,t.push([a,o,e,n,s])}},f=function(t){return Math.sqrt(Math.pow(t[0]-t[2],2)+Math.pow(t[1]-t[3],2))},m=function(t){var e=[];return e.push.apply(e,t),e},v=function(t,e,n){for(var s,l,r,c=null,d=0;d<e.length-1;d++){if(c=c||m(e[d]),s=m(e[d+1]),l=p(c),r=p(s),u>0&&c[4]!==s[4]){var h=Math.min(f(c),f(s)),v=Math.min(u,h/2);c[2]-=l[0]*v,c[3]-=l[1]*v,s[0]+=r[0]*v,s[1]+=r[1]*v;var g=l[1]===r[0]&&1===r[0]||l[1]===r[0]&&0===r[0]&&l[0]!==r[1]||l[1]===r[0]&&-1===r[0],b=s[1]>c[3]?1:-1,y=s[0]>c[2]?1:-1,_=b===y,x=_&&g||!_&&!g?s[0]:c[2],w=_&&g||!_&&!g?c[3]:s[1];o.addSegment(t,i,{x1:c[0],y1:c[1],x2:c[2],y2:c[3]}),o.addSegment(t,a,{r:v,x1:c[2],y1:c[3],x2:s[0],y2:s[1],cx:x,cy:w,ac:g})}else{var C=c[2]===c[0]?0:c[2]>c[0]?n.lw/2:-n.lw/2,k=c[3]===c[1]?0:c[3]>c[1]?n.lw/2:-n.lw/2;o.addSegment(t,i,{x1:c[0]-C,y1:c[1]-k,x2:c[2]+C,y2:c[3]+k})}c=s}null!=s&&o.addSegment(t,i,{x1:s[0],y1:s[1],x2:s[2],y2:s[3]})};this._compute=function(t,e){n=[],r=null,c=null,null;var i=function(){return[t.startStubX,t.startStubY,t.endStubX,t.endStubY]},a={perpendicular:i,orthogonal:i,opposite:function(e){var n=t,i="x"===e?0:1,a={x:function(){return 1===n.so[i]&&(n.startStubX>n.endStubX&&n.tx>n.startStubX||n.sx>n.endStubX&&n.tx>n.sx)||-1===n.so[i]&&(n.startStubX<n.endStubX&&n.tx<n.startStubX||n.sx<n.endStubX&&n.tx<n.sx)},y:function(){return 1===n.so[i]&&(n.startStubY>n.endStubY&&n.ty>n.startStubY||n.sy>n.endStubY&&n.ty>n.sy)||-1===n.so[i]&&(n.startStubY<n.endStubY&&n.ty<n.startStubY||n.sy<n.endStubY&&n.ty<n.sy)}};return!l&&a[e]()?{x:[(t.sx+t.tx)/2,t.startStubY,(t.sx+t.tx)/2,t.endStubY],y:[t.startStubX,(t.sy+t.ty)/2,t.endStubX,(t.sy+t.ty)/2]}[e]:[t.startStubX,t.startStubY,t.endStubX,t.endStubY]}},u=a[t.anchorOrientation](t.sourceAxis),d="x"===t.sourceAxis?0:1,p="x"===t.sourceAxis?1:0,f=u[d],m=u[p],g=u[d+2],b=u[p+2];h(n,u[0],u[1],t);var y=t.startStubX+(t.endStubX-t.startStubX)*s,_=t.startStubY+(t.endStubY-t.startStubY)*s,x={x:[0,1],y:[1,0]},w={perpendicular:function(e){var n=t,i={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},a={x:[[n.startStubX,n.endStubX],null,[n.endStubX,n.startStubX]],y:[[n.startStubY,n.endStubY],null,[n.endStubY,n.startStubY]]},o={x:[[y,n.startStubY],[y,n.endStubY]],y:[[n.startStubX,_],[n.endStubX,_]]},s={x:[[n.endStubX,n.startStubY]],y:[[n.startStubX,n.endStubY]]},l={x:[[n.startStubX,n.endStubY],[n.endStubX,n.endStubY]],y:[[n.endStubX,n.startStubY],[n.endStubX,n.endStubY]]},r={x:[[n.startStubX,_],[n.endStubX,_],[n.endStubX,n.endStubY]],y:[[y,n.startStubY],[y,n.endStubY],[n.endStubX,n.endStubY]]},c={x:[n.startStubY,n.endStubY],y:[n.startStubX,n.endStubX]},u=x[e][0],d=x[e][1],p=n.so[u]+1,h=n.to[d]+1,f=-1===n.to[d]&&c[e][1]<c[e][0]||1===n.to[d]&&c[e][1]>c[e][0],m=a[e][p][0],v=a[e][p][1],g=i[e][p][h];return n.segment===g[3]||n.segment===g[2]&&f?o[e]:n.segment===g[2]&&v<m?s[e]:n.segment===g[2]&&v>=m||n.segment===g[1]&&!f?r[e]:n.segment===g[0]||n.segment===g[1]&&f?l[e]:void 0},orthogonal:function(e,n,i,a,o){var s=t,l={x:-1===s.so[0]?Math.min(n,a):Math.max(n,a),y:-1===s.so[1]?Math.min(n,a):Math.max(n,a)}[e];return{x:[[l,i],[l,o],[a,o]],y:[[i,l],[o,l],[o,a]]}[e]},opposite:function(n,i,a,s){var l=t,r={x:"y",y:"x"}[n],c={x:"height",y:"width"}[n],u=l["is"+n.toUpperCase()+"GreaterThanStubTimes2"];if(e.sourceEndpoint.elementId===e.targetEndpoint.elementId){var p=a+(1-e.sourceEndpoint.anchor[r])*e.sourceInfo[c]+o.maxStub;return{x:[[i,p],[s,p]],y:[[p,i],[p,s]]}[n]}return!u||1===l.so[d]&&i>s||-1===l.so[d]&&i<s?{x:[[i,_],[s,_]],y:[[y,i],[y,s]]}[n]:1===l.so[d]&&i<s||-1===l.so[d]&&i>s?{x:[[y,l.sy],[y,l.ty]],y:[[l.sx,_],[l.tx,_]]}[n]:void 0}},C=w[t.anchorOrientation](t.sourceAxis,f,m,g,b);if(C)for(var k=0;k<C.length;k++)h(n,C[k][0],C[k][1],t);h(n,u[2],u[3],t),h(n,t.tx,t.ty,t),v(this,n,t)}};e.Connectors.Flowchart=o,n.extend(e.Connectors.Flowchart,e.Connectors.AbstractConnector)}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil;e.Connectors.AbstractBezierConnector=function(t){t=t||{};var n,i=!1!==t.showLoopback,a=(t.curviness,t.margin||5),o=(t.proximityLimit,t.orientation&&"clockwise"===t.orientation),s=t.loopbackRadius||25;return this._compute=function(t,e){var l=e.sourcePos,r=e.targetPos,c=Math.abs(l[0]-r[0]),u=Math.abs(l[1]-r[1]);if(i&&e.sourceEndpoint.elementId===e.targetEndpoint.elementId){!0;var d=e.sourcePos[0],p=e.sourcePos[1]-a,h=d,f=p-s,m=h-s,v=f-s;c=2*s,u=2*s,t.points[0]=m,t.points[1]=v,t.points[2]=c,t.points[3]=u,n.addSegment(this,"Arc",{loopback:!0,x1:d-m+4,y1:p-v,startAngle:0,endAngle:2*Math.PI,r:s,ac:!o,x2:d-m-4,y2:p-v,cx:h-m,cy:f-v})}else!1,this._computeBezier(t,e,l,r,c,u)},n=e.Connectors.AbstractConnector.apply(this,arguments),n},n.extend(e.Connectors.AbstractBezierConnector,e.Connectors.AbstractConnector);var i=function(t){t=t||{},this.type="Bezier";var n=e.Connectors.AbstractBezierConnector.apply(this,arguments),i=t.curviness||150,a=10;this.getCurviness=function(){return i},this._findControlPoint=function(t,e,n,o,s,l,r){var c=l[0]!==r[0]||l[1]===r[1],u=[];return c?(0===r[0]?u.push(n[0]<e[0]?t[0]+a:t[0]-a):u.push(t[0]+i*r[0]),0===r[1]?u.push(n[1]<e[1]?t[1]+a:t[1]-a):u.push(t[1]+i*l[1])):(0===l[0]?u.push(e[0]<n[0]?t[0]+a:t[0]-a):u.push(t[0]-i*l[0]),0===l[1]?u.push(e[1]<n[1]?t[1]+a:t[1]-a):u.push(t[1]+i*r[1])),u},this._computeBezier=function(t,e,i,a,o,s){var l,r,c=i[0]<a[0]?o:0,u=i[1]<a[1]?s:0,d=i[0]<a[0]?0:o,p=i[1]<a[1]?0:s;l=this._findControlPoint([c,u],i,a,e.sourceEndpoint,e.targetEndpoint,t.so,t.to),r=this._findControlPoint([d,p],a,i,e.targetEndpoint,e.sourceEndpoint,t.to,t.so),n.addSegment(this,"Bezier",{x1:c,y1:u,x2:d,y2:p,cp1x:l[0],cp1y:l[1],cp2x:r[0],cp2y:r[1]})}};e.Connectors.Bezier=i,n.extend(i,e.Connectors.AbstractBezierConnector)}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i=function(t,e,n,i){return t<=n&&i<=e?1:t<=n&&e<=i?2:n<=t&&i>=e?3:4},a=function(t,e,n,i,a,o,s,l,r){return l<=r?[t,e]:1===n?i[3]<=0&&a[3]>=1?[t+(i[2]<.5?-1*o:o),e]:i[2]>=1&&a[2]<=0?[t,e+(i[3]<.5?-1*s:s)]:[t+-1*o,e+-1*s]:2===n?i[3]>=1&&a[3]<=0?[t+(i[2]<.5?-1*o:o),e]:i[2]>=1&&a[2]<=0?[t,e+(i[3]<.5?-1*s:s)]:[t+o,e+-1*s]:3===n?i[3]>=1&&a[3]<=0?[t+(i[2]<.5?-1*o:o),e]:i[2]<=0&&a[2]>=1?[t,e+(i[3]<.5?-1*s:s)]:[t+-1*o,e+-1*s]:4===n?i[3]<=0&&a[3]>=1?[t+(i[2]<.5?-1*o:o),e]:i[2]<=0&&a[2]>=1?[t,e+(i[3]<.5?-1*s:s)]:[t+o,e+-1*s]:void 0},o=function(t){t=t||{},this.type="StateMachine";var n,o=e.Connectors.AbstractBezierConnector.apply(this,arguments),s=t.curviness||10,l=t.margin||5,r=t.proximityLimit||80;t.orientation&&t.orientation;this._computeBezier=function(t,e,c,u,d,p){var h=e.sourcePos[0]<e.targetPos[0]?0:d,f=e.sourcePos[1]<e.targetPos[1]?0:p,m=e.sourcePos[0]<e.targetPos[0]?d:0,v=e.sourcePos[1]<e.targetPos[1]?p:0;0===e.sourcePos[2]&&(h-=l),1===e.sourcePos[2]&&(h+=l),0===e.sourcePos[3]&&(f-=l),1===e.sourcePos[3]&&(f+=l),0===e.targetPos[2]&&(m-=l),1===e.targetPos[2]&&(m+=l),0===e.targetPos[3]&&(v-=l),1===e.targetPos[3]&&(v+=l);var g,b,y,_,x=(h+m)/2,w=(f+v)/2,C=i(h,f,m,v),k=Math.sqrt(Math.pow(m-h,2)+Math.pow(v-f,2));n=a(x,w,C,e.sourcePos,e.targetPos,s,s,k,r),g=n[0],b=n[0],y=n[1],_=n[1],o.addSegment(this,"Bezier",{x1:m,y1:v,x2:h,y2:f,cp1x:g,cp1y:y,cp2x:b,cp2y:_})}};e.Connectors.StateMachine=o,n.extend(o,e.Connectors.AbstractBezierConnector)}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i="Straight",a=function(t){this.type=i;var n=e.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(t,e){n.addSegment(this,i,{x1:t.sx,y1:t.sy,x2:t.startStubX,y2:t.startStubY}),n.addSegment(this,i,{x1:t.startStubX,y1:t.startStubY,x2:t.endStubX,y2:t.endStubY}),n.addSegment(this,i,{x1:t.endStubX,y1:t.endStubY,x2:t.tx,y2:t.ty})}};e.Connectors.Straight=a,n.extend(a,e.Connectors.AbstractConnector)}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},a="stroke-dasharray",o="dashstyle",s="linearGradient",l="radialGradient",r="defs",c="fill",u="stop",d="stroke",p="stroke-width",h="style",f="none",m="jsplumb_gradient_",v="strokeWidth",g={svg:"http://www.w3.org/2000/svg"},b=function(t,e){for(var n in e)t.setAttribute(n,""+e[n])},y=function(t,n){return n=n||{},n.version="1.1",n.xmlns=g.svg,e.createElementNS(g.svg,t,null,null,n)},_=function(t){return"position:absolute;left:"+t[0]+"px;top:"+t[1]+"px"},x=function(t){for(var e=t.querySelectorAll(" defs,linearGradient,radialGradient"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])},w=function(t,e,n,i,a){var o,p=m+a._jsPlumb.instance.idstamp();x(t),o=n.gradient.offset?y(l,{id:p}):y(s,{id:p,gradientUnits:"userSpaceOnUse"});var h=y(r);t.appendChild(h),h.appendChild(o);for(var f=0;f<n.gradient.stops.length;f++){var v=1===a.segment||2===a.segment?f:n.gradient.stops.length-1-f,g=n.gradient.stops[v][1],b=y(u,{offset:Math.floor(100*n.gradient.stops[f][0])+"%","stop-color":g});o.appendChild(b)}var _=n.stroke?d:c;e.setAttribute(_,"url(#"+p+")")},C=function(t,e,n,s,l){if(e.setAttribute(c,n.fill?n.fill:f),e.setAttribute(d,n.stroke?n.stroke:f),n.gradient?w(t,e,n,s,l):(x(t),e.setAttribute(h,"")),n.strokeWidth&&e.setAttribute(p,n.strokeWidth),n[o]&&n[v]&&!n[a]){var r=-1===n[o].indexOf(",")?" ":",",u=n[o].split(r),m="";u.forEach((function(t){m+=Math.floor(t*n.strokeWidth)+r})),e.setAttribute(a,m)}else n[a]&&e.setAttribute(a,n[a]);for(var g in i)n[g]&&e.setAttribute(i[g],n[g])},k=function(t,e,n){t.childNodes.length>n?t.insertBefore(e,t.childNodes[n]):t.appendChild(e)};n.svg={node:y,attr:b,pos:_};var D=function(t){var i=t.pointerEventsSpec||"all",a={};e.jsPlumbUIComponent.apply(this,t.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var o=t.cssClass+" "+(t.originalArgs[0].cssClass||""),s={style:"",width:0,height:0,"pointer-events":i,position:"absolute"};this.svg=y("svg",s),t.useDivWrapper?(this.canvas=e.createElement("div",{position:"absolute"}),n.sizeElement(this.canvas,0,0,1,1),this.canvas.className=o):(b(this.svg,{class:o}),this.canvas=this.svg),t._jsPlumb.appendElement(this.canvas,t.originalArgs[0].parent),t.useDivWrapper&&this.canvas.appendChild(this.svg);var l=[this.canvas];return this.getDisplayElements=function(){return l},this.appendDisplayElement=function(t){l.push(t)},this.paint=function(e,i,o){if(null!=e){var s,l=[this.x,this.y],r=[this.w,this.h];null!=o&&(o.xmin<0&&(l[0]+=o.xmin),o.ymin<0&&(l[1]+=o.ymin),r[0]=o.xmax+(o.xmin<0?-o.xmin:0),r[1]=o.ymax+(o.ymin<0?-o.ymin:0)),t.useDivWrapper?(n.sizeElement(this.canvas,l[0],l[1],r[0],r[1]),l[0]=0,l[1]=0,s=_([0,0])):s=_([l[0],l[1]]),a.paint.apply(this,arguments),b(this.svg,{style:s,width:r[0]||0,height:r[1]||0})}},{renderer:a}};n.extend(D,e.jsPlumbUIComponent,{cleanup:function(t){t||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(t){var e=t.getContainer();this.canvas&&null==this.canvas.parentNode&&e.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&e.appendChild(this.bgCanvas)},setVisible:function(t){this.canvas&&(this.canvas.style.display=t?"block":"none")}}),e.ConnectorRenderers.svg=function(t){var n=this,i=D.apply(this,[{cssClass:t._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:t._jsPlumb}]);i.renderer.paint=function(i,a,o){var s=n.getSegments(),l="",r=[0,0];if(o.xmin<0&&(r[0]=-o.xmin),o.ymin<0&&(r[1]=-o.ymin),s.length>0){l=n.getPathData();var c={d:l,transform:"translate("+r[0]+","+r[1]+")","pointer-events":t["pointer-events"]||"visibleStroke"},u=null,d=[n.x,n.y,n.w,n.h];if(i.outlineStroke){var p=i.outlineWidth||1,h=i.strokeWidth+2*p;u=e.extend({},i),delete u.gradient,u.stroke=i.outlineStroke,u.strokeWidth=h,null==n.bgPath?(n.bgPath=y("path",c),e.addClass(n.bgPath,e.connectorOutlineClass),k(n.svg,n.bgPath,0)):b(n.bgPath,c),C(n.svg,n.bgPath,u,d,n)}null==n.path?(n.path=y("path",c),k(n.svg,n.path,i.outlineStroke?1:0)):b(n.path,c),C(n.svg,n.path,i,d,n)}}},n.extend(e.ConnectorRenderers.svg,D);var S=e.SvgEndpoint=function(t){var n=D.apply(this,[{cssClass:t._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:t._jsPlumb}]);n.renderer.paint=function(t){var n=e.extend({},t);n.outlineStroke&&(n.stroke=n.outlineStroke),null==this.node?(this.node=this.makeNode(n),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),C(this.svg,this.node,n,[this.x,this.y,this.w,this.h],this),_(this.node,[this.x,this.y])}.bind(this)};n.extend(S,D),e.Endpoints.svg.Dot=function(){e.Endpoints.Dot.apply(this,arguments),S.apply(this,arguments),this.makeNode=function(t){return y("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(t){b(t,{cx:this.w/2,cy:this.h/2,r:this.radius})}},n.extend(e.Endpoints.svg.Dot,[e.Endpoints.Dot,S]),e.Endpoints.svg.Rectangle=function(){e.Endpoints.Rectangle.apply(this,arguments),S.apply(this,arguments),this.makeNode=function(t){return y("rect",{width:this.w,height:this.h})},this.updateNode=function(t){b(t,{width:this.w,height:this.h})}},n.extend(e.Endpoints.svg.Rectangle,[e.Endpoints.Rectangle,S]),e.Endpoints.svg.Image=e.Endpoints.Image,e.Endpoints.svg.Blank=e.Endpoints.Blank,e.Overlays.svg.Label=e.Overlays.Label,e.Overlays.svg.Custom=e.Overlays.Custom;var P=function(t,n){t.apply(this,n),e.jsPlumbUIComponent.apply(this,n),this.isAppendedAtTopLevel=!1;this.path=null,this.paint=function(t,e){if(t.component.svg&&e){null==this.path&&(this.path=y("path",{"pointer-events":"all"}),t.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,t.component),this.canvas=t.component.svg);var a=n&&1===n.length&&n[0].cssClass||"",o=[0,0];e.xmin<0&&(o[0]=-e.xmin),e.ymin<0&&(o[1]=-e.ymin),b(this.path,{d:i(t.d),class:a,stroke:t.stroke?t.stroke:null,fill:t.fill?t.fill:null,transform:"translate("+o[0]+","+o[1]+")"})}};var i=function(t){return isNaN(t.cxy.x)||isNaN(t.cxy.y)?"":"M"+t.hxy.x+","+t.hxy.y+" L"+t.tail[0].x+","+t.tail[0].y+" L"+t.cxy.x+","+t.cxy.y+" L"+t.tail[1].x+","+t.tail[1].y+" L"+t.hxy.x+","+t.hxy.y};this.transfer=function(t){t.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),t.canvas.appendChild(this.path))}};n.extend(P,[e.jsPlumbUIComponent,e.Overlays.AbstractOverlay],{cleanup:function(t){null!=this.path&&(t?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(t,e){this.path&&e.canvas&&e.canvas.appendChild(this.path)},setVisible:function(t){null!=this.path&&(this.path.style.display=t?"block":"none")}}),e.Overlays.svg.Arrow=function(){P.apply(this,[e.Overlays.Arrow,arguments])},n.extend(e.Overlays.svg.Arrow,[e.Overlays.Arrow,P]),e.Overlays.svg.PlainArrow=function(){P.apply(this,[e.Overlays.PlainArrow,arguments])},n.extend(e.Overlays.svg.PlainArrow,[e.Overlays.PlainArrow,P]),e.Overlays.svg.Diamond=function(){P.apply(this,[e.Overlays.Diamond,arguments])},n.extend(e.Overlays.svg.Diamond,[e.Overlays.Diamond,P]),e.Overlays.svg.GuideLines=function(){var t,n,i=null,a=this;e.Overlays.GuideLines.apply(this,arguments),this.paint=function(e,s){null==i&&(i=y("path"),e.connector.svg.appendChild(i),a.attachListeners(i,e.connector),a.attachListeners(i,a),t=y("path"),e.connector.svg.appendChild(t),a.attachListeners(t,e.connector),a.attachListeners(t,a),n=y("path"),e.connector.svg.appendChild(n),a.attachListeners(n,e.connector),a.attachListeners(n,a));var l=[0,0];s.xmin<0&&(l[0]=-s.xmin),s.ymin<0&&(l[1]=-s.ymin),b(i,{d:o(e.head,e.tail),stroke:"red",fill:null,transform:"translate("+l[0]+","+l[1]+")"}),b(t,{d:o(e.tailLine[0],e.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+l[0]+","+l[1]+")"}),b(n,{d:o(e.headLine[0],e.headLine[1]),stroke:"green",fill:null,transform:"translate("+l[0]+","+l[1]+")"})};var o=function(t,e){return"M "+t.x+","+t.y+" L"+e.x+","+e.y}},n.extend(e.Overlays.svg.GuideLines,e.Overlays.GuideLines)}.call("undefined"!==typeof window?window:void 0),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i=t.Katavorio,a=t.Biltong,o=function(e){var n=e._mottle;return n||(n=e._mottle=new t.Mottle),n},s=function(t,n){n=n||"main";var o="_katavorio_"+n,s=t[o],l=t.getEventManager();return s||(s=new i({bind:l.on,unbind:l.off,getSize:e.getSize,getConstrainingRectangle:function(t){return[t.parentNode.scrollWidth,t.parentNode.scrollHeight]},getPosition:function(e,n){var i=t.getOffset(e,n,e._katavorioDrag?e.offsetParent:null);return[i.left,i.top]},setPosition:function(t,e){t.style.left=e[0]+"px",t.style.top=e[1]+"px"},addClass:e.addClass,removeClass:e.removeClass,intersects:a.intersects,indexOf:function(t,e){return t.indexOf(e)},scope:t.getDefaultScope(),css:{noSelect:t.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}}),s.setZoom(t.getZoom()),t[o]=s,t.bind("zoom",s.setZoom)),s},l=function(t){var e=t.el._jsPlumbDragOptions,n=!0;return e.canDrag&&(n=e.canDrag()),n&&(this.setHoverSuspended(!0),this.select({source:t.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:t.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),n},r=function(t){var e=this.getUIPosition(arguments,this.getZoom());if(null!=e){var n=t.el._jsPlumbDragOptions;this.draw(t.el,e,null,!0),n._dragging&&this.addClass(t.el,"jtk-dragged"),n._dragging=!0}},c=function(t){for(var e,n=t.selection,i=function(t){null!=t[1]&&(e=this.getUIPosition([{el:t[2].el,pos:[t[1].left,t[1].top]}]),this.draw(t[2].el,e)),null!=t[0]._jsPlumbDragOptions&&delete t[0]._jsPlumbDragOptions._dragging,this.removeClass(t[0],"jtk-dragged"),this.select({source:t[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:t[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.getDragManager().dragEnded(t[2].el)}.bind(this),a=0;a<n.length;a++)i(n[a]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},u=function(t,e){var i=function(i){if(null!=e[i]){if(n.isString(e[i])){var a=e[i].match(/-=/)?-1:1,o=e[i].substring(2);return t[i]+a*o}return e[i]}return t[i]};return[i("left"),i("top")]},d=function(t,e){if(null==e)return[0,0];var n=v(e),i=m(n,0);return[i[t+"X"],i[t+"Y"]]},p=d.bind(this,"page"),h=d.bind(this,"screen"),f=d.bind(this,"client"),m=function(t,e){return t.item?t.item(e):t[e]},v=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},g=function(t){var e={},n=[],i={},a={},o={};this.register=function(s){var l,r=t.getId(s);e[r]||(e[r]=s,n.push(s),i[r]={});var c=function e(n){if(n)for(var c=0;c<n.childNodes.length;c++)if(3!==n.childNodes[c].nodeType&&8!==n.childNodes[c].nodeType){var u=jsPlumb.getElement(n.childNodes[c]),d=t.getId(n.childNodes[c],null,!0);if(d&&a[d]&&a[d]>0){l||(l=t.getOffset(s));var p=t.getOffset(u);i[r][d]={id:d,offset:{left:p.left-l.left,top:p.top-l.top}},o[d]=r}e(n.childNodes[c])}};c(s)},this.updateOffsets=function(e,n){if(null!=e){n=n||{};var a,s=jsPlumb.getElement(e),l=t.getId(s),r=i[l];if(r)for(var c in r)if(r.hasOwnProperty(c)){var u=jsPlumb.getElement(c),d=n[c]||t.getOffset(u);if(null==u.offsetParent&&null!=i[l][c])continue;a||(a=t.getOffset(s)),i[l][c]={id:c,offset:{left:d.left-a.left,top:d.top-a.top}},o[c]=l}}},this.endpointAdded=function(n,s){s=s||t.getId(n);var l=document.body,r=n.parentNode;a[s]=a[s]?a[s]+1:1;while(null!=r&&r!==l){var c=t.getId(r,null,!0);if(c&&e[c]){var u=t.getOffset(r);if(null==i[c][s]){var d=t.getOffset(n);i[c][s]={id:s,offset:{left:d.left-u.left,top:d.top-u.top}},o[s]=c}break}r=r.parentNode}},this.endpointDeleted=function(t){if(a[t.elementId]&&(a[t.elementId]--,a[t.elementId]<=0))for(var e in i)i.hasOwnProperty(e)&&i[e]&&(delete i[e][t.elementId],delete o[t.elementId])},this.changeId=function(t,e){i[e]=i[t],i[t]={},o[e]=o[t],o[t]=null},this.getElementsForDraggable=function(t){return i[t]},this.elementRemoved=function(t){var e=o[t];e&&(delete i[e][t],delete o[t])},this.reset=function(){e={},n=[],i={},a={}},this.dragEnded=function(e){if(null!=e.offsetParent){var n=t.getId(e),i=o[n];i&&this.updateOffsets(i)}},this.setParent=function(e,n,a,s,l){var r=o[n];i[s]||(i[s]={});var c=t.getOffset(a),u=l||t.getOffset(e);r&&i[r]&&delete i[r][n],i[s][n]={id:n,offset:{left:u.left-c.left,top:u.top-c.top}},o[n]=s},this.clearParent=function(t,e){var n=o[e];n&&(delete i[n][e],delete o[e])},this.revalidateParent=function(e,n,i){var a=o[n];if(a){var s={};s[n]=i,this.updateOffsets(a,s),t.revalidate(a)}},this.getDragAncestor=function(e){var n=jsPlumb.getElement(e),i=t.getId(n),a=o[i];return a?jsPlumb.getElement(a):null}},b=function(t,e,i){e=n.fastTrim(e),"undefined"!==typeof t.className.baseVal?t.className.baseVal=e:t.className=e;try{var a=t.classList;if(null!=a){while(a.length>0)a.remove(a.item(0));for(var o=0;o<i.length;o++)i[o]&&a.add(i[o])}}catch(s){n.log("JSPLUMB: cannot set class list",s)}},y=function(t){return"undefined"===typeof t.className.baseVal?t.className:t.className.baseVal},_=function(t,e,i){e=null==e?[]:n.isArray(e)?e:e.split(/\s+/),i=null==i?[]:n.isArray(i)?i:i.split(/\s+/);var a=y(t),o=a.split(/\s+/),s=function(t,e){for(var n=0;n<e.length;n++)if(t)-1===o.indexOf(e[n])&&o.push(e[n]);else{var i=o.indexOf(e[n]);-1!==i&&o.splice(i,1)}};s(!0,e),s(!1,i),b(t,o.join(" "),o)};t.jsPlumb.extend(t.jsPlumbInstance.prototype,{headless:!1,pageLocation:p,screenLocation:h,clientLocation:f,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new g(this)),this.dragManager},recalculateOffsets:function(t){this.getDragManager().updateOffsets(t)},createElement:function(t,e,n,i){return this.createElementNS(null,t,e,n,i)},createElementNS:function(t,e,n,i,a){var o,s=null==t?document.createElement(e):document.createElementNS(t,e);for(o in n=n||{},n)s.style[o]=n[o];for(o in i&&(s.className=i),a=a||{},a)s.setAttribute(o,""+a[o]);return s},getAttribute:function(t,e){return null!=t.getAttribute?t.getAttribute(e):null},setAttribute:function(t,e,n){null!=t.setAttribute&&t.setAttribute(e,n)},setAttributes:function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])},appendToRoot:function(t){document.body.appendChild(t)},getRenderModes:function(){return["svg"]},getClass:y,addClass:function(t,e){jsPlumb.each(t,(function(t){_(t,e)}))},hasClass:function(t,e){return t=jsPlumb.getElement(t),t.classList?t.classList.contains(e):-1!==y(t).indexOf(e)},removeClass:function(t,e){jsPlumb.each(t,(function(t){_(t,null,e)}))},toggleClass:function(t,e){jsPlumb.hasClass(t,e)?jsPlumb.removeClass(t,e):jsPlumb.addClass(t,e)},updateClasses:function(t,e,n){jsPlumb.each(t,(function(t){_(t,e,n)}))},setClass:function(t,e){null!=e&&jsPlumb.each(t,(function(t){b(t,e,e.split(/\s+/))}))},setPosition:function(t,e){t.style.left=e.left+"px",t.style.top=e.top+"px"},getPosition:function(t){var e=function(e){var n=t.style[e];return n?n.substring(0,n.length-2):0};return{left:e("left"),top:e("top")}},getStyle:function(t,e){return"undefined"!==typeof window.getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.currentStyle[e]},getSelector:function(t,e){var n=null;return n=1===arguments.length?null!=t.nodeType?t:document.querySelectorAll(t):t.querySelectorAll(e),n},getOffset:function(t,e,n){t=jsPlumb.getElement(t),n=n||this.getContainer();var i={left:t.offsetLeft,top:t.offsetTop},a=e||null!=n&&t!==n&&t.offsetParent!==n?t.offsetParent:null,o=function(t){null!=t&&t!==document.body&&(t.scrollTop>0||t.scrollLeft>0)&&(i.left-=t.scrollLeft,i.top-=t.scrollTop)}.bind(this);while(null!=a)i.left+=a.offsetLeft,i.top+=a.offsetTop,o(a),a=e?a.offsetParent:a.offsetParent===n?null:a.offsetParent;if(null!=n&&!e&&(n.scrollTop>0||n.scrollLeft>0)){var s=null!=t.offsetParent?this.getStyle(t.offsetParent,"position"):"static",l=this.getStyle(t,"position");"absolute"!==l&&"fixed"!==l&&"absolute"!==s&&"fixed"!==s&&(i.left-=n.scrollLeft,i.top-=n.scrollTop)}return i},getPositionOnElement:function(t,e,n){var i="undefined"!==typeof e.getBoundingClientRect?e.getBoundingClientRect():{left:0,top:0,width:0,height:0},a=document.body,o=document.documentElement,s=window.pageYOffset||o.scrollTop||a.scrollTop,l=window.pageXOffset||o.scrollLeft||a.scrollLeft,r=o.clientTop||a.clientTop||0,c=o.clientLeft||a.clientLeft||0,u=0,d=0,p=i.top+s-r+u*n,h=i.left+l-c+d*n,f=jsPlumb.pageLocation(t),m=i.width||e.offsetWidth*n,v=i.height||e.offsetHeight*n,g=(f[0]-h)/m,b=(f[1]-p)/v;return[g,b]},getAbsolutePosition:function(t){var e=function(e){var n=t.style[e];if(n)return parseFloat(n.substring(0,n.length-2))};return[e("left"),e("top")]},setAbsolutePosition:function(t,e,n,i){n?this.animate(t,{left:"+="+(e[0]-n[0]),top:"+="+(e[1]-n[1])},i):(t.style.left=e[0]+"px",t.style.top=e[1]+"px")},getSize:function(t){return[t.offsetWidth,t.offsetHeight]},getWidth:function(t){return t.offsetWidth},getHeight:function(t){return t.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(t,e){var i;return t=n.isArray(t)||null!=t.length&&!n.isString(t)?t:[t],Array.prototype.slice.call(t).forEach(function(t){i=this.info(t),i.el&&this._initDraggableIfNecessary(i.el,!0,e,i.id,!0)}.bind(this)),this},snapToGrid:function(t,e,n){var i=[],a=function(t){var a=this.info(t);if(null!=a.el&&a.el._katavorioDrag){var o=a.el._katavorioDrag.snap(e,n);this.revalidate(a.el),i.push([a.el,o])}}.bind(this);if(1===arguments.length||3===arguments.length)a(t,e,n);else{var o=this.getManagedElements();for(var s in o)a(s,arguments[0],arguments[1])}return i},initDraggable:function(t,e,n){s(this,n).draggable(t,e),t._jsPlumbDragOptions=e},destroyDraggable:function(t,e){s(this,e).destroyDraggable(t),delete t._jsPlumbDragOptions},unbindDraggable:function(t,e,n,i){s(this,i).destroyDraggable(t,e,n)},setDraggable:function(t,e){return jsPlumb.each(t,function(t){this.isDragSupported(t)&&(this._draggableStates[this.getAttribute(t,"id")]=e,this.setElementDraggable(t,e))}.bind(this))},_draggableStates:{},toggleDraggable:function(t){var e;return jsPlumb.each(t,function(t){var n=this.getAttribute(t,"id");return e=null!=this._draggableStates[n]&&this._draggableStates[n],e=!e,this._draggableStates[n]=e,this.setDraggable(t,e),e}.bind(this)),e},_initDraggableIfNecessary:function(t,e,i,a,o){if(!jsPlumb.headless){var s=null!=e&&e;if(s&&jsPlumb.isDragSupported(t,this)){var u=i||this.Defaults.DragOptions;if(u=jsPlumb.extend({},u),jsPlumb.isAlreadyDraggable(t,this))i.force&&this.initDraggable(t,u);else{var d=jsPlumb.dragEvents.drag,p=jsPlumb.dragEvents.stop,h=jsPlumb.dragEvents.start;this.manage(a,t),u[h]=n.wrap(u[h],l.bind(this)),u[d]=n.wrap(u[d],r.bind(this)),u[p]=n.wrap(u[p],c.bind(this));var f=this.getId(t);this._draggableStates[f]=!0;var m=this._draggableStates[f];u.disabled=null!=m&&!m,this.initDraggable(t,u),this.getDragManager().register(t),o&&this.fire("elementDraggable",{el:t,options:u})}}}},animationSupported:!0,getElement:function(t){return null==t?null:(t="string"===typeof t?t:null!=t.length&&null==t.enctype?t[0]:t,"string"===typeof t?document.getElementById(t):t)},removeElement:function(t){s(this).elementRemoved(t),this.getEventManager().remove(t)},doAnimate:function(t,n,i){i=i||{};var a=this.getOffset(t),o=u(a,n),s=o[0]-a.left,l=o[1]-a.top,r=i.duration||250,c=15,d=r/c,p=c/r*s,h=c/r*l,f=0,m=setInterval((function(){e.setPosition(t,{left:a.left+p*(f+1),top:a.top+h*(f+1)}),null!=i.step&&i.step(f,Math.ceil(d)),f++,f>=d&&(window.clearInterval(m),null!=i.complete&&i.complete())}),c)},destroyDroppable:function(t,e){s(this,e).destroyDroppable(t)},unbindDroppable:function(t,e,n,i){s(this,i).destroyDroppable(t,e,n)},droppable:function(t,e){var i;return t=n.isArray(t)||null!=t.length&&!n.isString(t)?t:[t],e=e||{},e.allowLoopback=!1,Array.prototype.slice.call(t).forEach(function(t){i=this.info(t),i.el&&this.initDroppable(i.el,e)}.bind(this)),this},initDroppable:function(t,e,n){s(this,n).droppable(t,e)},isAlreadyDraggable:function(t){return null!=t._katavorioDrag},isDragSupported:function(t,e){return!0},isDropSupported:function(t,e){return!0},isElementDraggable:function(t){return t=e.getElement(t),t._katavorioDrag&&t._katavorioDrag.isEnabled()},getDragObject:function(t){return t[0].drag.getDragElement()},getDragScope:function(t){return t._katavorioDrag&&t._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(t){return t[0].e},getUIPosition:function(t,e){var n=t[0].el;if(null==n.offsetParent)return null;var i=t[0].finalPos||t[0].pos,a={left:i[0],top:i[1]};if(n._katavorioDrag&&n.offsetParent!==this.getContainer()){var o=this.getOffset(n.offsetParent);a.left+=o.left,a.top+=o.top}return a},setDragFilter:function(t,e,n){t._katavorioDrag&&t._katavorioDrag.setFilter(e,n)},setElementDraggable:function(t,n){t=e.getElement(t),t._katavorioDrag&&t._katavorioDrag.setEnabled(n)},setDragScope:function(t,e){t._katavorioDrag&&t._katavorioDrag.k.setDragScope(t,e)},setDropScope:function(t,e){t._katavorioDrop&&t._katavorioDrop.length>0&&t._katavorioDrop[0].k.setDropScope(t,e)},addToPosse:function(t,n){var i=Array.prototype.slice.call(arguments,1),a=s(this);e.each(t,(function(t){t=[e.getElement(t)],t.push.apply(t,i),a.addToPosse.apply(a,t)}))},setPosse:function(t,n){var i=Array.prototype.slice.call(arguments,1),a=s(this);e.each(t,(function(t){t=[e.getElement(t)],t.push.apply(t,i),a.setPosse.apply(a,t)}))},removeFromPosse:function(t,n){var i=Array.prototype.slice.call(arguments,1),a=s(this);e.each(t,(function(t){t=[e.getElement(t)],t.push.apply(t,i),a.removeFromPosse.apply(a,t)}))},removeFromAllPosses:function(t){var n=s(this);e.each(t,(function(t){n.removeFromAllPosses(e.getElement(t))}))},setPosseState:function(t,n,i){var a=s(this);e.each(t,(function(t){a.setPosseState(e.getElement(t),n,i)}))},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(t){t._katavorioDrag&&t._katavorioDrag.abort()},addToDragSelection:function(t){s(this).select(t)},removeFromDragSelection:function(t){s(this).deselect(t)},clearDragSelection:function(){s(this).deselectAll()},trigger:function(t,e,n,i){this.getEventManager().trigger(t,e,n,i)},doReset:function(){for(var t in this)0===t.indexOf("_katavorio_")&&this[t].reset()},getEventManager:function(){return o(this)},on:function(t,e,n){return this.getEventManager().on.apply(this,arguments),this},off:function(t,e,n){return this.getEventManager().off.apply(this,arguments),this}});var x=function(t){var e=function e(){/complete|loaded|interactive/.test(document.readyState)&&"undefined"!==typeof document.body&&null!=document.body?t():setTimeout(e,9)};e()};x(e.init)}.call("undefined"!==typeof window?window:void 0)},"50ce":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"inline-block"}},[n("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[t._v("Filename: ")]),t._v(" "),n("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:t.$t("excel.placeholder"),"prefix-icon":"el-icon-document"},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}})],1)},a=[],o={props:{value:{type:String,default:""}},computed:{filename:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},s=o,l=n("2877"),r=Object(l["a"])(s,i,a,!1,null,null,null);e["default"]=r.exports},5211:function(t,e,n){},5303:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{xs:9,sm:6,md:5,lg:4,xl:4}},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",attrs:{clearable:"",size:"small",placeholder:"搜索...","prefix-icon":"el-icon-search"},on:{input:t.getOrgs},model:{value:t.orgName,callback:function(e){t.orgName=e},expression:"orgName"}})],1),t._v(" "),n("el-tree",{staticStyle:{"margin-top":"15px"},attrs:{data:t.orgData,load:t.getOrgs,props:t.defaultProps,"expand-on-click-node":!1,lazy:""},on:{"node-click":t.handleNodeClick}})],1),t._v(" "),n("el-col",{attrs:{xs:15,sm:18,md:19,lg:20,xl:20}},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{padding:"6px 0"}},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Create"],expression:"['AbpIdentity.Users.Create']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新增")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Update"],expression:"['AbpIdentity.Users.Update']"}],staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("修改")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Delete"],expression:"['AbpIdentity.Users.Delete']"}],staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.handleDelete()}},slot:"reference"},[t._v("删除")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle,width:"580px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"small","label-width":"70px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"电话",prop:"phone"}},[n("el-input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"所属机构",prop:"orgId"}},[n("treeselect",{staticStyle:{width:"184px"},attrs:{"load-options":t.loadOrgs,options:t.orgs,placeholder:"选择所属机构"},model:{value:t.form.orgId,callback:function(e){t.$set(t.form,"orgId",e)},expression:"form.orgId"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"岗位",prop:"name"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"184px"},attrs:{size:"small",multiple:"",placeholder:"选择岗位"},model:{value:t.form.jobs,callback:function(e){t.$set(t.form,"jobs",e)},expression:"form.jobs"}},t._l(t.jobData,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"关联用户",prop:"userId"}},[n("el-input",{staticStyle:{width:"184px"},attrs:{readonly:"",placeholder:"请选择"},model:{value:t.form.userIdToName,callback:function(e){t.$set(t.form,"userIdToName",e)},expression:"form.userIdToName"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.handleSelectUser()}},slot:"append"})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"性别",prop:"gender"}},[n("el-radio-group",{staticStyle:{width:"184px"},model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}},[n("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),n("el-radio",{attrs:{label:0}},[t._v("女")])],1)],1),t._v(" "),n("el-form-item",{staticStyle:{margin:"left"},attrs:{label:"状态",prop:"enabled"}},[n("el-radio-group",{staticStyle:{width:"140px"},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}},[n("el-radio",{attrs:{label:!0}},[t._v("启用")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("禁用")])],1)],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"选择用户",width:"600px",top:"5vh","close-on-click-modal":!1,visible:t.userDialogTableVisible},on:{"update:visible":function(e){t.userDialogTableVisible=e}}},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.userHandleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.userHandleFilter}},[t._v("搜索")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.userListLoading,expression:"userListLoading"}],attrs:{data:t.userList,height:"300"},on:{"row-click":t.userHandleRowClick}},[n("el-table-column",{attrs:{label:"用户名",prop:"userName",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type"},[t._v(t._s(i.userName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"邮箱",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.email))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"电话",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.phoneNumber))])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{small:"",layout:"prev, pager, next",total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getUserList}})],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"90%"},attrs:{data:t.list,size:"small"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),n("el-table-column",{attrs:{label:"岗位名称",prop:"name",sortable:"custom",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(i)}}},[t._v(t._s(i.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"性别",prop:"gender",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("displayGender")(e.row.gender)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"电话",prop:"phone",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.phone))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"邮箱",prop:"email",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.email))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"所属机构",prop:"orgIdToName",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.orgIdToName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"状态",prop:"enable",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#F56C6C"},on:{change:function(n){return t.changeEnabled(e.row,e.row.enabled)}},model:{value:e.row.enabled,callback:function(n){t.$set(e.row,"enabled",n)},expression:"scope.row.enabled"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Update"],expression:"['AbpIdentity.Users.Update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Delete"],expression:"['AbpIdentity.Users.Delete']"}],attrs:{type:"danger",size:"mini",disabled:"admin"===i.userName,icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)],1)],1)},a=[],o=(n("7f7f"),n("ac6a"),n("53ca")),s=(n("61f7"),n("333d")),l=n("4381"),r=n("ca17"),c=n.n(r),u=(n("542c"),{id:null,name:null,gender:1,phone:null,email:null,enabled:!0,orgId:null,userId:null,jobs:[],userIdToName:null,orgIdToName:null}),d={name:"Employee",components:{Pagination:s["a"],Treeselect:c.a},directives:{permission:l["a"]},filters:{displayGender:function(t){var e={0:"女",1:"男"};return e[t]}},data:function(){return{rules:{name:[{required:!0,message:"请输入职员姓名",trigger:"blur"}]},defaultProps:{children:"children",label:"name",isLeaf:"leaf"},form:Object.assign({},u),list:null,orgName:"",orgs:[],orgData:[],jobData:[],userList:null,totalCount:0,listLoading:!0,userListLoading:!0,formLoading:!1,listQuery:{OrgId:null,Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,userDialogTableVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1}},created:function(){this.getList()},methods:{getOrgs:function(t,e){var n=this,i={};"object"!==Object(o["a"])(t)?t&&(i["filter"]=t):0!==t.level&&(i["id"]=t.data.id),setTimeout((function(){n.$axios.gets("/api/business/orgs/loadOrgs",i).then((function(t){e?e(t.items):n.orgData=t.items}))}),100)},getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/business/employee/all",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},getOrgNodes:function(t){var e=this;this.$axios.gets("/api/business/orgs/loadNodes").then((function(t){e.loadTree(t)}))},getJobs:function(){var t=this;this.$axios.gets("/api/business/job/jobs").then((function(e){t.jobData=e.items}))},fetchData:function(t){var e=this;this.orgs=[],this.getOrgNodes(t),this.getJobs(),this.$axios.gets("/api/business/employee/"+t).then((function(t){e.form=t,t.userId&&e.getUser(t.userId)}))},loadOrgs:function(t){var e=t.action,n=t.parentNode,i=t.callback;e===r["LOAD_CHILDREN_OPTIONS"]&&this.$axios.gets("/api/business/orgs/loadOrgs",{id:n.id}).then((function(t){n.children=t.items.map((function(t){return t.leaf||(t.children=null),t})),setTimeout((function(){i()}),100)}))},loadTree:function(t){var e=this;t.items.forEach((function(t){t.pid||(t.hasChildren=!t.leaf,t.leaf||(t.children=[]),e.orgs.push(t))})),this.setChildren(this.orgs,t.items)},setChildren:function(t,e){var n=this;t.forEach((function(t){e.forEach((function(e){e.pid==t.id&&(t.children||(t.children=[]),t.children.push(e))})),t.children&&n.setChildren(t.children,e)}))},getSupOrgs:function(t){var e=this;this.$axios.gets("/api/business/orgs/parents",{id:t}).then((function(t){e.orgs=t.items.map((function(t){return t.label=t.name,t.hasChildren&&(t.children=null),t}))}))},getUserList:function(){var t=this;this.userListLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/identity/users",this.listQuery).then((function(e){t.userList=e.items,t.userTotalCount=e.totalCount,t.userListLoading=!1}))},getUser:function(t){var e=this;this.$axios.gets("/api/identity/users/"+t).then((function(t){e.form.userIdToName=t.userName}))},userHandleFilter:function(){this.page=1,this.getUserList()},handleFilter:function(){this.page=1,this.getList()},handleSelectUser:function(){this.listQuery.Filter="",this.userDialogTableVisible=!0,this.getUserList()},handleNodeClick:function(t){this.listQuery.OrgId=t.id,this.getList()},save:function(){var t=this;this.$refs.form.validate((function(e){if(e){if(!t.form.orgId)return void t.$message({message:"所属机构不能为空",type:"warning"});t.formLoading=!0,t.form.roleNames=t.checkedRole,t.isEdit?t.$axios.puts("/api/business/employee/"+t.form.id,t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):t.$axios.posts("/api/business/employee",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1}))}}))},handleCreate:function(){var t=this;this.formTitle="新增职员",this.isEdit=!1,this.dialogFormVisible=!0,this.getJobs(),this.$axios.gets("/api/business/orgs/loadOrgs").then((function(e){t.orgs=e.items.map((function(t){return t.leaf||(t.children=null),t}))}))},handleDelete:function(t){var e=this,n=[],i="";if(t)n.push(t.id),i=t.name;else{if(0===this.multipleSelection.length)return void this.$message({message:"未选择",type:"warning"});this.multipleSelection.forEach((function(t){var e=t.id;n.push(e)})),i="选中项"}this.$confirm("是否删除"+i+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.posts("/api/business/employee/delete",n).then((function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleUpdate:function(t){if(this.formTitle="修改职员",this.isEdit=!0,t)this.fetchData(t.id),this.dialogFormVisible=!0;else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.fetchData(this.multipleSelection[0].id),this.dialogFormVisible=!0}},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)},userHandleRowClick:function(t,e,n){this.userDialogTableVisible=!1,this.form.userId=t.id,this.form.userIdToName=t.name},cancel:function(){this.form=Object.assign({},u),this.dialogFormVisible=!1,this.$refs.form.clearValidate()},changeEnabled:function(t,e){var n=this;t.active=e?"启用":"停用",this.$confirm("是否"+t.active+t.name+"？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$axios.puts("/api/business/employee/"+t.id,t).then((function(t){n.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})).catch((function(){t.enabled=!t.enabled}))})).catch((function(){t.enabled=!t.enabled}))}}},p=d,h=n("2877"),f=Object(h["a"])(p,i,a,!1,null,null,null);e["default"]=f.exports},"564c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{xs:9,sm:6,md:5,lg:4,xl:4}},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",attrs:{clearable:"",size:"small",placeholder:"搜索...","prefix-icon":"el-icon-search"},on:{input:t.getOrgs},model:{value:t.orgName,callback:function(e){t.orgName=e},expression:"orgName"}})],1),t._v(" "),n("el-tree",{staticStyle:{"margin-top":"15px"},attrs:{data:t.orgDatas,load:t.getOrgs,props:t.defaultProps,"expand-on-click-node":!1,lazy:""},on:{"node-click":t.handleNodeClick}})],1),t._v(" "),n("el-col",{attrs:{xs:15,sm:18,md:19,lg:20,xl:20}},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{padding:"6px 0"}},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Organization.Create"],expression:"['BaseService.Organization.Create']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新增")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Roles.Update"],expression:"['AbpIdentity.Roles.Update']"}],staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("修改")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Roles.Delete"],expression:"['AbpIdentity.Roles.Delete']"}],staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.handleDelete()}},slot:"reference"},[t._v("删除")])],1)],1),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.dialogFormVisible,title:t.formTitle,width:"520px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"small","label-width":"80px"}},[n("el-form-item",{attrs:{label:"机构类型",prop:"categoryId"}},[n("el-select",{staticStyle:{width:"380px"},attrs:{placeholder:"请选择",disabled:t.isEdit},model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}},[n("el-option",{attrs:{label:"公司",value:1}}),t._v(" "),n("el-option",{attrs:{label:"组织",value:2}}),t._v(" "),n("el-option",{attrs:{label:"部门",value:3}}),t._v(" "),n("el-option",{attrs:{label:"供应商",value:4}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[n("el-input",{staticStyle:{width:"380px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"机构排序",prop:"sort"}},[n("el-input-number",{staticStyle:{width:"380px"},attrs:{min:0,max:999,"controls-position":"right"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",t._n(e))},expression:"form.sort"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"顶级机构"}},[n("el-radio-group",{staticStyle:{width:"140px"},attrs:{disabled:t.isEdit},model:{value:t.isTop,callback:function(e){t.isTop=e},expression:"isTop"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"状态",prop:"enabled"}},[n("el-radio-group",{staticStyle:{width:"140px"},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}},[n("el-radio",{attrs:{label:!0}},[t._v("启用")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("禁用")])],1)],1),t._v(" "),!1===t.isTop?n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"上级机构",prop:"pid"}},[n("treeselect",{staticStyle:{width:"370px"},attrs:{"load-options":t.loadOrgs,options:t.orgs,placeholder:"选择上级机构"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}})],1):t._e()],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{size:"small",loading:t.formLoading,type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"90%"},attrs:{"row-key":"id",data:t.list,size:"small"},on:{"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),n("el-table-column",{attrs:{label:"机构名称",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(i)}}},[t._v(t._s(i.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"全称",prop:"fullName"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.fullName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"排序",prop:"sort",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.sort))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"机构类型",prop:"categoryId",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("displayCategory")(e.row.categoryId)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"启用",prop:"enable",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#F56C6C"},on:{change:function(n){return t.changeEnabled(e.row,e.row.enabled)}},model:{value:e.row.enabled,callback:function(n){t.$set(e.row,"enabled",n)},expression:"scope.row.enabled"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Organization.Update"],expression:"['BaseService.Organization.Update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Organization.Delete"],expression:"['BaseService.Organization.Delete']"}],attrs:{type:"danger",size:"mini",disabled:"admin"===i.name,icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)],1)],1)},a=[],o=(n("7f7f"),n("ac6a"),n("53ca")),s=(n("61f7"),n("333d")),l=n("4381"),r=n("ca17"),c=n.n(r),u=(n("542c"),{categoryId:3,id:null,name:null,pid:null,sort:999,enabled:!0}),d={name:"Organization",components:{Pagination:s["a"],Treeselect:c.a},directives:{permission:l["a"]},filters:{displayCategory:function(t){var e={1:"公司",2:"组织",3:"部门",4:"供应商"};return e[t]}},data:function(){return{rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请输入编号",trigger:"blur"}],sort:[{required:!0,message:"请输入序号",trigger:"blur"}]},defaultProps:{children:"children",label:"name",isLeaf:"leaf"},form:Object.assign({},u),orgName:"",list:[],orgDatas:[],orgs:[],totalCount:0,listLoading:!0,formLoading:!1,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1,isTop:!0}},created:function(){this.getList()},methods:{getOrgs:function(t,e){var n=this,i={};"object"!==Object(o["a"])(t)?t&&(i["filter"]=t):0!==t.level&&(i["id"]=t.data.id),setTimeout((function(){n.$axios.gets("/api/base/orgs/loadOrgs",i).then((function(t){e?e(t.items):n.orgDatas=t.items}))}),100)},getOrgNodes:function(t){var e=this;this.$axios.gets("/api/base/orgs/loadNodes").then((function(t){e.loadTree(t)}))},getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.list=[],this.$axios.gets("/api/base/orgs/all",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},fetchData:function(t){var e=this;this.getOrgNodes(t),this.$axios.gets("/api/base/orgs/"+t).then((function(t){e.form=t,e.isTop=!t.pid}))},loadOrgs:function(t){var e=t.action,n=t.parentNode,i=t.callback;e===r["LOAD_CHILDREN_OPTIONS"]&&this.$axios.gets("/api/base/orgs/loadOrgs",{id:n.id}).then((function(t){n.children=t.items.map((function(t){return t.leaf||(t.children=null),t})),setTimeout((function(){i()}),100)}))},loadTree:function(t){var e=this;t.items.forEach((function(t){t.pid||(t.hasChildren=!t.leaf,t.leaf||(t.children=[]),e.orgs.push(t))})),this.setChildren(this.orgs,t.items)},setChildren:function(t,e){var n=this;t.forEach((function(t){e.forEach((function(e){e.pid==t.id&&(t.children||(t.children=[]),t.children.push(e))})),t.children&&n.setChildren(t.children,e)}))},handleFilter:function(){this.page=1,this.getList()},save:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.formLoading=!0,t.isEdit?t.$axios.puts("/api/base/orgs/"+t.form.id,t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):t.$axios.posts("/api/base/orgs",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})),t.getOrgs())}))},handleCreate:function(){var t=this;this.formTitle="新增机构",this.isEdit=!1,this.dialogFormVisible=!0,this.$axios.gets("/api/base/orgs/loadOrgs").then((function(e){t.orgs=e.items.map((function(t){return t.leaf||(t.children=null),t}))}))},handleDelete:function(t){var e=this,n=[],i="";if(t)n.push(t.id),i=t.name;else{if(0===this.multipleSelection.length)return void this.$message({message:"未选择",type:"warning"});this.multipleSelection.forEach((function(t){var e=t.id;n.push(e)})),i="选中项"}this.$confirm("是否删除"+i+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.posts("/api/base/orgs/delete",n).then((function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleUpdate:function(t){if(this.formTitle="修改机构",this.isEdit=!0,t)this.dialogFormVisible=!0,this.fetchData(t.id);else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.fetchData(this.multipleSelection[0].id),this.dialogFormVisible=!0}},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)},cancel:function(){this.dialogFormVisible=!1,this.$refs.form.clearValidate(),this.form=Object.assign({},u),this.orgs=[]},handleNodeClick:function(t){this.listQuery.id=t.id,this.getList()},changeEnabled:function(t,e){var n=this;t.active=e?"启用":"停用",this.$confirm("是否"+t.active+t.name+"？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$axios.puts("/api/base/orgs/"+t.id,t).then((function(t){n.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})).catch((function(){t.enabled=!t.enabled}))})).catch((function(){t.enabled=!t.enabled}))}}},p=d,h=n("2877"),f=Object(h["a"])(p,i,a,!1,null,null,null);e["default"]=f.exports},5905:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"用户名",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.UserName,callback:function(e){t.$set(t.listQuery,"UserName",e)},expression:"listQuery.UserName"}}),t._v(" "),n("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{size:"small",placeholder:"Http方法"},model:{value:t.listQuery.HttpMethod,callback:function(e){t.$set(t.listQuery,"HttpMethod",e)},expression:"listQuery.HttpMethod"}},[n("el-option",{attrs:{label:"GET",value:"GET"}}),t._v(" "),n("el-option",{attrs:{label:"POST",value:"POST"}}),t._v(" "),n("el-option",{attrs:{label:"PUT",value:"PUT"}}),t._v(" "),n("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.list},on:{"sort-change":t.sortChange}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.actions,(function(e){return n("el-form",{key:e.id,staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"服务名称"}},[n("span",[t._v(t._s(e.serviceName))])]),t._v(" "),n("el-form-item",{attrs:{label:"方法名称"}},[n("span",[t._v(t._s(e.methodName))])]),t._v(" "),n("el-form-item",{attrs:{label:"执行耗时"}},[n("span",[t._v(t._s(e.executionDuration)+"ms")])])],1)}))}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"userName",sortable:"custom",label:"用户名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"clientIpAddress",label:"IP",width:"130px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"clientId",label:"clientId"}}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"browserInfo",label:"浏览器"}}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"url",label:"url"}}),t._v(" "),n("el-table-column",{attrs:{prop:"httpMethod",label:"Http方法",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["POST"==e.row.httpMethod?n("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.httpMethod))]):"GET"==e.row.httpMethod?n("el-tag",[t._v(t._s(e.row.httpMethod))]):"PUT"==e.row.httpMethod?n("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.row.httpMethod))]):"DELETE"==e.row.httpMethod?n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.row.httpMethod))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"httpStatusCode",label:"Http状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.httpStatusCode<"300"?n("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.httpStatusCode))]):e.row.httpStatusCode<"500"?n("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.row.httpStatusCode))]):e.row.httpStatusCode<="600"?n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.row.httpStatusCode))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"executionTime",label:"创建日期",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("formatDateTime")(e.row.executionTime)))])]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=(n("ac6a"),n("333d")),s=(n("4381"),{name:"Log",components:{Pagination:o["a"]},data:function(){return{list:null,totalCount:0,listLoading:!0,listQuery:{Url:null,UserName:null,ApplicationName:null,CorrelationId:null,HttpMethod:null,HttpStatusCode:null,MaxExecutionDuration:null,MinExecutionDuration:null,HasException:null,Sorting:null,SkipCount:0,MaxResultCount:10},page:1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/base/auditLogging/all",this.listQuery).then((function(e){e.items.forEach((function(t){t.lastModificationTime||(t.lastModificationTime=t.creationTime)})),t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},handleFilter:function(){this.page=1,this.getList()},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()}}}),l=s,r=(n("5e24"),n("2877")),c=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports},"5a55":function(t,e,n){},"5e24":function(t,e,n){"use strict";n("0c93")},"5fb3":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",[n("FilenameOption",{model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}}),t._v(" "),n("AutoWidthOption",{model:{value:t.autoWidth,callback:function(e){t.autoWidth=e},expression:"autoWidth"}}),t._v(" "),n("BookTypeOption",{model:{value:t.bookType,callback:function(e){t.bookType=e},expression:"bookType"}}),t._v(" "),n("el-button",{staticStyle:{margin:"0 0 20px 20px"},attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-document"},on:{click:t.handleDownload}},[t._v("\n      "+t._s(t.$t("excel.export"))+" Excel\n    ")]),t._v(" "),n("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"https://panjiachen.github.io/vue-element-admin-site/feature/component/excel.html",target:"_blank"}},[n("el-tag",{attrs:{type:"info"}},[t._v("Documentation")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading...",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"Id",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Title"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.title)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Author",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",[t._v(t._s(e.row.author))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Readings",width:"115",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.pageviews)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"Date",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-time"}),t._v(" "),n("span",[t._v(t._s(t._f("parseTime")(e.row.timestamp,"{y}-{m}-{d} {h}:{i}")))])]}}])})],1)],1)},a=[],o=n("2423"),s=n("ed08"),l=n("50ce"),r=n("8ad2"),c=n("ebe1"),u={name:"ExportExcel",components:{FilenameOption:l["default"],AutoWidthOption:r["default"],BookTypeOption:c["default"]},data:function(){return{list:null,listLoading:!0,downloadLoading:!1,filename:"",autoWidth:!0,bookType:"xlsx"}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(o["a"])().then((function(e){t.list=e.data.items,t.listLoading=!1}))},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([n.e("chunk-d159a5f0"),n.e("chunk-581b2547")]).then(n.bind(null,"4bf8d")).then((function(e){var n=["Id","Title","Author","Readings","Date"],i=["id","title","author","pageviews","display_time"],a=t.list,o=t.formatJson(i,a);e.export_json_to_excel({header:n,data:o,filename:t.filename,autoWidth:t.autoWidth,bookType:t.bookType}),t.downloadLoading=!1}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return"timestamp"===t?Object(s["j"])(e[t]):e[t]}))}))}}},d=u,p=(n("e9f5"),n("2877")),h=Object(p["a"])(d,i,a,!1,null,null,null);e["default"]=h.exports},"63fe":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",t._g(t._b({attrs:{width:"500px","close-on-click-modal":!1,"modal-append-to-body":!1},on:{open:t.onOpen,close:t.onClose}},"el-dialog",t.$attrs,!1),t.$listeners),[n("el-row",{attrs:{gutter:15}},[n("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"100px"}},[n("el-col",{attrs:{span:24}},[t.showFileName?n("el-form-item",{attrs:{label:"文件名",prop:"fileName"}},[n("el-input",{attrs:{placeholder:"请输入文件名",clearable:""},model:{value:t.formData.fileName,callback:function(e){t.$set(t.formData,"fileName",e)},expression:"formData.fileName"}})],1):t._e()],1)],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.close}},[t._v("\n        取消\n      ")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handelConfirm}},[t._v("\n        确定\n      ")])],1)],1)],1)},a=[],o=n("5530"),s={inheritAttrs:!1,props:["showFileName"],data:function(){return{formData:{fileName:void 0,type:"file"},rules:{fileName:[{required:!0,message:"请输入文件名",trigger:"blur"}],type:[{required:!0,message:"生成类型不能为空",trigger:"change"}]},typeOptions:[{label:"页面",value:"file"},{label:"弹窗",value:"dialog"}]}},computed:{},watch:{},mounted:function(){},methods:{onOpen:function(){this.showFileName&&(this.formData.fileName="".concat(+new Date,".vue"))},onClose:function(){},close:function(t){this.$emit("update:visible",!1)},handelConfirm:function(){var t=this;this.$refs.elForm.validate((function(e){e&&(t.$emit("confirm",Object(o["a"])({},t.formData)),t.close())}))}}},l=s,r=n("2877"),c=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports},"6a3a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,size:"small","label-width":"80px"}},[n("el-form-item",{attrs:{label:"字典标签",prop:"label"}},[n("el-input",{staticStyle:{width:"370px"},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"字典值",prop:"value"}},[n("el-input",{staticStyle:{width:"370px"},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"排序",prop:"sort"}},[n("el-input-number",{staticStyle:{width:"370px"},attrs:{min:0,max:999},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{loading:t.formLoading,type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,size:"small"}},[n("el-table-column",{attrs:{prop:"label",label:"字典标签"}}),t._v(" "),n("el-table-column",{attrs:{prop:"value",label:"字典值"}}),t._v(" "),n("el-table-column",{attrs:{label:"排序",prop:"sort",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.sort))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.DataDictionary.Update"],expression:"['BaseService.DataDictionary.Update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.DataDictionary.Delete"],expression:"['BaseService.DataDictionary.Delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=(n("ac6a"),n("4381")),s=n("333d"),l={id:null,label:null,value:null,sort:999},r={components:{Pagination:s["a"]},directives:{permission:o["a"]},data:function(){return{rules:{label:[{required:!0,message:"请输入字典标签",trigger:"blur"}],value:[{required:!0,message:"请输入字典值",trigger:"blur"}],sort:[{required:!0,message:"请输入序号",trigger:"blur",type:"number"}]},form:Object.assign({},l),list:null,totalCount:0,listLoading:!1,formLoading:!1,listQuery:{Pid:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1}},methods:{getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=10*(this.page-1),this.$axios.gets("/api/base/dictDetails/all",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},fetchData:function(t){var e=this;this.$axios.gets("/api/base/dictDetails/"+t).then((function(t){e.form=t}))},save:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.formLoading=!0,t.form.pid=t.listQuery.Pid,t.isEdit?t.$axios.puts("/api/base/dictDetails/"+t.form.id,t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):t.$axios.posts("/api/base/dictDetails",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})))}))},handleUpdate:function(t){this.formTitle="修改字典详情",this.isEdit=!0,this.fetchData(t.id),this.dialogFormVisible=!0},handleDelete:function(t){var e=this,n=[],i="";t?(n.push(t.id),i=t.label):(this.multipleSelection.forEach((function(t){var e=t.id;n.push(e)})),i="选中项"),this.$confirm("是否删除"+i+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.posts("/api/base/dictDetails/Delete",n).then((function(n){e.list.indexOf(t);e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},cancel:function(){this.form=Object.assign({},l),this.dialogFormVisible=!1,this.$refs.form.clearValidate()}}},c=r,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},"6a67":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form-detail",{attrs:{"is-edit":!1}})},a=[],o=n("dd8a"),s={name:"FormCreate",components:{FormDetail:o["default"]}},l=s,r=n("2877"),c=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports},"6c35":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticClass:"opts"},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Roles.Create"],expression:"['AbpIdentity.Roles.Create']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新增")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Roles.Update"],expression:"['AbpIdentity.Roles.Update']"}],staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("修改")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Roles.Delete"],expression:"['AbpIdentity.Roles.Delete']"}],staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.handleDelete()}},slot:"reference"},[t._v("删除")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"small","label-width":"66px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{staticStyle:{width:"380px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"属性"}},[n("el-checkbox",{model:{value:t.form.isDefault,callback:function(e){t.$set(t.form,"isDefault",e)},expression:"form.isDefault"}},[t._v("默认")]),t._v(" "),n("el-checkbox",{model:{value:t.form.isPublic,callback:function(e){t.$set(t.form,"isPublic",e)},expression:"form.isPublic"}},[t._v("公共")])],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-row",{attrs:{gutter:15}},[n("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{md:16}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",staticStyle:{height:"20px"},attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"role-span"},[t._v("角色列表")])]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,size:"small"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),n("el-table-column",{attrs:{label:"角色名",prop:"name",sortable:"custom",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(i)}}},[t._v(t._s(i.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"默认",prop:"isDefault",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("displayStatus")(e.row.isDefault)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"公共",prop:"isPublic",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("displayStatus")(e.row.isPublic)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"描述",prop:"description",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.description))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Roles.Update"],expression:"['AbpIdentity.Roles.Update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Roles.Delete"],expression:"['AbpIdentity.Roles.Delete']"}],attrs:{type:"danger",size:"mini",disabled:"admin"===i.name,icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount > 0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)],1),t._v(" "),n("el-col",{attrs:{md:8}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticStyle:{height:"20px","line-height":"20px"},attrs:{slot:"header"},slot:"header"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"选择指定角色的菜单权限",placement:"top"}},[n("span",[t._v("菜单权限")])]),t._v(" "),n("span",{staticStyle:{float:"right","margin-top":"-8px"}},[n("el-checkbox",{attrs:{disabled:1!=t.multipleSelection.length},on:{change:t.checkedAll},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("\n              全选")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Roles.ManagePermissions"],expression:"['AbpIdentity.Roles.ManagePermissions']"}],attrs:{loading:t.savePerLoading,disabled:1!=t.multipleSelection.length,icon:"el-icon-check",type:"text"},on:{click:t.savePer}},[t._v("保存")])],1)],1),t._v(" "),n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],ref:"tree",staticClass:"permission-tree",attrs:{"check-strictly":!0,data:t.menus,"show-checkbox":"","node-key":"id"},on:{check:t.checkNode}})],1)],1)],1)],1)},a=[],o=(n("7f7f"),n("ac6a"),n("61f7"),n("333d")),s=n("4381"),l={name:"Role",components:{Pagination:o["a"]},directives:{permission:s["a"]},filters:{displayStatus:function(t){var e={true:"是",false:"否"};return e[t]}},data:function(){return{rules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"}]},form:{},list:null,menuData:[],menus:[],totalCount:0,listLoading:!0,formLoading:!1,treeLoading:!1,savePerLoading:!1,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1,checked:!1}},created:function(){this.getList(),this.getMenuData()},methods:{getMenuData:function(){var t=this;this.treeLoading=!0,this.$axios.gets("/api/base/role-menus/tree").then((function(e){t.menuData=e.items,t.menus=e.items.filter((function(t){return null==t.pid})),t.setChildren(t.menus,e.items),t.treeLoading=!1}))},getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/identity/roles",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},fetchData:function(t){var e=this;this.$axios.gets("/api/identity/roles/"+t).then((function(t){e.form=t}))},handleFilter:function(){this.page=1,this.getList()},resetQuery:function(){},save:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.formLoading=!0,t.isEdit?t.$axios.puts("/api/identity/roles/"+t.form.id,t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):t.$axios.posts("/api/identity/roles",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})))}))},savePer:function(){var t=this;this.savePerLoading=!0;var e={},n=this.$refs.tree.getCheckedKeys();e.permissions=[],this.menuData.forEach((function(t){if(t.permission){var i={};i.name=t.permission,n.indexOf(t.id)>-1?i.isGranted=!0:i.isGranted=!1,e.permissions.push(i)}})),this.$axios.puts("/api/permission-management/permissions?providerName=R&providerKey="+this.multipleSelection[0].name,e).then((function(){t.$axios.posts("/api/base/role-menus/update",{roleId:t.multipleSelection[0].id,menuIds:n}).then((function(){t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.savePerLoading=!1})).catch((function(){t.savePerLoading=!1}))})).catch((function(){t.savePerLoading=!1}))},handleCreate:function(){this.formTitle="新增角色",this.isEdit=!1,this.form={},this.dialogFormVisible=!0},handleDelete:function(t){var e=this;t?this.$confirm("是否删除"+t.name+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.deletes("/api/identity/roles/"+t.id).then((function(n){var i=e.list.indexOf(t);e.list.splice(i,1),e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$alert("暂时不支持角色批量删除","提示",{confirmButtonText:"确定",callback:function(t){}})},handleUpdate:function(t){if(this.formTitle="修改角色",this.isEdit=!0,t)this.fetchData(t.id),this.dialogFormVisible=!0;else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.fetchData(this.multipleSelection[0].id),this.dialogFormVisible=!0}},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){var i=this;1==this.multipleSelection.length&&this.multipleSelection[0].id==t.id||(this.treeLoading=!0,this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t),this.$axios.gets("/api/base/role-menus/"+t.id).then((function(t){i.$refs.tree.setCheckedKeys(t.items),i.treeLoading=!1})))},setChildren:function(t,e){var n=this;t.forEach((function(t){e.forEach((function(e){e.pid==t.id&&(t.children||(t.children=[]),t.children.push(e))})),t.children&&n.setChildren(t.children,e)}))},checkedAll:function(){this.checked?this.$refs.tree.setCheckedNodes(this.menuData):this.$refs.tree.setCheckedKeys([])},checkNode:function(t,e){t.pid&&e.checkedKeys.indexOf(t.id)>-1&&this.$refs.tree.setChecked(t.pid,!0)},cancel:function(){this.dialogFormVisible=!1,this.$refs.form.clearValidate()}}},r=l,c=(n("c19c"),n("2877")),u=Object(c["a"])(r,i,a,!1,null,"d6724310",null);e["default"]=u.exports},"6cc1":function(t,e,n){"use strict";n("234c")},"6f60":function(t,e,n){},"7c63":function(t,e,n){"use strict";n("b97b")},"80de":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return makeUpJs}));var core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__),util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("3022"),util__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_2__),_utils_index__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ed08"),_config__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("2e2a"),units={KB:"1024",MB:"1024 / 1024",GB:"1024 / 1024 / 1024"},confGlobal,inheritAttrs={file:"",dialog:"inheritAttrs: false,"};function makeUpJs(t){confGlobal=t=JSON.parse(JSON.stringify(t));var e=[],n=[],i=[],a=[],o=buildMethod(),s=[];t.fields.forEach((function(t){buildAttributes(t,e,n,i,o,a,s)}));var l=buildexport(t,e.join("\n"),n.join("\n"),i.join("\n"),s.join("\n"),a.join("\n"),o.join("\n")),r='import Pagination from "@/components/Pagination";\n    import permission from "@/directive/permission/index.js";\n    ';return confGlobal=null,r+l}function buildAttributes(t,e,n,i,a,o,s){if(buildData(t,e),buildRules(t,n),t.options&&t.options.length&&(buildOptions(t,i),"dynamic"===t.dataType)){var l="".concat(t.fieldName,"Options"),r=Object(_utils_index__WEBPACK_IMPORTED_MODULE_3__["l"])(l);buildOptionMethod("get".concat(r),l,a)}t.props&&t.props.props&&buildProps(t,o),t.action&&"el-upload"===t.tag&&(s.push("".concat(t.fieldName,"Action: '").concat(t.action,"',\n      ").concat(t.fieldName,"fileList: [],")),a.push(buildBeforeUpload(t)),t["auto-upload"]||a.push(buildSubmitUpload(t))),t.children&&t.children.forEach((function(t){buildAttributes(t,e,n,i,a,o,s)}))}function buildMethod(){var t=[],e={getList:"getList() {\n        this.listLoading = true;\n        this.listQuery.SkipCount = (this.page - 1) * this.listQuery.MaxResultCount;\n        this.$axios\n          .gets('".concat(confGlobal.api,"', this.listQuery)\n          .then(response => {\n            this.list = response.items;\n            this.totalCount = response.totalCount;\n            this.listLoading = false;\n          });\n      },"),fetchData:"fetchData(id) {\n        this.$axios.gets('".concat(confGlobal.api,"/' + id).then(response => {\n          this.form = response;\n        });\n      },"),handleFilter:"handleFilter() {\n        this.page = 1;\n        this.getList();\n      },",handleCreate:"handleCreate() {\n        this.formTitle = '新增".concat(confGlobal.displayName,"';\n        this.isEdit = false;\n        this.dialogFormVisible = true;\n      },"),handleDelete:"handleDelete(row) {\n        var params = [];\n        let alert = '';\n        if (row) {\n          params.push(row.id);\n          alert = row.name;\n        } else {\n          if (this.multipleSelection.length === 0) {\n            this.$message({\n              message: '未选择',\n              type: 'warning'\n            });\n            return;\n          }\n          this.multipleSelection.forEach(element => {\n            let id = element.id;\n            params.push(id);\n          });\n          alert = '选中项';\n        }\n        this.$confirm('是否删除' + alert + '?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n          .then(() => {\n            this.$axios\n              .posts('".concat(confGlobal.api,"/delete', params)\n              .then(response => {\n                this.$notify({\n                  title: '成功',\n                  message: '删除成功',\n                  type: 'success',\n                  duration: 2000\n                });\n                this.getList();\n              });\n          })\n          .catch(() => {\n            this.$message({\n              type: 'info',\n              message: '已取消删除'\n            });\n          });\n      },"),handleUpdate:"handleUpdate(row) {\n        this.formTitle = '修改".concat(confGlobal.displayName,"';\n        this.isEdit = true;\n        if (row) {\n          this.fetchData(row.id);\n          this.dialogFormVisible = true;\n        } else {\n          if (this.multipleSelection.length != 1) {\n            this.$message({\n              message: '编辑必须选择单行',\n              type: 'warning'\n            });\n            return;\n          } else {\n            this.fetchData(this.multipleSelection[0].id);\n            this.dialogFormVisible = true;\n          }\n        }\n      },"),save:"save() {\n        this.$refs.form.validate(valid => {\n          if (valid) {\n            this.formLoading = true;\n            this.form.roleNames = this.checkedRole;\n            if (this.isEdit) {\n              this.$axios\n                .posts('".concat(confGlobal.api,"/data-post' , this.form)\n                .then(response => {\n                  this.formLoading = false;\n                  this.$notify({\n                    title: '成功',\n                    message: '更新成功',\n                    type: 'success',\n                    duration: 2000\n                  });\n                  this.dialogFormVisible = false;\n                  this.getList();\n                })\n                .catch(() => {\n                  this.formLoading = false;\n                });\n            } else {\n              this.$axios\n                .posts('").concat(confGlobal.api,"/data-post', this.form)\n                .then(response => {\n                  this.formLoading = false;\n                  this.$notify({\n                    title: '成功',\n                    message: '新增成功',\n                    type: 'success',\n                    duration: 2000\n                  });\n                  this.dialogFormVisible = false;\n                  this.getList();\n                })\n                .catch(() => {\n                  this.formLoading = false;\n                });\n            }\n          }\n        });\n      },"),sortChange:"sortChange(data) {\n        const { prop, order } = data;\n        if (!prop || !order) {\n          this.handleFilter();\n          return;\n        }\n        this.listQuery.Sorting = prop + ' ' + order;\n        this.handleFilter();\n      },",handleSelectionChange:"handleSelectionChange(val) {\n        this.multipleSelection = val;\n      },",handleRowClick:"handleRowClick(row, column, event) {\n        this.$refs.multipleTable.clearSelection();\n        this.$refs.multipleTable.toggleRowSelection(row);\n      },",cancel:"cancel() {\n        this.form = Object.assign({}, defaultForm);\n        this.dialogFormVisible = false;\n        this.$refs.form.clearValidate();\n      },"},n=e;return n&&Object.keys(n).forEach((function(e){t.push(n[e])})),t}function buildData(t,e){var n;void 0!==t.fieldName&&(n="string"!==typeof t.defaultValue||t.multiple?"".concat(JSON.stringify(t.defaultValue)):"'".concat(t.defaultValue,"'"),e.push("".concat(t.fieldName,": ").concat(n,",")))}function buildRules(conf,ruleList){if(void 0!==conf.fieldName){var rules=[];if(_config__WEBPACK_IMPORTED_MODULE_4__["f"][conf.tag]){if(conf.isRequired){var type=Object(util__WEBPACK_IMPORTED_MODULE_2__["isArray"])(conf.defaultValue)?"type: 'array',":"",message=Object(util__WEBPACK_IMPORTED_MODULE_2__["isArray"])(conf.defaultValue)?"请至少选择一个".concat(conf.fieldName):conf.placeholder;void 0===message&&(message="".concat(conf.label,"不能为空")),rules.push("{ required: true, ".concat(type," message: '").concat(message,"', trigger: '").concat(_config__WEBPACK_IMPORTED_MODULE_4__["f"][conf.tag],"' }"))}conf.regList&&Object(util__WEBPACK_IMPORTED_MODULE_2__["isArray"])(conf.regList)&&conf.regList.forEach((function(item){item.pattern&&rules.push("{ pattern: ".concat(eval(item.pattern),", message: '").concat(item.message,"', trigger: '").concat(_config__WEBPACK_IMPORTED_MODULE_4__["f"][conf.tag],"' }"))})),ruleList.push("".concat(conf.fieldName,": [").concat(rules.join(","),"],"))}}}function buildOptions(t,e){if(void 0!==t.fieldName){"dynamic"===t.dataType&&(t.options=[]);var n="".concat(t.fieldName,"Options: ").concat(JSON.stringify(t.options),",");e.push(n)}}function buildProps(t,e){"dynamic"===t.dataType&&("value"!==t.valueKey&&(t.props.props.value=t.valueKey),"label"!==t.labelKey&&(t.props.props.label=t.labelKey),"children"!==t.childrenKey&&(t.props.props.children=t.childrenKey));var n="".concat(t.fieldName,"Props: ").concat(JSON.stringify(t.props.props),",");e.push(n)}function buildBeforeUpload(t){var e=units[t.sizeUnit],n="",i="",a=[];t.fileSize&&(n="let isRightSize = file.size / ".concat(e," < ").concat(t.fileSize,"\n    if(!isRightSize){\n      this.$message.error('文件大小超过 ").concat(t.fileSize).concat(t.sizeUnit,"')\n    }"),a.push("isRightSize")),t.accept&&(i="let isAccept = new RegExp('".concat(t.accept,"').test(file.type)\n    if(!isAccept){\n      this.$message.error('应该选择").concat(t.accept,"类型的文件')\n    }"),a.push("isAccept"));var o="".concat(t.fieldName,"BeforeUpload(file) {\n    ").concat(n,"\n    ").concat(i,"\n    return ").concat(a.join("&&"),"\n  },");return a.length?o:""}function buildSubmitUpload(t){var e="submitUpload() {\n    this.$refs['".concat(t.fieldName,"'].submit()\n  },");return e}function buildOptionMethod(t,e,n){var i="".concat(t,"() {\n    // TODO 发起请求获取数据\n    this.").concat(e,"\n  },");n.push(i)}function buildexport(t,e,n,i,a,o,s){var l="const defaultForm = {\n    id: null,\n    ".concat(e,"}\n    "),r="form: Object.assign({}, defaultForm),\n    list: null,\n    totalCount: 0,\n    listLoading: true,\n    formLoading: false,\n    listQuery: {\n      Filter: '',\n      Sorting: '',\n      SkipCount: 0,\n      MaxResultCount: 10\n    },\n    page: 1,\n    dialogFormVisible: false,\n    multipleSelection: [],\n    formTitle: '',\n    isEdit: false,",c="".concat(_utils_index__WEBPACK_IMPORTED_MODULE_3__["e"],"{\n  \n  name: '").concat(confGlobal.formName,"',\n  components: { Pagination },\n  directives: { permission },\n  props: [],\n  data () {\n    return {\n      rules: {\n        ").concat(n,"\n      },\n      ").concat(r,"\n      ").concat(a,"\n      ").concat(i,"\n      ").concat(o,"\n    }\n  },\n  computed: {},\n  watch: {},\n  created () { this.getList() },\n  mounted () {},\n  methods: {\n    ").concat(s,"\n  }\n}");return l+c}},"89a2":function(t,e,n){"use strict";n("bd40")},"8ad2":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"inline-block"}},[n("label",{staticClass:"radio-label"},[t._v("Cell Auto-Width: ")]),t._v(" "),n("el-radio-group",{model:{value:t.autoWidth,callback:function(e){t.autoWidth=e},expression:"autoWidth"}},[n("el-radio",{attrs:{label:!0,border:""}},[t._v("\n      True\n    ")]),t._v(" "),n("el-radio",{attrs:{label:!1,border:""}},[t._v("\n      False\n    ")])],1)],1)},a=[],o={props:{value:{type:Boolean,default:!0}},computed:{autoWidth:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},s=o,l=n("2877"),r=Object(l["a"])(s,i,a,!1,null,null,null);e["default"]=r.exports},"8d41":function(t,e,n){},"918e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form-detail",{attrs:{"is-edit":!0}})},a=[],o=n("dd8a"),s={name:"FormEdit",components:{FormDetail:o["default"]}},l=s,r=n("2877"),c=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports},"93af":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("easy-flow",{attrs:{"is-edit":!1}})},a=[],o=n("32ae"),s={name:"FlowDesignCreate",components:{EasyFlow:o["default"]}},l=s,r=n("2877"),c=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports},"956a":function(t,e,n){},"99f4":function(t,e,n){"use strict";n("152c")},"9a73":function(t,e,n){},"9b7a":function(t,e,n){"use strict";n("3b2e")},"9e8e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索\n    ")]),t._v(" "),n("div",{staticStyle:{padding:"6px 0"}},[n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新增\n    ")]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("修改\n    ")]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.handleDelete()}},slot:"reference"},[t._v("删除")]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-s-check",size:"mini"},on:{click:function(e){return t.handleCheck()}}},[t._v("审核")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,size:"medium","label-width":"100px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入名称",clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"描述",prop:"description"}},[n("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入描述",clearable:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"价格",prop:"price"}},[n("el-input-number",{attrs:{placeholder:"价格"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"90%"},attrs:{data:t.list,size:"small"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),n("el-table-column",{attrs:{label:"名称",prop:"name",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"描述",prop:"description",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"价格",prop:"price",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"状态",prop:"status",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-tag",{attrs:{type:t._f("workflowStatusFilter")(i.status)}},[t._v(t._s(t._f("displayWorkflowStatus")(i.status)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"流程节点",prop:"nodeStatus",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type",on:{click:function(e){return t.findFlow(i)}}},[t._v(t._s(i.nodeStatus))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=(n("7f7f"),n("ac6a"),n("333d")),s=n("4381"),l=(n("2ef0"),{id:null,name:null,description:null,price:0,status:0}),r={name:"Book",components:{Pagination:o["a"]},directives:{permission:s["a"]},props:[],data:function(){return{rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}],price:[{required:!0,message:"价格",trigger:"blur"}]},form:Object.assign({},l),list:[],totalCount:0,listLoading:!0,formLoading:!1,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1}},computed:{},watch:{},created:function(){this.getList()},mounted:function(){},methods:{getListStatus:function(t,e){var n=this;this.$axios.posts("api/business/workflow/node-status",e).then((function(e){t.forEach((function(t){e.items.filter((function(e){e.entityId===t.id&&(t.status=e.status,t.nodeId=e.nodeId,t.nodeStatus=e.nodeName)}))})),n.list=t,n.listLoading=!1}))},getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/business/book",this.listQuery).then((function(e){t.totalCount=e.totalCount,t.getListStatus(e.items,e.items.map((function(t){return t.id})))}))},fetchData:function(t){var e=this;this.$axios.gets("/api/business/book/"+t).then((function(t){e.form=t}))},handleFilter:function(){this.page=1,this.getList()},handleCreate:function(){this.formTitle="新增图书",this.isEdit=!1,this.dialogFormVisible=!0},handleDelete:function(t){var e=this,n=[],i="";if(t)n.push(t.id),i=t.name;else{if(0===this.multipleSelection.length)return void this.$message({message:"未选择",type:"warning"});this.multipleSelection.forEach((function(t){var e=t.id;n.push(e)})),i="选中项"}this.$confirm("是否删除"+i+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.posts("/api/business/book/delete",n).then((function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleCheck:function(){var t=this;0!==this.multipleSelection.length?this.multipleSelection.length>1?this.$message({message:"暂不支持批量审核",type:"warning"}):this.$confirm("是否审核所选项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.puts("api/business/workflow/do/"+t.multipleSelection[0].id,{data:JSON.stringify(t.multipleSelection[0])}).then((function(e){t.$notify({title:"成功",message:"审核成功",type:"success",duration:2e3}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消审核"})})):this.$message({message:"未选择",type:"warning"})},findFlow:function(t){this.$router.push({path:"/tool/flowDisplay/"+t.nodeId})},handleUpdate:function(t){if(this.formTitle="修改图书",this.isEdit=!0,t)this.fetchData(t.id),this.dialogFormVisible=!0;else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.fetchData(this.multipleSelection[0].id),this.dialogFormVisible=!0}},save:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.formLoading=!0,t.form.roleNames=t.checkedRole,t.isEdit?t.$axios.posts("/api/business/book/data-post",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):t.$axios.posts("/api/business/book/data-post",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})))}))},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)},cancel:function(){this.form=Object.assign({},l),this.dialogFormVisible=!1,this.$refs.form.clearValidate()}}},c=r,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},"9ed6":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,"label-position":"left","label-width":"0px"}},[n("h3",{staticClass:"title"},[t._v("\n      ABP-MicroService 后台登录\n    ")]),t._v(" "),n("el-form-item",{attrs:{prop:"tenant"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"租户"},model:{value:t.loginForm.tenant,callback:function(e){t.$set(t.loginForm,"tenant",e)},expression:"loginForm.tenant"}},[n("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"cloud"},slot:"prefix"})],1)],1),t._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}},[n("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),t._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}},[n("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),t._v(" "),n("el-form-item",{staticStyle:{width:"100%"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,size:"medium",type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t.loading?n("span",[t._v("登 录 中...")]):n("span",[t._v("登 录")])])],1)],1)],1)},a=[],o=(n("ac6a"),n("456d"),n("1131")),s=n("c62e"),l=n("415c"),r={name:"Login",components:{LangSelect:o["a"],SocialSign:s["default"]},data:function(){var t=function(t,e,n){e.length<6?n(new Error("The password can not be less than 6 digits")):n()};return{loginForm:{tenant:void 0,username:"",password:"",client_id:l["a"].client.client_id,grant_type:l["a"].client.grant_type},loginRules:{username:[{required:!0,message:"username is required",trigger:"blur"}],password:[{required:!0,trigger:"blur",validator:t}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{}}},watch:{$route:{handler:function(t){var e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},created:function(){},destroyed:function(){},methods:{checkCapslock:function(t){var e=t.key;this.capsTooltip=e&&1===e.length&&e>="A"&&e<="Z"},showPwd:function(){var t=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){t.$refs.password.focus()}))},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){if(!e)return!1;t.loading=!0,t.$store.dispatch("user/userLogin",t.loginForm).then((function(){t.$router.push({path:t.redirect||"/",query:t.otherQuery}),t.loading=!1})).catch((function(){t.loading=!1}))}))},getOtherQuery:function(t){return Object.keys(t).reduce((function(e,n){return"redirect"!==n&&(e[n]=t[n]),e}),{})}}},c=r,u=(n("7c63"),n("2877")),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},a36b:function(t,e,n){t.exports=n.p+"static/img/404.a57b6f31.png"},a3c2:function(t,e,n){},a85b:function(t,e,n){"use strict";n("456d"),n("ac6a");var i=n("ed08"),a=Object(i["h"])("accept,accept-charset,accesskey,action,align,alt,async,autocomplete,autofocus,autoplay,autosave,bgcolor,border,buffered,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,http-equiv,name,contenteditable,contextmenu,controls,coords,data,datetime,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,method,for,form,formaction,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,ismap,itemprop,keytype,kind,label,lang,language,list,loop,low,manifest,max,maxlength,media,method,GET,POST,min,multiple,email,file,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,seamless,selected,shape,size,type,text,password,sizes,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,type,usemap,value,width,wrap");function o(t,e,n){e.props.value=n,e.on.input=function(e){t.$emit("input",e)}}var s={"el-input":{prepend:function(t,e,n){return t("template",{slot:"prepend"},[e[n]])},append:function(t,e,n){return t("template",{slot:"append"},[e[n]])}},"el-select":{options:function(t,e,n){var i=[];return e.options.forEach((function(e){i.push(t("el-option",{attrs:{label:e.label,value:e.value,disabled:e.disabled}}))})),i}},"el-radio-group":{options:function(t,e,n){var i=[];return e.options.forEach((function(n){"button"===e.optionType?i.push(t("el-radio-button",{attrs:{label:n.value}},[n.label])):i.push(t("el-radio",{attrs:{label:n.value,border:e.border}},[n.label]))})),i}},"el-checkbox-group":{options:function(t,e,n){var i=[];return e.options.forEach((function(n){"button"===e.optionType?i.push(t("el-checkbox-button",{attrs:{label:n.value}},[n.label])):i.push(t("el-checkbox",{attrs:{label:n.value,border:e.border}},[n.label]))})),i}},"el-upload":{"list-type":function(t,e,n){var i=[];return"picture-card"===e["list-type"]?i.push(t("i",{class:"el-icon-plus"})):i.push(t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[e.buttonText])),e.showTip&&i.push(t("div",{slot:"tip",class:"el-upload__tip"},["只能上传不超过 ",e.fileSize,e.sizeUnit," 的",e.accept,"文件"])),i}}};e["a"]={render:function(t){var e=this,n={attrs:{},props:{},on:{},style:{}},i=JSON.parse(JSON.stringify(this.conf)),l=[],r=s[i.tag];return r&&Object.keys(r).forEach((function(e){var n=r[e];i[e]&&l.push(n(t,i,e))})),Object.keys(i).forEach((function(t){var s=i[t];"fieldName"===t?o(e,n,i.defaultValue):n[t]?n[t]=s:a(t)?n.attrs[t]=s:n.props[t]=s})),t(this.conf.tag,n,l)},props:["conf"]}},aa6f:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right-board"},[n("el-tabs",{staticClass:"center-tabs",model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[n("el-tab-pane",{attrs:{label:"组件属性",name:"field"}}),t._v(" "),n("el-tab-pane",{attrs:{label:"表单属性",name:"form"}})],1),t._v(" "),n("div",{staticClass:"field-box"},[n("el-scrollbar",{staticClass:"right-scrollbar"},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:"field"===t.currentTab&&t.showField,expression:"currentTab==='field' && showField"}],attrs:{size:"small","label-width":"90px"}},[t.activeData.changeTag?n("el-form-item",{attrs:{label:"组件类型"}},[n("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择组件类型"},on:{change:t.tagChange},model:{value:t.activeData.fieldType,callback:function(e){t.$set(t.activeData,"fieldType",e)},expression:"activeData.fieldType"}},t._l(t.tagList,(function(e){return n("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(e){return n("el-option",{key:e.label,attrs:{label:e.label,value:e.fieldType}},[n("svg-icon",{staticClass:"node-icon",attrs:{"icon-class":e.fieldType}}),t._v(" "),n("span",[t._v(" "+t._s(e.label))])],1)})),1)})),1)],1):t._e(),t._v(" "),"import"===t.activeData.fieldType?n("el-form-item",{attrs:{label:"引用表单"}},[n("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择表单"},on:{change:t.importChange},model:{value:t.activeData.importId,callback:function(e){t.$set(t.activeData,"importId",e)},expression:"activeData.importId"}},t._l(t.formList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.formName,value:t.id}})})),1)],1):t._e(),t._v(" "),void 0!==t.activeData.importId?n("el-form-item",{attrs:{label:"表单字段"}},[n("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择字段"},model:{value:t.activeData.importField,callback:function(e){t.$set(t.activeData,"importField",e)},expression:"activeData.importField"}},t._l(t.fieldList,(function(t){return n("el-option",{key:t.fieldName,attrs:{label:t.fieldName,value:t.fieldName}})})),1)],1):t._e(),t._v(" "),void 0!==t.activeData.fieldName?n("el-form-item",{attrs:{label:"字段名"}},[n("el-input",{attrs:{placeholder:"请输入字段名（v-model）"},model:{value:t.activeData.fieldName,callback:function(e){t.$set(t.activeData,"fieldName",e)},expression:"activeData.fieldName"}})],1):t._e(),t._v(" "),void 0!==t.activeData.componentName?n("el-form-item",{attrs:{label:"组件名"}},[t._v("\n          "+t._s(t.activeData.componentName)+"\n        ")]):t._e(),t._v(" "),void 0!==t.activeData.label?n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.activeData.label,callback:function(e){t.$set(t.activeData,"label",e)},expression:"activeData.label"}})],1):t._e(),t._v(" "),void 0!==t.activeData.placeholder?n("el-form-item",{attrs:{label:"占位提示"}},[n("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:t.activeData.placeholder,callback:function(e){t.$set(t.activeData,"placeholder",e)},expression:"activeData.placeholder"}})],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"字段顺序"}},[n("el-input-number",{model:{value:t.activeData.fieldOrder,callback:function(e){t.$set(t.activeData,"fieldOrder",e)},expression:"activeData.fieldOrder"}})],1),t._v(" "),void 0!==t.activeData["start-placeholder"]?n("el-form-item",{attrs:{label:"开始占位"}},[n("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:t.activeData["start-placeholder"],callback:function(e){t.$set(t.activeData,"start-placeholder",e)},expression:"activeData['start-placeholder']"}})],1):t._e(),t._v(" "),void 0!==t.activeData["end-placeholder"]?n("el-form-item",{attrs:{label:"结束占位"}},[n("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:t.activeData["end-placeholder"],callback:function(e){t.$set(t.activeData,"end-placeholder",e)},expression:"activeData['end-placeholder']"}})],1):t._e(),t._v(" "),void 0!==t.activeData.span?n("el-form-item",{attrs:{label:"表单栅格"}},[n("el-slider",{attrs:{max:24,min:1,marks:{12:""}},on:{change:t.spanChange},model:{value:t.activeData.span,callback:function(e){t.$set(t.activeData,"span",e)},expression:"activeData.span"}})],1):t._e(),t._v(" "),"rowFormItem"===t.activeData.layout?n("el-form-item",{attrs:{label:"栅格间隔"}},[n("el-input-number",{attrs:{min:0,placeholder:"栅格间隔"},model:{value:t.activeData.gutter,callback:function(e){t.$set(t.activeData,"gutter",e)},expression:"activeData.gutter"}})],1):t._e(),t._v(" "),"rowFormItem"===t.activeData.layout?n("el-form-item",{attrs:{label:"布局模式"}},[n("el-radio-group",{model:{value:t.activeData.type,callback:function(e){t.$set(t.activeData,"type",e)},expression:"activeData.type"}},[n("el-radio-button",{attrs:{label:"default"}}),t._v(" "),n("el-radio-button",{attrs:{label:"flex"}})],1)],1):t._e(),t._v(" "),void 0!==t.activeData.justify&&"flex"===t.activeData.type?n("el-form-item",{attrs:{label:"水平排列"}},[n("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择水平排列"},model:{value:t.activeData.justify,callback:function(e){t.$set(t.activeData,"justify",e)},expression:"activeData.justify"}},t._l(t.justifyOptions,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t._v(" "),void 0!==t.activeData.align&&"flex"===t.activeData.type?n("el-form-item",{attrs:{label:"垂直排列"}},[n("el-radio-group",{model:{value:t.activeData.align,callback:function(e){t.$set(t.activeData,"align",e)},expression:"activeData.align"}},[n("el-radio-button",{attrs:{label:"top"}}),t._v(" "),n("el-radio-button",{attrs:{label:"middle"}}),t._v(" "),n("el-radio-button",{attrs:{label:"bottom"}})],1)],1):t._e(),t._v(" "),void 0!==t.activeData.labelWidth?n("el-form-item",{attrs:{label:"标签宽度"}},[n("el-input",{attrs:{type:"number",placeholder:"请输入标签宽度"},model:{value:t.activeData.labelWidth,callback:function(e){t.$set(t.activeData,"labelWidth",t._n(e))},expression:"activeData.labelWidth"}})],1):t._e(),t._v(" "),t.activeData.style&&void 0!==t.activeData.style.width?n("el-form-item",{attrs:{label:"组件宽度"}},[n("el-input",{attrs:{placeholder:"请输入组件宽度",clearable:""},model:{value:t.activeData.style.width,callback:function(e){t.$set(t.activeData.style,"width",e)},expression:"activeData.style.width"}})],1):t._e(),t._v(" "),void 0!==t.activeData.fieldName?n("el-form-item",{attrs:{label:"默认值"}},[n("el-input",{attrs:{value:t.setDefaultValue(t.activeData.defaultValue),placeholder:"请输入默认值"},on:{input:t.onDefaultValueInput}})],1):t._e(),t._v(" "),"el-checkbox-group"===t.activeData.tag?n("el-form-item",{attrs:{label:"至少应选"}},[n("el-input-number",{attrs:{value:t.activeData.min,min:0,placeholder:"至少应选"},on:{input:function(e){return t.$set(t.activeData,"min",e||void 0)}}})],1):t._e(),t._v(" "),"el-checkbox-group"===t.activeData.tag?n("el-form-item",{attrs:{label:"最多可选"}},[n("el-input-number",{attrs:{value:t.activeData.max,min:0,placeholder:"最多可选"},on:{input:function(e){return t.$set(t.activeData,"max",e||void 0)}}})],1):t._e(),t._v(" "),void 0!==t.activeData.prepend?n("el-form-item",{attrs:{label:"前缀"}},[n("el-input",{attrs:{placeholder:"请输入前缀"},model:{value:t.activeData.prepend,callback:function(e){t.$set(t.activeData,"prepend",e)},expression:"activeData.prepend"}})],1):t._e(),t._v(" "),void 0!==t.activeData.append?n("el-form-item",{attrs:{label:"后缀"}},[n("el-input",{attrs:{placeholder:"请输入后缀"},model:{value:t.activeData.append,callback:function(e){t.$set(t.activeData,"append",e)},expression:"activeData.append"}})],1):t._e(),t._v(" "),void 0!==t.activeData["prefix-icon"]?n("el-form-item",{attrs:{label:"前图标"}},[n("el-input",{attrs:{placeholder:"请输入前图标名称"},model:{value:t.activeData["prefix-icon"],callback:function(e){t.$set(t.activeData,"prefix-icon",e)},expression:"activeData['prefix-icon']"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-thumb"},on:{click:function(e){return t.openIconsDialog("prefix-icon")}},slot:"append"},[t._v("\n              选择\n            ")])],1)],1):t._e(),t._v(" "),void 0!==t.activeData["suffix-icon"]?n("el-form-item",{attrs:{label:"后图标"}},[n("el-input",{attrs:{placeholder:"请输入后图标名称"},model:{value:t.activeData["suffix-icon"],callback:function(e){t.$set(t.activeData,"suffix-icon",e)},expression:"activeData['suffix-icon']"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-thumb"},on:{click:function(e){return t.openIconsDialog("suffix-icon")}},slot:"append"},[t._v("\n              选择\n            ")])],1)],1):t._e(),t._v(" "),"el-cascader"===t.activeData.tag?n("el-form-item",{attrs:{label:"选项分隔符"}},[n("el-input",{attrs:{placeholder:"请输入选项分隔符"},model:{value:t.activeData.separator,callback:function(e){t.$set(t.activeData,"separator",e)},expression:"activeData.separator"}})],1):t._e(),t._v(" "),void 0!==t.activeData.autosize?n("el-form-item",{attrs:{label:"最小行数"}},[n("el-input-number",{attrs:{min:1,placeholder:"最小行数"},model:{value:t.activeData.autosize.minRows,callback:function(e){t.$set(t.activeData.autosize,"minRows",e)},expression:"activeData.autosize.minRows"}})],1):t._e(),t._v(" "),void 0!==t.activeData.autosize?n("el-form-item",{attrs:{label:"最大行数"}},[n("el-input-number",{attrs:{min:1,placeholder:"最大行数"},model:{value:t.activeData.autosize.maxRows,callback:function(e){t.$set(t.activeData.autosize,"maxRows",e)},expression:"activeData.autosize.maxRows"}})],1):t._e(),t._v(" "),void 0!==t.activeData.min?n("el-form-item",{attrs:{label:"最小值"}},[n("el-input-number",{attrs:{placeholder:"最小值"},model:{value:t.activeData.min,callback:function(e){t.$set(t.activeData,"min",e)},expression:"activeData.min"}})],1):t._e(),t._v(" "),void 0!==t.activeData.max?n("el-form-item",{attrs:{label:"最大值"}},[n("el-input-number",{attrs:{placeholder:"最大值"},model:{value:t.activeData.max,callback:function(e){t.$set(t.activeData,"max",e)},expression:"activeData.max"}})],1):t._e(),t._v(" "),void 0!==t.activeData.step?n("el-form-item",{attrs:{label:"步长"}},[n("el-input-number",{attrs:{placeholder:"步数"},model:{value:t.activeData.step,callback:function(e){t.$set(t.activeData,"step",e)},expression:"activeData.step"}})],1):t._e(),t._v(" "),"el-input-number"===t.activeData.tag?n("el-form-item",{attrs:{label:"精度"}},[n("el-input-number",{attrs:{min:0,placeholder:"精度"},model:{value:t.activeData.precision,callback:function(e){t.$set(t.activeData,"precision",e)},expression:"activeData.precision"}})],1):t._e(),t._v(" "),"el-input-number"===t.activeData.tag?n("el-form-item",{attrs:{label:"按钮位置"}},[n("el-radio-group",{model:{value:t.activeData["controls-position"],callback:function(e){t.$set(t.activeData,"controls-position",e)},expression:"activeData['controls-position']"}},[n("el-radio-button",{attrs:{label:""}},[t._v("\n              默认\n            ")]),t._v(" "),n("el-radio-button",{attrs:{label:"right"}},[t._v("\n              右侧\n            ")])],1)],1):t._e(),t._v(" "),void 0!==t.activeData.maxlength?n("el-form-item",{attrs:{label:"最多输入"}},[n("el-input",{attrs:{placeholder:"请输入字符长度"},model:{value:t.activeData.maxlength,callback:function(e){t.$set(t.activeData,"maxlength",e)},expression:"activeData.maxlength"}},[n("template",{slot:"append"},[t._v("\n              个字符\n            ")])],2)],1):t._e(),t._v(" "),void 0!==t.activeData["active-text"]?n("el-form-item",{attrs:{label:"开启提示"}},[n("el-input",{attrs:{placeholder:"请输入开启提示"},model:{value:t.activeData["active-text"],callback:function(e){t.$set(t.activeData,"active-text",e)},expression:"activeData['active-text']"}})],1):t._e(),t._v(" "),void 0!==t.activeData["inactive-text"]?n("el-form-item",{attrs:{label:"关闭提示"}},[n("el-input",{attrs:{placeholder:"请输入关闭提示"},model:{value:t.activeData["inactive-text"],callback:function(e){t.$set(t.activeData,"inactive-text",e)},expression:"activeData['inactive-text']"}})],1):t._e(),t._v(" "),void 0!==t.activeData["active-value"]?n("el-form-item",{attrs:{label:"开启值"}},[n("el-input",{attrs:{value:t.setDefaultValue(t.activeData["active-value"]),placeholder:"请输入开启值"},on:{input:function(e){return t.onSwitchValueInput(e,"active-value")}}})],1):t._e(),t._v(" "),void 0!==t.activeData["inactive-value"]?n("el-form-item",{attrs:{label:"关闭值"}},[n("el-input",{attrs:{value:t.setDefaultValue(t.activeData["inactive-value"]),placeholder:"请输入关闭值"},on:{input:function(e){return t.onSwitchValueInput(e,"inactive-value")}}})],1):t._e(),t._v(" "),void 0!==t.activeData.type&&"el-date-picker"===t.activeData.tag?n("el-form-item",{attrs:{label:"时间类型"}},[n("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择时间类型"},on:{change:t.dateTypeChange},model:{value:t.activeData.type,callback:function(e){t.$set(t.activeData,"type",e)},expression:"activeData.type"}},t._l(t.dateOptions,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t._v(" "),void 0!==t.activeData.name?n("el-form-item",{attrs:{label:"文件字段名"}},[n("el-input",{attrs:{placeholder:"请输入上传文件字段名"},model:{value:t.activeData.name,callback:function(e){t.$set(t.activeData,"name",e)},expression:"activeData.name"}})],1):t._e(),t._v(" "),void 0!==t.activeData.accept?n("el-form-item",{attrs:{label:"文件类型"}},[n("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择文件类型",clearable:""},model:{value:t.activeData.accept,callback:function(e){t.$set(t.activeData,"accept",e)},expression:"activeData.accept"}},[n("el-option",{attrs:{label:"图片",value:"image/*"}}),t._v(" "),n("el-option",{attrs:{label:"视频",value:"video/*"}}),t._v(" "),n("el-option",{attrs:{label:"音频",value:"audio/*"}}),t._v(" "),n("el-option",{attrs:{label:"excel",value:".xls,.xlsx"}}),t._v(" "),n("el-option",{attrs:{label:"word",value:".doc,.docx"}}),t._v(" "),n("el-option",{attrs:{label:"pdf",value:".pdf"}}),t._v(" "),n("el-option",{attrs:{label:"txt",value:".txt"}})],1)],1):t._e(),t._v(" "),void 0!==t.activeData.fileSize?n("el-form-item",{attrs:{label:"文件大小"}},[n("el-input",{attrs:{placeholder:"请输入文件大小"},model:{value:t.activeData.fileSize,callback:function(e){t.$set(t.activeData,"fileSize",t._n(e))},expression:"activeData.fileSize"}},[n("el-select",{style:{width:"66px"},attrs:{slot:"append"},slot:"append",model:{value:t.activeData.sizeUnit,callback:function(e){t.$set(t.activeData,"sizeUnit",e)},expression:"activeData.sizeUnit"}},[n("el-option",{attrs:{label:"KB",value:"KB"}}),t._v(" "),n("el-option",{attrs:{label:"MB",value:"MB"}}),t._v(" "),n("el-option",{attrs:{label:"GB",value:"GB"}})],1)],1)],1):t._e(),t._v(" "),void 0!==t.activeData.action?n("el-form-item",{attrs:{label:"上传地址"}},[n("el-input",{attrs:{placeholder:"请输入上传地址",clearable:""},model:{value:t.activeData.action,callback:function(e){t.$set(t.activeData,"action",e)},expression:"activeData.action"}})],1):t._e(),t._v(" "),void 0!==t.activeData["list-type"]?n("el-form-item",{attrs:{label:"列表类型"}},[n("el-radio-group",{attrs:{size:"small"},model:{value:t.activeData["list-type"],callback:function(e){t.$set(t.activeData,"list-type",e)},expression:"activeData['list-type']"}},[n("el-radio-button",{attrs:{label:"text"}},[t._v("\n              text\n            ")]),t._v(" "),n("el-radio-button",{attrs:{label:"picture"}},[t._v("\n              picture\n            ")]),t._v(" "),n("el-radio-button",{attrs:{label:"picture-card"}},[t._v("\n              picture-card\n            ")])],1)],1):t._e(),t._v(" "),void 0!==t.activeData.buttonText?n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"picture-card"!==t.activeData["list-type"],expression:"'picture-card' !== activeData['list-type']"}],attrs:{label:"按钮文字"}},[n("el-input",{attrs:{placeholder:"请输入按钮文字"},model:{value:t.activeData.buttonText,callback:function(e){t.$set(t.activeData,"buttonText",e)},expression:"activeData.buttonText"}})],1):t._e(),t._v(" "),void 0!==t.activeData["range-separator"]?n("el-form-item",{attrs:{label:"分隔符"}},[n("el-input",{attrs:{placeholder:"请输入分隔符"},model:{value:t.activeData["range-separator"],callback:function(e){t.$set(t.activeData,"range-separator",e)},expression:"activeData['range-separator']"}})],1):t._e(),t._v(" "),void 0!==t.activeData["picker-options"]?n("el-form-item",{attrs:{label:"时间段"}},[n("el-input",{attrs:{placeholder:"请输入时间段"},model:{value:t.activeData["picker-options"].selectableRange,callback:function(e){t.$set(t.activeData["picker-options"],"selectableRange",e)},expression:"activeData['picker-options'].selectableRange"}})],1):t._e(),t._v(" "),void 0!==t.activeData.format?n("el-form-item",{attrs:{label:"时间格式"}},[n("el-input",{attrs:{value:t.activeData.format,placeholder:"请输入时间格式"},on:{input:function(e){return t.setTimeValue(e)}}})],1):t._e(),t._v(" "),["el-checkbox-group","el-radio-group","el-select"].indexOf(t.activeData.tag)>-1?[n("el-divider",[t._v("选项")]),t._v(" "),n("draggable",{attrs:{list:t.activeData.options,animation:340,group:"selectItem",handle:".option-drag"}},t._l(t.activeData.options,(function(e,i){return n("div",{key:i,staticClass:"select-item"},[n("div",{staticClass:"select-line-icon option-drag"},[n("i",{staticClass:"el-icon-s-operation"})]),t._v(" "),n("el-input",{attrs:{placeholder:"选项名",size:"small"},model:{value:e.label,callback:function(n){t.$set(e,"label",n)},expression:"item.label"}}),t._v(" "),n("el-input",{attrs:{placeholder:"选项值",size:"small",value:e.value},on:{input:function(n){return t.setOptionValue(e,n)}}}),t._v(" "),n("div",{staticClass:"close-btn select-line-icon",on:{click:function(e){return t.activeData.options.splice(i,1)}}},[n("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),t._v(" "),n("div",{staticStyle:{"margin-left":"20px"}},[n("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:t.addSelectItem}},[t._v("\n              添加选项\n            ")])],1),t._v(" "),n("el-divider")]:t._e(),t._v(" "),["el-cascader"].indexOf(t.activeData.tag)>-1?[n("el-divider",[t._v("选项")]),t._v(" "),n("el-form-item",{attrs:{label:"数据类型"}},[n("el-radio-group",{attrs:{size:"small"},model:{value:t.activeData.dataType,callback:function(e){t.$set(t.activeData,"dataType",e)},expression:"activeData.dataType"}},[n("el-radio-button",{attrs:{label:"dynamic"}},[t._v("\n                动态数据\n              ")]),t._v(" "),n("el-radio-button",{attrs:{label:"static"}},[t._v("\n                静态数据\n              ")])],1)],1),t._v(" "),"dynamic"===t.activeData.dataType?[n("el-form-item",{attrs:{label:"标签键名"}},[n("el-input",{attrs:{placeholder:"请输入标签键名"},model:{value:t.activeData.labelKey,callback:function(e){t.$set(t.activeData,"labelKey",e)},expression:"activeData.labelKey"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"值键名"}},[n("el-input",{attrs:{placeholder:"请输入值键名"},model:{value:t.activeData.valueKey,callback:function(e){t.$set(t.activeData,"valueKey",e)},expression:"activeData.valueKey"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"子级键名"}},[n("el-input",{attrs:{placeholder:"请输入子级键名"},model:{value:t.activeData.childrenKey,callback:function(e){t.$set(t.activeData,"childrenKey",e)},expression:"activeData.childrenKey"}})],1)]:t._e(),t._v(" "),"static"===t.activeData.dataType?n("el-tree",{attrs:{draggable:"",data:t.activeData.options,"node-key":"id","expand-on-click-node":!1,"render-content":t.renderContent}}):t._e(),t._v(" "),"static"===t.activeData.dataType?n("div",{staticStyle:{"margin-left":"20px"}},[n("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:t.addTreeItem}},[t._v("\n              添加父级\n            ")])],1):t._e(),t._v(" "),n("el-divider")]:t._e(),t._v(" "),void 0!==t.activeData.optionType?n("el-form-item",{attrs:{label:"选项样式"}},[n("el-radio-group",{model:{value:t.activeData.optionType,callback:function(e){t.$set(t.activeData,"optionType",e)},expression:"activeData.optionType"}},[n("el-radio-button",{attrs:{label:"default"}},[t._v("\n              默认\n            ")]),t._v(" "),n("el-radio-button",{attrs:{label:"button"}},[t._v("\n              按钮\n            ")])],1)],1):t._e(),t._v(" "),void 0!==t.activeData["active-color"]?n("el-form-item",{attrs:{label:"开启颜色"}},[n("el-color-picker",{model:{value:t.activeData["active-color"],callback:function(e){t.$set(t.activeData,"active-color",e)},expression:"activeData['active-color']"}})],1):t._e(),t._v(" "),void 0!==t.activeData["inactive-color"]?n("el-form-item",{attrs:{label:"关闭颜色"}},[n("el-color-picker",{model:{value:t.activeData["inactive-color"],callback:function(e){t.$set(t.activeData,"inactive-color",e)},expression:"activeData['inactive-color']"}})],1):t._e(),t._v(" "),void 0!==t.activeData["allow-half"]?n("el-form-item",{attrs:{label:"允许半选"}},[n("el-switch",{model:{value:t.activeData["allow-half"],callback:function(e){t.$set(t.activeData,"allow-half",e)},expression:"activeData['allow-half']"}})],1):t._e(),t._v(" "),void 0!==t.activeData["show-text"]?n("el-form-item",{attrs:{label:"辅助文字"}},[n("el-switch",{on:{change:t.rateTextChange},model:{value:t.activeData["show-text"],callback:function(e){t.$set(t.activeData,"show-text",e)},expression:"activeData['show-text']"}})],1):t._e(),t._v(" "),void 0!==t.activeData["show-score"]?n("el-form-item",{attrs:{label:"显示分数"}},[n("el-switch",{on:{change:t.rateScoreChange},model:{value:t.activeData["show-score"],callback:function(e){t.$set(t.activeData,"show-score",e)},expression:"activeData['show-score']"}})],1):t._e(),t._v(" "),void 0!==t.activeData["show-stops"]?n("el-form-item",{attrs:{label:"显示间断点"}},[n("el-switch",{model:{value:t.activeData["show-stops"],callback:function(e){t.$set(t.activeData,"show-stops",e)},expression:"activeData['show-stops']"}})],1):t._e(),t._v(" "),void 0!==t.activeData.range?n("el-form-item",{attrs:{label:"范围选择"}},[n("el-switch",{on:{change:t.rangeChange},model:{value:t.activeData.range,callback:function(e){t.$set(t.activeData,"range",e)},expression:"activeData.range"}})],1):t._e(),t._v(" "),void 0!==t.activeData.border&&"default"===t.activeData.optionType?n("el-form-item",{attrs:{label:"是否带边框"}},[n("el-switch",{model:{value:t.activeData.border,callback:function(e){t.$set(t.activeData,"border",e)},expression:"activeData.border"}})],1):t._e(),t._v(" "),"el-color-picker"===t.activeData.tag?n("el-form-item",{attrs:{label:"颜色格式"}},[n("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择颜色格式"},on:{change:t.colorFormatChange},model:{value:t.activeData["color-format"],callback:function(e){t.$set(t.activeData,"color-format",e)},expression:"activeData['color-format']"}},t._l(t.colorFormatOptions,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t._v(" "),void 0===t.activeData.size||"button"!==t.activeData.optionType&&!t.activeData.border&&"el-color-picker"!==t.activeData.tag?t._e():n("el-form-item",{attrs:{label:"选项尺寸"}},[n("el-radio-group",{model:{value:t.activeData.size,callback:function(e){t.$set(t.activeData,"size",e)},expression:"activeData.size"}},[n("el-radio-button",{attrs:{label:"medium"}},[t._v("\n              中等\n            ")]),t._v(" "),n("el-radio-button",{attrs:{label:"small"}},[t._v("\n              较小\n            ")]),t._v(" "),n("el-radio-button",{attrs:{label:"mini"}},[t._v("\n              迷你\n            ")])],1)],1),t._v(" "),void 0!==t.activeData["show-word-limit"]?n("el-form-item",{attrs:{label:"输入统计"}},[n("el-switch",{model:{value:t.activeData["show-word-limit"],callback:function(e){t.$set(t.activeData,"show-word-limit",e)},expression:"activeData['show-word-limit']"}})],1):t._e(),t._v(" "),"el-input-number"===t.activeData.tag?n("el-form-item",{attrs:{label:"严格步数"}},[n("el-switch",{model:{value:t.activeData["step-strictly"],callback:function(e){t.$set(t.activeData,"step-strictly",e)},expression:"activeData['step-strictly']"}})],1):t._e(),t._v(" "),"el-cascader"===t.activeData.tag?n("el-form-item",{attrs:{label:"是否多选"}},[n("el-switch",{model:{value:t.activeData.props.props.multiple,callback:function(e){t.$set(t.activeData.props.props,"multiple",e)},expression:"activeData.props.props.multiple"}})],1):t._e(),t._v(" "),"el-cascader"===t.activeData.tag?n("el-form-item",{attrs:{label:"展示全路径"}},[n("el-switch",{model:{value:t.activeData["show-all-levels"],callback:function(e){t.$set(t.activeData,"show-all-levels",e)},expression:"activeData['show-all-levels']"}})],1):t._e(),t._v(" "),"el-cascader"===t.activeData.tag?n("el-form-item",{attrs:{label:"可否筛选"}},[n("el-switch",{model:{value:t.activeData.filterable,callback:function(e){t.$set(t.activeData,"filterable",e)},expression:"activeData.filterable"}})],1):t._e(),t._v(" "),void 0!==t.activeData.clearable?n("el-form-item",{attrs:{label:"能否清空"}},[n("el-switch",{model:{value:t.activeData.clearable,callback:function(e){t.$set(t.activeData,"clearable",e)},expression:"activeData.clearable"}})],1):t._e(),t._v(" "),void 0!==t.activeData.showTip?n("el-form-item",{attrs:{label:"显示提示"}},[n("el-switch",{model:{value:t.activeData.showTip,callback:function(e){t.$set(t.activeData,"showTip",e)},expression:"activeData.showTip"}})],1):t._e(),t._v(" "),void 0!==t.activeData.multiple?n("el-form-item",{attrs:{label:"多选文件"}},[n("el-switch",{model:{value:t.activeData.multiple,callback:function(e){t.$set(t.activeData,"multiple",e)},expression:"activeData.multiple"}})],1):t._e(),t._v(" "),void 0!==t.activeData["auto-upload"]?n("el-form-item",{attrs:{label:"自动上传"}},[n("el-switch",{model:{value:t.activeData["auto-upload"],callback:function(e){t.$set(t.activeData,"auto-upload",e)},expression:"activeData['auto-upload']"}})],1):t._e(),t._v(" "),void 0!==t.activeData.isReadonly?n("el-form-item",{attrs:{label:"是否只读"}},[n("el-switch",{model:{value:t.activeData.isReadonly,callback:function(e){t.$set(t.activeData,"isReadonly",e)},expression:"activeData.isReadonly"}})],1):t._e(),t._v(" "),void 0!==t.activeData.disabled?n("el-form-item",{attrs:{label:"是否禁用"}},[n("el-switch",{model:{value:t.activeData.disabled,callback:function(e){t.$set(t.activeData,"disabled",e)},expression:"activeData.disabled"}})],1):t._e(),t._v(" "),"el-select"===t.activeData.tag?n("el-form-item",{attrs:{label:"是否可搜索"}},[n("el-switch",{model:{value:t.activeData.filterable,callback:function(e){t.$set(t.activeData,"filterable",e)},expression:"activeData.filterable"}})],1):t._e(),t._v(" "),"el-select"===t.activeData.tag?n("el-form-item",{attrs:{label:"是否多选"}},[n("el-switch",{on:{change:t.multipleChange},model:{value:t.activeData.multiple,callback:function(e){t.$set(t.activeData,"multiple",e)},expression:"activeData.multiple"}})],1):t._e(),t._v(" "),void 0!==t.activeData.isRequired?n("el-form-item",{attrs:{label:"是否必填"}},[n("el-switch",{model:{value:t.activeData.isRequired,callback:function(e){t.$set(t.activeData,"isRequired",e)},expression:"activeData.isRequired"}})],1):t._e(),t._v(" "),t.activeData.layoutTree?[n("el-divider",[t._v("布局结构树")]),t._v(" "),n("el-tree",{attrs:{data:[t.activeData],props:t.layoutTreeProps,"node-key":"renderKey","default-expand-all":"",draggable:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,a=e.data;return n("span",{},[n("span",{staticClass:"node-label"},[n("svg-icon",{staticClass:"node-icon",attrs:{"icon-class":a.fieldType}}),t._v("\n                "+t._s(i.label)+"\n              ")],1)])}}],null,!1,1468903242)})]:t._e(),t._v(" "),"colFormItem"===t.activeData.layout?[n("el-divider",[t._v("正则校验")]),t._v(" "),t._l(t.activeData.regList,(function(e,i){return n("div",{key:i,staticClass:"reg-item"},[n("span",{staticClass:"close-btn",on:{click:function(e){return t.activeData.regList.splice(i,1)}}},[n("i",{staticClass:"el-icon-close"})]),t._v(" "),n("el-form-item",{attrs:{label:"表达式"}},[n("el-input",{attrs:{placeholder:"请输入正则"},model:{value:e.pattern,callback:function(n){t.$set(e,"pattern",n)},expression:"item.pattern"}})],1),t._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"错误提示"}},[n("el-input",{attrs:{placeholder:"请输入错误提示"},model:{value:e.message,callback:function(n){t.$set(e,"message",n)},expression:"item.message"}})],1)],1)})),t._v(" "),n("div",{staticStyle:{"margin-left":"20px"}},[n("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:t.addReg}},[t._v("\n              添加规则\n            ")])],1)]:t._e()],2),t._v(" "),n("el-form",{directives:[{name:"show",rawName:"v-show",value:"form"===t.currentTab,expression:"currentTab === 'form'"}],attrs:{size:"small","label-width":"90px"}},[n("el-form-item",{attrs:{label:"表单名"}},[n("el-input",{attrs:{placeholder:"请输入表单名（ref）"},model:{value:t.formConf.formName,callback:function(e){t.$set(t.formConf,"formName",e)},expression:"formConf.formName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"显示名"}},[n("el-input",{attrs:{placeholder:"请输入表单名显示名称"},model:{value:t.formConf.displayName,callback:function(e){t.$set(t.formConf,"displayName",e)},expression:"formConf.displayName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"api接口"}},[n("el-input",{attrs:{placeholder:"请输入表单名后台接口"},model:{value:t.formConf.api,callback:function(e){t.$set(t.formConf,"api",e)},expression:"formConf.api"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"表单描述"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.formConf.description,callback:function(e){t.$set(t.formConf,"description",e)},expression:"formConf.description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"表单尺寸"}},[n("el-radio-group",{model:{value:t.formConf.size,callback:function(e){t.$set(t.formConf,"size",e)},expression:"formConf.size"}},[n("el-radio-button",{attrs:{label:"medium"}},[t._v("\n              中等\n            ")]),t._v(" "),n("el-radio-button",{attrs:{label:"small"}},[t._v("\n              较小\n            ")]),t._v(" "),n("el-radio-button",{attrs:{label:"mini"}},[t._v("\n              迷你\n            ")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"标签对齐"}},[n("el-radio-group",{model:{value:t.formConf.labelPosition,callback:function(e){t.$set(t.formConf,"labelPosition",e)},expression:"formConf.labelPosition"}},[n("el-radio-button",{attrs:{label:"left"}},[t._v("\n              左对齐\n            ")]),t._v(" "),n("el-radio-button",{attrs:{label:"right"}},[t._v("\n              右对齐\n            ")]),t._v(" "),n("el-radio-button",{attrs:{label:"top"}},[t._v("\n              顶部对齐\n            ")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"标签宽度"}},[n("el-input-number",{attrs:{placeholder:"标签宽度"},model:{value:t.formConf.labelWidth,callback:function(e){t.$set(t.formConf,"labelWidth",e)},expression:"formConf.labelWidth"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"栅格间隔"}},[n("el-input-number",{attrs:{min:0,placeholder:"栅格间隔"},model:{value:t.formConf.gutter,callback:function(e){t.$set(t.formConf,"gutter",e)},expression:"formConf.gutter"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"禁用表单"}},[n("el-switch",{model:{value:t.formConf.disabled,callback:function(e){t.$set(t.formConf,"disabled",e)},expression:"formConf.disabled"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"表单按钮"}},[n("el-switch",{model:{value:t.formConf.formBtns,callback:function(e){t.$set(t.formConf,"formBtns",e)},expression:"formConf.formBtns"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"显示未选中组件边框"}},[n("el-switch",{model:{value:t.formConf.unFocusedComponentBorder,callback:function(e){t.$set(t.formConf,"unFocusedComponentBorder",e)},expression:"formConf.unFocusedComponentBorder"}})],1)],1)],1)],1),t._v(" "),n("treeNode-dialog",{attrs:{visible:t.dialogVisible,title:"添加选项"},on:{"update:visible":function(e){t.dialogVisible=e},commit:t.addNode}}),t._v(" "),n("icons-dialog",{attrs:{visible:t.iconsVisible,current:t.activeData[t.currentIconModel]},on:{"update:visible":function(e){t.iconsVisible=e},select:t.setIcon}})],1)},a=[],o=(n("7514"),n("28a5"),n("20d6"),n("3022")),s=n("cd1b"),l=n("ed08"),r=n("dd23"),c=n("2e2a"),u={date:"yyyy-MM-dd",week:"yyyy 第 WW 周",month:"yyyy-MM",year:"yyyy",datetime:"yyyy-MM-dd HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-MM",datetimerange:"yyyy-MM-dd HH:mm:ss"},d={components:{TreeNodeDialog:s["default"],IconsDialog:r["default"]},props:["showField","activeData","formConf"],data:function(){return{formList:null,fieldList:null,currentTab:"field",currentNode:null,dialogVisible:!1,iconsVisible:!1,currentIconModel:null,dateTypeOptions:[{label:"日(date)",value:"date"},{label:"周(week)",value:"week"},{label:"月(month)",value:"month"},{label:"年(year)",value:"year"},{label:"日期时间(datetime)",value:"datetime"}],dateRangeTypeOptions:[{label:"日期范围(daterange)",value:"daterange"},{label:"月范围(monthrange)",value:"monthrange"},{label:"日期时间范围(datetimerange)",value:"datetimerange"}],colorFormatOptions:[{label:"hex",value:"hex"},{label:"rgb",value:"rgb"},{label:"rgba",value:"rgba"},{label:"hsv",value:"hsv"},{label:"hsl",value:"hsl"}],justifyOptions:[{label:"start",value:"start"},{label:"end",value:"end"},{label:"center",value:"center"},{label:"space-around",value:"space-around"},{label:"space-between",value:"space-between"}],layoutTreeProps:{label:function(t,e){return t.componentName||"".concat(t.label,": ").concat(t.fieldName)}}}},computed:{documentLink:function(){return this.activeData.document||"https://element.eleme.cn/#/zh-CN/component/installation"},dateOptions:function(){return void 0!==this.activeData.type&&"el-date-picker"===this.activeData.tag?void 0===this.activeData["start-placeholder"]?this.dateTypeOptions:this.dateRangeTypeOptions:[]},tagList:function(){return[{label:"输入型组件",options:c["c"]},{label:"选择型组件",options:c["e"]},{label:"引用型组件",options:c["b"]}]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.$axios.gets("/api/business/form/list").then((function(e){t.formList=e.items}))},getField:function(t){var e=this;this.$axios.gets("/api/business/form/field/"+t).then((function(t){e.fieldList=t.items}))},addReg:function(){this.activeData.regList.push({pattern:"",message:""})},addSelectItem:function(){this.activeData.options.push({label:"",value:""})},addTreeItem:function(){++this.idGlobal,this.dialogVisible=!0,this.currentNode=this.activeData.options},renderContent:function(t,e){var n=this,i=e.node,a=e.data;e.store;return t("div",{class:"custom-tree-node"},[t("span",[i.label]),t("span",{class:"node-operation"},[t("i",{on:{click:function(){return n.append(a)}},class:"el-icon-plus",attrs:{title:"添加"}}),t("i",{on:{click:function(){return n.remove(i,a)}},class:"el-icon-delete",attrs:{title:"删除"}})])])},append:function(t){t.children||this.$set(t,"children",[]),this.dialogVisible=!0,this.currentNode=t.children},remove:function(t,e){var n=t.parent,i=n.data.children||n.data,a=i.findIndex((function(t){return t.id===e.id}));i.splice(a,1)},addNode:function(t){this.currentNode.push(t)},setOptionValue:function(t,e){t.value=Object(l["g"])(e)?+e:e},setDefaultValue:function(t){return Array.isArray(t)?t.join(","):["string","number"].indexOf(t)>-1?t:"boolean"===typeof t?"".concat(t):t},onDefaultValueInput:function(t){Object(o["isArray"])(this.activeData.defaultValue)?this.$set(this.activeData,"defaultValue",t.split(",").map((function(t){return Object(l["g"])(t)?+t:t}))):["true","false"].indexOf(t)>-1?this.$set(this.activeData,"defaultValue",JSON.parse(t)):this.$set(this.activeData,"defaultValue",Object(l["g"])(t)?+t:t)},onSwitchValueInput:function(t,e){["true","false"].indexOf(t)>-1?this.$set(this.activeData,e,JSON.parse(t)):this.$set(this.activeData,e,Object(l["g"])(t)?+t:t)},setTimeValue:function(t,e){var n="week"===e?u.date:t;this.$set(this.activeData,"defaultValue",null),this.$set(this.activeData,"value-format",n),this.$set(this.activeData,"format",t)},spanChange:function(t){this.formConf.span=t},multipleChange:function(t){this.$set(this.activeData,"defaultValue",t?[]:"")},dateTypeChange:function(t){this.setTimeValue(u[t],t)},rangeChange:function(t){this.$set(this.activeData,"defaultValue",t?[this.activeData.min,this.activeData.max]:this.activeData.min)},rateTextChange:function(t){t&&(this.activeData["show-score"]=!1)},rateScoreChange:function(t){t&&(this.activeData["show-text"]=!1)},colorFormatChange:function(t){this.activeData.defaultValue=null,this.activeData["show-alpha"]=t.indexOf("a")>-1,this.activeData.renderKey=+new Date},openIconsDialog:function(t){this.iconsVisible=!0,this.currentIconModel=t},setIcon:function(t){this.activeData[this.currentIconModel]=t},tagChange:function(t){var e=c["c"].find((function(e){return e.fieldType===t}));e||(e=c["e"].find((function(e){return e.fieldType===t}))),this.$emit("tag-change",e)},importChange:function(t){this.getField(t)}}},p=d,h=(n("467e"),n("2877")),f=Object(h["a"])(p,i,a,!1,null,"a2e9a374",null);e["default"]=f.exports},acdd:function(t,e,n){"use strict";n("caa2")},b829:function(t,e,n){"use strict";n.r(e);n("386d");var i,a,o={name:"AuthRedirect",created:function(){var t=window.location.search.slice(1);window.localStorage&&(window.localStorage.setItem("x-admin-oauth-code",t),window.close())},render:function(t){return t()}},s=o,l=n("2877"),r=Object(l["a"])(s,i,a,!1,null,null,null);e["default"]=r.exports},b97b:function(t,e,n){},bb22:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"basicInfoForm",attrs:{model:t.info,rules:t.rules,"label-width":"150px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"表单名",prop:"formName"}},[n("el-input",{attrs:{disabled:""},model:{value:t.info.formName,callback:function(e){t.$set(t.info,"formName",e)},expression:"info.formName"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"命名空间",prop:"namespace"}},[n("el-input",{attrs:{placeholder:"请输入命名空间"},model:{value:t.info.namespace,callback:function(e){t.$set(t.info,"namespace",e)},expression:"info.namespace"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"实体名称",prop:"entityName"}},[n("el-input",{attrs:{placeholder:"请输入实体名称"},model:{value:t.info.entityName,callback:function(e){t.$set(t.info,"entityName",e)},expression:"info.entityName"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"表名称",prop:"tableName"}},[n("el-input",{attrs:{placeholder:"请输入表名称"},model:{value:t.info.tableName,callback:function(e){t.$set(t.info,"tableName",e)},expression:"info.tableName"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.info.remark,callback:function(e){t.$set(t.info,"remark",e)},expression:"info.remark"}})],1)],1)],1)],1)},a=[],o={name:"BasicInfoForm",props:{info:{type:Object,default:null}},data:function(){return{rules:{tableName:[{required:!0,message:"请输入表名称",trigger:"blur"}],entityName:[{required:!0,message:"请输入实体类名称",trigger:"blur"}],namespace:[{required:!0,message:"请输入命名空间",trigger:"blur"}]}}}},s=o,l=n("2877"),r=Object(l["a"])(s,i,a,!1,null,null,null);e["default"]=r.exports},bd113:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-tabs",{staticStyle:{"padding-left":"8px"},on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"本地存储",name:"local"}},[n("Local",{ref:"local"})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"数据库存储",name:"blob"}},[n("Blob",{ref:"blob"})],1)],1)},a=[],o=n("0384"),s=n("cd60"),l={name:"Storage",components:{Blob:o["default"],Local:s["default"]},data:function(){return{activeName:"local"}},methods:{tabClick:function(t){"local"===this.activeName&&this.$refs.local.getList()}}},r=l,c=n("2877"),u=Object(c["a"])(r,i,a,!1,null,"f3829fc4",null);e["default"]=u.exports},bd40:function(t,e,n){},bfec:function(t,e,n){"use strict";n("9a73")},c19c:function(t,e,n){"use strict";n("0051")},c62e:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"social-signup-container"},[n("div",{staticClass:"sign-btn",on:{click:function(e){return t.wechatHandleClick("wechat")}}},[n("span",{staticClass:"wx-svg-container"},[n("svg-icon",{staticClass:"icon",attrs:{"icon-class":"wechat"}})],1),t._v("\n    WeChat\n  ")]),t._v(" "),n("div",{staticClass:"sign-btn",on:{click:function(e){return t.tencentHandleClick("tencent")}}},[n("span",{staticClass:"qq-svg-container"},[n("svg-icon",{staticClass:"icon",attrs:{"icon-class":"qq"}})],1),t._v("\n    QQ\n  ")])])},a=[],o={name:"SocialSignin",methods:{wechatHandleClick:function(t){alert("ok")},tencentHandleClick:function(t){alert("ok")}}},s=o,l=(n("bfec"),n("2877")),r=Object(l["a"])(s,i,a,!1,null,"7309fbbb",null);e["default"]=r.exports},c974:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar"}},[n("el-dropdown",{attrs:{trigger:"click"}},[n("el-button",{attrs:{plain:""}},[t._v("\n        Platform"),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{staticClass:"no-border",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-checkbox-group",{staticStyle:{padding:"5px 15px"},model:{value:t.platforms,callback:function(e){t.platforms=e},expression:"platforms"}},t._l(t.platformsOptions,(function(e){return n("el-checkbox",{key:e.key,attrs:{label:e.key}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),1)],1)],1),t._v(" "),n("el-dropdown",{attrs:{trigger:"click"}},[n("el-button",{attrs:{plain:""}},[t._v("\n        Link"),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{staticClass:"no-padding no-border",staticStyle:{width:"300px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-input",{attrs:{placeholder:"Please enter the content"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}},[n("template",{slot:"prepend"},[t._v("\n            Url\n          ")])],2)],1)],1),t._v(" "),n("div",{staticClass:"time-container"},[n("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"Release time"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"}},[t._v("\n      publish\n    ")])],1),t._v(" "),n("div",{staticClass:"components-container"},[n("aside",[t._v("Sticky header, "+t._s(t.$t("components.stickyTips")))]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("sticky",{attrs:{"sticky-top":200}},[n("el-button",{attrs:{type:"primary"}},[t._v(" placeholder")])],1),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")]),t._v(" "),n("div",[t._v("placeholder")])],1)],1)},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{height:t.height+"px",zIndex:t.zIndex}},[n("div",{class:t.className,style:{top:t.isSticky?t.stickyTop+"px":"",zIndex:t.zIndex,position:t.position,width:t.width,height:t.height+"px"}},[t._t("default",[n("div",[t._v("sticky")])])],2)])},s=[],l=(n("c5f6"),{name:"Sticky",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String,default:""}},data:function(){return{active:!1,position:"",width:void 0,height:void 0,isSticky:!1}},mounted:function(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize)},activated:function(){this.handleScroll()},destroyed:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize)},methods:{sticky:function(){this.active||(this.position="fixed",this.active=!0,this.width=this.width+"px",this.isSticky=!0)},handleReset:function(){this.active&&this.reset()},reset:function(){this.position="",this.width="auto",this.active=!1,this.isSticky=!1},handleScroll:function(){var t=this.$el.getBoundingClientRect().width;this.width=t||"auto";var e=this.$el.getBoundingClientRect().top;e<this.stickyTop?this.sticky():this.handleReset()},handleResize:function(){this.isSticky&&(this.width=this.$el.getBoundingClientRect().width+"px")}}}),r=l,c=n("2877"),u=Object(c["a"])(r,o,s,!1,null,null,null),d=u.exports,p={name:"StickyDemo",components:{Sticky:d},data:function(){return{time:"",url:"",platforms:["a-platform"],platformsOptions:[{key:"a-platform",name:"platformA"},{key:"b-platform",name:"platformB"},{key:"c-platform",name:"platformC"}],pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}}}}},h=p,f=(n("0259"),Object(c["a"])(h,i,a,!1,null,"59e55d26",null));e["default"]=f.exports},caa2:function(t,e,n){},cc35:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.easyFlowVisible?n("div",{staticStyle:{height:"calc(100vh)"}},[n("div",{staticStyle:{display:"flex",height:"calc(100% - 47px)"}},[n("div",{ref:"efContainer",staticClass:"container",attrs:{id:"efContainer"}},[t._l(t.data.nodeList,(function(e){return[n("flow-node",{key:e.id,attrs:{id:e.id,node:e,activeElement:t.activeElement}})]}))],2)])]):t._e()])},a=[],o=(n("6b54"),n("410f"),n("b76a")),s=n.n(o),l=n("2ef0"),r=n.n(l),c=(n("4be5"),n("3f91")),u=n("e217"),d={name:"FlowDisplay",data:function(){return{active:0,jsPlumb:null,easyFlowVisible:!0,flowInfoVisible:!1,loadEasyFlowFinish:!1,flowHelpVisible:!1,data:{},activeElement:{type:void 0,nodeId:void 0,sourceId:void 0,targetId:void 0},zoom:.5}},mixins:[c["a"]],components:{draggable:s.a,flowNode:u["default"]},mounted:function(){this.jsPlumb=jsPlumb.getInstance()},created:function(){var t=this.$route.params&&this.$route.params.id;this.fetchData(t)},methods:{fetchData:function(t){var e=this;this.$axios.gets("/api/business/flow/by-node",{NodeId:t}).then((function(t){e.form=t;var n={nodeList:t.nodeList,lineList:t.lineList};e.dataReload(n)}))},getUUID:function(){return Math.random().toString(36).substr(3,10)},jsPlumbInit:function(){var t=this;this.jsPlumb.ready((function(){t.jsPlumb.importDefaults(t.jsplumbSetting),t.jsPlumb.setSuspendDrawing(!1,!0),t.loadEasyFlow(),t.jsPlumb.bind("connection",(function(e){var n=e.source.id,i=e.target.id;t.loadEasyFlowFinish&&t.data.lineList.push({id:"line-"+t.getUUID(),from:n,to:i})})),t.jsPlumb.setContainer(t.$refs.efContainer)}))},loadEasyFlow:function(){for(var t=0;t<this.data.nodeList.length;t++){var e=this.data.nodeList[t];e.viewOnly=!0,this.jsPlumb.makeSource(e.id,r.a.merge(this.jsplumbSourceOptions,{})),this.jsPlumb.makeTarget(e.id,this.jsplumbTargetOptions),e.viewOnly||this.jsPlumb.draggable(e.id,{containment:"parent",stop:function(t){console.log("拖拽结束: ",t)}})}for(t=0;t<this.data.lineList.length;t++){var n=this.data.lineList[t],i={source:n.from,target:n.to,label:n.label?n.label:"",connector:n.connector?n.connector:"",anchors:n.anchors?n.anchors:void 0,paintStyle:n.paintStyle?n.paintStyle:void 0};this.jsPlumb.connect(i,this.jsplumbConnectOptions)}this.$nextTick((function(){this.loadEasyFlowFinish=!0}))},dataReload:function(t){var e=this;this.easyFlowVisible=!1,this.data.nodeList=[],this.data.lineList=[],this.$nextTick((function(){t=r.a.cloneDeep(t),e.easyFlowVisible=!0,e.data=t,e.$nextTick((function(){e.jsPlumb=jsPlumb.getInstance(),e.$nextTick((function(){e.jsPlumbInit()}))}))}))}}},p=d,h=n("2877"),f=Object(h["a"])(p,i,a,!1,null,null,null);e["default"]=f.exports},cc6c:function(t,e,n){t.exports=n.p+"static/img/401.089007e7.gif"},cd1b:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",t._g(t._b({attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1},on:{open:t.onOpen,close:t.onClose}},"el-dialog",t.$attrs,!1),t.$listeners),[n("el-row",{attrs:{gutter:0}},[n("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,size:"small","label-width":"100px"}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"选项名",prop:"label"}},[n("el-input",{attrs:{placeholder:"请输入选项名",clearable:""},model:{value:t.formData.label,callback:function(e){t.$set(t.formData,"label",e)},expression:"formData.label"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"选项值",prop:"value"}},[n("el-input",{attrs:{placeholder:"请输入选项值",clearable:""},model:{value:t.formData.value,callback:function(e){t.$set(t.formData,"value",e)},expression:"formData.value"}},[n("el-select",{style:{width:"100px"},attrs:{slot:"append"},slot:"append",model:{value:t.dataType,callback:function(e){t.dataType=e},expression:"dataType"}},t._l(t.dataTypeOptions,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})),1)],1)],1)],1)],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.handelConfirm}},[t._v("\n        确定\n      ")]),t._v(" "),n("el-button",{on:{click:t.close}},[t._v("\n        取消\n      ")])],1)],1)],1)},a=[],o=n("ed08"),s={components:{},inheritAttrs:!1,props:[],data:function(){return{id:100,formData:{label:void 0,value:void 0},rules:{label:[{required:!0,message:"请输入选项名",trigger:"blur"}],value:[{required:!0,message:"请输入选项值",trigger:"blur"}]},dataType:"string",dataTypeOptions:[{label:"字符串",value:"string"},{label:"数字",value:"number"}]}},computed:{},watch:{"formData.value":function(t){this.dataType=Object(o["g"])(t)?"number":"string"}},created:function(){},mounted:function(){},methods:{onOpen:function(){this.formData={label:void 0,value:void 0}},onClose:function(){},close:function(){this.$emit("update:visible",!1)},handelConfirm:function(){var t=this;this.$refs.elForm.validate((function(e){e&&("number"===t.dataType&&(t.formData.value=parseFloat(t.formData.value)),t.formData.id=t.id++,t.$emit("commit",t.formData),t.close())}))}}},l=s,r=n("2877"),c=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports},cd60:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container",staticStyle:{padding:"8px"}},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{padding:"6px 0"}},[n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-upload"},on:{click:t.handleUpload}},[t._v("上传")]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.handleDelete()}},slot:"reference"},[t._v("删除")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"small","label-width":"66px"}},[n("el-form-item",{attrs:{label:"文件名",prop:"name"}},[n("el-input",{staticStyle:{width:"370px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"上传"}},[n("el-upload",{ref:"upload",attrs:{limit:1,"before-upload":t.beforeUpload,"auto-upload":!1,"on-success":t.handleSuccess,"on-error":t.handleError,action:t.storageApi+"/upload?name="+t.form.name}},[n("div",{staticClass:"upload"},[n("i",{staticClass:"el-icon-upload"}),t._v(" 添加文件\n          ")]),t._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("上传文件不超过100M")])])],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{size:"small",type:"primary"},on:{click:t.upload}},[t._v("确认")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"90%"},attrs:{data:t.list,size:"small"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),n("el-table-column",{attrs:{label:"文件名",prop:"name",sortable:"custom",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{content:t.storageApi+e.row.url,placement:"top-start",title:"路径",width:"200",trigger:"hover"}},[n("a",{staticClass:"el-link--primary",staticStyle:{"word-break":"keep-all","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis",color:"#1890ff","font-size":"13px"},attrs:{slot:"reference",href:t.storageApi+e.row.url,target:"_blank"},slot:"reference"},[t._v(t._s(e.row.name))])])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"预览图",prop:"url",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-image",{staticClass:"el-avatar",attrs:{src:t.storageApi+i.url,"preview-src-list":[t.storageApi+i.url],fit:"contain",lazy:""}},[n("div",{attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-document"})])])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"文件格式",prop:"suffix",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"类别",prop:"type",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("displayType")(e.row.type)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"大小",prop:"size",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"创建日期",prop:"creationTime",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("formatDate")(e.row.creationTime)))])]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=(n("7f7f"),n("333d")),s=n("4381"),l=n("415c"),r={id:null,name:null},c={name:"Storage",components:{Pagination:o["a"]},directives:{permission:s["a"]},filters:{displayType:function(t){var e={0:"图片",1:"文件"};return e[t]}},data:function(){return{storageApi:l["a"].storage.ip,rules:{name:[{required:!0,message:"请输入文件名",trigger:"blur"}]},form:Object.assign({},r),list:null,totalCount:0,listLoading:!0,formLoading:!1,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1}},created:function(){this.getList()},methods:{upload:function(){this.$refs.upload.submit()},beforeUpload:function(t){var e=!0;return e=t.size/1024/1024<100,e||(this.loading=!1,this.$message.error("上传文件大小不能超过 100MB!")),this.form.name=t.name,e},handleSuccess:function(t,e,n){this.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),this.dialogFormVisible=!1,this.getList()},handleError:function(t,e,n){this.$notify({title:t,type:"error",duration:4e3}),this.loading=!1},getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets(l["a"].storage.ip+"/api/app/file",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},handleFilter:function(){this.page=1,this.getList()},handleUpload:function(){this.formTitle="文件上传",this.isEdit=!1,this.dialogFormVisible=!0},handleDelete:function(t){this.$message({message:"敬请期待！",type:"warning"})},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)},cancel:function(){this.form=Object.assign({},r),this.dialogFormVisible=!1,this.$refs.form.clearValidate()}}},u=c,d=(n("e1ee"),n("2877")),p=Object(d["a"])(u,i,a,!1,null,"4194c950",null);e["default"]=p.exports},d01b:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"ef-node-form"},[n("div",{staticClass:"ef-node-form-header"},[t._v("编辑")]),t._v(" "),n("div",{staticClass:"ef-node-form-body"},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:"node"===t.type,expression:"type === 'node'"}],ref:"dataForm",attrs:{model:t.node,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"类型"}},[n("el-input",{attrs:{disabled:!0},model:{value:t.node.type,callback:function(e){t.$set(t.node,"type",e)},expression:"node.type"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:t.node.name,callback:function(e){t.$set(t.node,"name",e)},expression:"node.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"left坐标"}},[n("el-input",{attrs:{disabled:!0},model:{value:t.node.left,callback:function(e){t.$set(t.node,"left",e)},expression:"node.left"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"top坐标"}},[n("el-input",{attrs:{disabled:!0},model:{value:t.node.top,callback:function(e){t.$set(t.node,"top",e)},expression:"node.top"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"ico图标"}},[n("el-input",{model:{value:t.node.ico,callback:function(e){t.$set(t.node,"ico",e)},expression:"node.ico"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"状态"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.node.state,callback:function(e){t.$set(t.node,"state",e)},expression:"node.state"}},t._l(t.stateList,(function(t){return n("el-option",{key:t.state,attrs:{label:t.label,value:t.state}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"执行权限"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"所有人",clearable:""},on:{change:function(e){return t.handleRowClick()}},model:{value:t.executor,callback:function(e){t.executor=e},expression:"executor"}},t._l(t.executOption,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),"users"==t.executor?n("el-form-item",{attrs:{label:"选择用户"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.node.users,callback:function(e){t.$set(t.node,"users",e)},expression:"node.users"}},t._l(t.userList,(function(t){return n("el-option",{key:t.userName,attrs:{label:t.userName,value:t.userName}})})),1)],1):t._e(),t._v(" "),"roles"==t.executor?n("el-form-item",{attrs:{label:"选择角色"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.node.roles,callback:function(e){t.$set(t.node,"roles",e)},expression:"node.roles"}},t._l(t.roleList,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1):t._e(),t._v(" "),n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-close",size:"mini"}},[t._v("重置")]),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:t.save}},[t._v("暂存")])],1)],1),t._v(" "),n("el-form",{directives:[{name:"show",rawName:"v-show",value:"line"===t.type,expression:"type === 'line'"}],ref:"dataForm",attrs:{model:t.line,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"源节点",size:"small"}},[n("el-input",{attrs:{value:t.line.from,disabled:""}})],1),t._v(" "),n("el-form-item",{attrs:{label:"目标节点",size:"small"}},[n("el-input",{attrs:{value:t.line.to,disabled:""}})],1),t._v(" "),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:t.line.label,callback:function(e){t.$set(t.line,"label",e)},expression:"line.label"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"字段条件",size:"small"}},t._l(t.tempFormField,(function(e,i){return n("div",{key:i,attrs:{align:"left"}},[n("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.fieldId,callback:function(n){t.$set(e,"fieldId",n)},expression:"item.fieldId"}},t._l(t.fieldList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1),t._v(" "),n("el-select",{staticStyle:{width:"35%"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.condition,callback:function(n){t.$set(e,"condition",n)},expression:"item.condition"}},t._l(t.conditionOption,(function(t){return n("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),n("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini"},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}}),t._v(" "),n("el-button",{attrs:{circle:"",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.removeRow(i)}}})],1)})),0),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.addRow}},[t._v("添加")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-check"},on:{click:t.saveLine}},[t._v("暂存")])],1)],1)],1)])])},a=[],o=(n("7f7f"),n("2ef0")),s={data:function(){return{visible:!0,type:"node",node:{},line:{},data:{},roleList:[],userList:[],fieldList:[],executor:"",executOption:[{value:"users",label:"指定用户"},{value:"roles",label:"指定角色"}],fieldOption:[{value:"name",label:"姓名"},{value:"age",label:"年龄"},{value:"sex",label:"性别"}],conditionOption:[{value:">",label:">"},{value:">=",label:">="},{value:"<",label:"<"},{value:"<=",label:"<="},{value:"=",label:"="},{value:"!=",label:"!="}],tempFormField:[],stateList:[{state:"success",label:"成功"},{state:"warning",label:"警告"},{state:"error",label:"错误"},{state:"running",label:"运行中"}]}},methods:{getAllRoles:function(){var t=this;this.$axios.gets("/api/identity/roles/all").then((function(e){t.roleList=e.items}))},getAllUsers:function(){var t=this;this.$axios.gets("/api/base/user").then((function(e){t.userList=e.items}))},getAllFields:function(t){var e=this;this.$axios.gets("/api/business/form/"+t).then((function(t){e.fieldList=t.fields}))},getAllConditions:function(){var t=this;this.$axios.gets("/api/base/dictDetails/list",{name:"condition"}).then((function(e){t.conditionOption=e.items}))},nodeInit:function(t,e){var n=this;this.type="node",this.data=t,this.getAllUsers(),this.getAllRoles(),t.nodeList.filter((function(t){t.id===e&&(n.node=Object(o["cloneDeep"])(t),n.executor=t.executor)}))},lineInit:function(t,e,n){var i=this;this.type="line",this.line=t,this.getAllFields(n),this.getAllConditions(),e.lineList.filter((function(e){e.from==t.from&&e.to==t.to&&(i.tempFormField=e.formField?Object(o["cloneDeep"])(e.formField):[{fieldId:"",condition:"",content:""}])}))},saveLine:function(){this.$emit("setLineLabel",this.line.from,this.line.to,this.line.label,this.tempFormField)},addRow:function(){if(this.tempFormField.length>0)this.$alert("暂不支持多字段条件","提示",{confirmButtonText:"确定"});else{var t={fieldId:"",condition:"",content:""};this.tempFormField.push(t)}},removeRow:function(t){this.tempFormField.splice(t,1)},handleRowClick:function(){},save:function(){var t=this;this.data.nodeList.filter((function(e){e.id===t.node.id&&(e.name=t.node.name,e.left=t.node.left,e.top=t.node.top,e.ico=t.node.ico,e.state=t.node.state,e.executor=t.executor,"users"===t.executor&&(e.users=t.node.users),"roles"===t.executor&&(e.roles=t.node.roles),t.$emit("repaintEverything"))}))}}},l=s,r=(n("1819"),n("2877")),c=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports},d0fa:function(t,e,n){"use strict";n("e667")},dc1d:function(t,e,n){"use strict";n("dd91")},dd23:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"icon-dialog"},[n("el-dialog",t._g(t._b({attrs:{width:"980px","modal-append-to-body":!1},on:{open:t.onOpen,close:t.onClose}},"el-dialog",t.$attrs,!1),t.$listeners),[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n      选择图标\n      "),n("el-input",{style:{width:"260px"},attrs:{size:"mini",placeholder:"请输入图标名称","prefix-icon":"el-icon-search",clearable:""},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1),t._v(" "),n("ul",{staticClass:"icon-ul"},t._l(t.iconList,(function(e){return n("li",{key:e,class:t.active===e?"active-item":"",on:{click:function(n){return t.onSelect(e)}}},[n("i",{class:e}),t._v(" "),n("div",[t._v(t._s(e))])])})),0)])],1)},a=[],o=n("de0a"),s=o.map((function(t){return"el-icon-".concat(t)})),l={inheritAttrs:!1,props:["current"],data:function(){return{iconList:s,active:null,key:""}},watch:{key:function(t){this.iconList=t?s.filter((function(e){return e.indexOf(t)>-1})):s}},methods:{onOpen:function(){this.active=this.current,this.key=""},onClose:function(){},onSelect:function(t){this.active=t,this.$emit("select",t),this.$emit("update:visible",!1)}}},r=l,c=(n("2430"),n("2877")),u=Object(c["a"])(r,i,a,!1,null,"cfc276e2",null);e["default"]=u.exports},dd8a:function(t,e,n){"use strict";n.r(e);var i,a,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"left-board"},[n("el-scrollbar",{staticClass:"left-scrollbar"},[n("div",{staticClass:"components-list"},[n("div",{staticClass:"components-title"},[n("svg-icon",{attrs:{"icon-class":"input"}}),t._v("输入型组件\n        ")],1),t._v(" "),n("draggable",{staticClass:"components-draggable",attrs:{list:t.inputComponents,group:{name:"componentsGroup",pull:"clone",put:!1},clone:t.cloneComponent,draggable:".components-item",sort:!1},on:{end:t.onEnd}},t._l(t.inputComponents,(function(e,i){return n("div",{key:i,staticClass:"components-item",on:{click:function(n){return t.addComponent(e)}}},[n("div",{staticClass:"components-body"},[n("svg-icon",{attrs:{"icon-class":e.fieldType}}),t._v("\n              "+t._s(e.label)+"\n            ")],1)])})),0),t._v(" "),n("div",{staticClass:"components-title"},[n("svg-icon",{attrs:{"icon-class":"select"}}),t._v("选择型组件\n        ")],1),t._v(" "),n("draggable",{staticClass:"components-draggable",attrs:{list:t.selectComponents,group:{name:"componentsGroup",pull:"clone",put:!1},clone:t.cloneComponent,draggable:".components-item",sort:!1},on:{end:t.onEnd}},t._l(t.selectComponents,(function(e,i){return n("div",{key:i,staticClass:"components-item",on:{click:function(n){return t.addComponent(e)}}},[n("div",{staticClass:"components-body"},[n("svg-icon",{attrs:{"icon-class":e.fieldType}}),t._v("\n              "+t._s(e.label)+"\n            ")],1)])})),0),t._v(" "),n("div",{staticClass:"components-title"},[n("svg-icon",{attrs:{"icon-class":"row"}}),t._v(" 引用型组件\n        ")],1),t._v(" "),n("draggable",{staticClass:"components-draggable",attrs:{list:t.importComponents,group:{name:"componentsGroup",pull:"clone",put:!1},clone:t.cloneComponent,draggable:".components-item",sort:!1},on:{end:t.onEnd}},t._l(t.importComponents,(function(e,i){return n("div",{key:i,staticClass:"components-item",on:{click:function(n){return t.addComponent(e)}}},[n("div",{staticClass:"components-body"},[n("svg-icon",{attrs:{"icon-class":e.fieldType}}),t._v("\n              "+t._s(e.label)+"\n            ")],1)])})),0)],1)])],1),t._v(" "),n("div",{staticClass:"center-board"},[n("div",{staticClass:"action-bar"},[n("el-button",{attrs:{icon:"el-icon-download",type:"text"},on:{click:t.download}},[t._v("\n        导出vue文件\n      ")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"save-btn",attrs:{type:"text"},on:{click:t.save}},[n("svg-icon",{attrs:{"icon-class":"save"}}),t._v("\n        保存\n      ")],1),t._v(" "),n("el-button",{staticClass:"delete-btn",attrs:{icon:"el-icon-delete",type:"text"},on:{click:t.empty}},[t._v("\n        清空\n      ")])],1),t._v(" "),n("el-scrollbar",{staticClass:"center-scrollbar"},[n("el-row",{staticClass:"center-board-row",attrs:{gutter:t.formConf.gutter}},[n("el-form",{attrs:{size:t.formConf.size,"label-position":t.formConf.labelPosition,disabled:t.formConf.disabled,"label-width":t.formConf.labelWidth+"px"}},[n("draggable",{staticClass:"drawing-board",attrs:{list:t.drawingList,animation:340,group:"componentsGroup"}},t._l(t.drawingList,(function(e,i){return n("draggable-item",{key:e.renderKey,attrs:{"drawing-list":t.drawingList,element:e,index:i,"active-id":t.activeId,"form-conf":t.formConf},on:{activeItem:t.activeFormItem,copyItem:t.drawingItemCopy,deleteItem:t.drawingItemDelete}})})),1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.drawingList.length,expression:"!drawingList.length"}],staticClass:"empty-info"},[t._v("\n            从左侧拖入或点选组件进行表单设计\n          ")])],1)],1)],1)],1),t._v(" "),n("right-panel",{attrs:{"active-data":t.activeData,"form-conf":t.formConf,"show-field":!!t.drawingList.length},on:{"tag-change":t.tagChange}}),t._v(" "),n("input",{attrs:{id:"copyNode",type:"hidden"}})],1)},s=[],l=(n("20d6"),n("53ca")),r=(n("456d"),n("5530")),c=(n("7514"),n("ac6a"),n("a481"),n("b76a")),u=n.n(c),d=n("21a6"),p=n("e552"),h=n.n(p),f=(n("b311"),n("a85b")),m=n("aa6f"),v=n("2e2a"),g=n("ed08");n("7f7f");function b(t,e){return'<el-dialog :visible.sync="dialogFormVisible" :close-on-click-modal="false" @close="cancel()" :title="formTitle">\n    '.concat(t,'\n    <div slot="footer">\n      <el-button size="small" type="text" @click="cancel">取消</el-button>\n      <el-button size="small" v-loading="formLoading" type="primary" @click="save">确认</el-button>\n    </div>\n  </el-dialog>\n  ').concat(e,"\n  ")}function y(t){return'<template>\n    <div class="app-container">\n      <div class="head-container">\n        \x3c!-- 搜索 --\x3e\n        <el-input\n          v-model="listQuery.Filter"\n          clearable\n          size="small"\n          placeholder="搜索..."\n          style="width: 200px;"\n          class="filter-item"\n          @keyup.enter.native="handleFilter"\n        />\n        <el-button\n          class="filter-item"\n          size="mini"\n          type="success"\n          icon="el-icon-search"\n          @click="handleFilter"\n        >搜索</el-button>\n          <el-button\n            class="filter-item"\n            size="mini"\n            type="primary"\n            icon="el-icon-plus"\n            @click="handleCreate"\n          >新增</el-button>\n          <el-button\n            class="filter-item"\n            size="mini"\n            type="success"\n            icon="el-icon-edit"\n            @click="handleUpdate()"\n          >修改</el-button>\n          <el-button\n            slot="reference"\n            class="filter-item"\n            type="danger"\n            icon="el-icon-delete"\n            size="mini"\n            @click="handleDelete()"\n          >删除</el-button>\n      </div>\n      '.concat(t,"\n    </div>\n  </template>")}function _(t){return"<script>\n    ".concat(t,"\n  <\/script>")}function x(t){return"<style>\n    ".concat(t,"\n  </style>")}function w(t,e){var n="";"right"!==t.labelPosition&&(n='label-position="'.concat(t.labelPosition,'"'));var i=t.disabled?':disabled="'.concat(t.disabled,'"'):"",o='<el-form ref="form" :model="form" :rules="rules" size="'.concat(t.size,'" ').concat(i,' label-width="').concat(t.labelWidth,'px" ').concat(n,">\n      ").concat(e,"\n    </el-form>");return a&&(o='<el-row :gutter="'.concat(t.gutter,'">\n        ').concat(o,"\n      </el-row>")),o}function C(t){var e='<el-table\n  ref="multipleTable"\n  v-loading="listLoading"\n  :data="list"\n  size="small"\n  style="width: 90%;"\n  @sort-change="sortChange"\n  @selection-change="handleSelectionChange"\n  @row-click="handleRowClick">\n  <el-table-column type="selection" width="44px"></el-table-column>\n  '.concat(t,'\n  <el-table-column label="操作" align="center">\n        <template slot-scope="{row}">\n          <el-button\n            type="primary"\n            size="mini"\n            @click="handleUpdate(row)"\n            icon="el-icon-edit"\n          />\n          <el-button\n            type="danger"\n            size="mini"\n            @click="handleDelete(row)"\n            icon="el-icon-delete"\n          />\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show="totalCount>0"\n      :total="totalCount"\n      :page.sync="page"\n      :limit.sync="listQuery.MaxResultCount"\n      @pagination="getList"\n    />');return e}function k(t,e){return a||24!==t.span?'<el-col :span="'.concat(t.span,'">\n      ').concat(e,"\n    </el-col>"):e}var D={colFormItem:function(t){var e="";t.labelWidth&&t.labelWidth!==i.labelWidth&&(e='label-width="'.concat(t.labelWidth,'px"'));var n=!v["f"][t.tag]&&t.isRequire?"required":"",a=S[t.tag]?S[t.tag](t):null,o="<el-form-item ".concat(e,' label="').concat(t.label,'" prop="').concat(t.fieldName,'" ').concat(n,">\n        ").concat(a,"\n      </el-form-item>");return o=k(t,o),o},rowFormItem:function(t){var e="default"===t.type?"":'type="'.concat(t.type,'"'),n="default"===t.type?"":'justify="'.concat(t.justify,'"'),i="default"===t.type?"":'align="'.concat(t.align,'"'),a=t.gutter?'gutter="'.concat(t.gutter,'"'):"",o=t.children.map((function(t){return D[t.layout](t)})),s="<el-row ".concat(e," ").concat(n," ").concat(i," ").concat(a,">\n      ").concat(o.join("\n"),"\n    </el-row>");return s=k(t,s),s}},S={"el-input":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a=e.clearable,o=e.placeholder,s=e.width,l=t.maxlength?':maxlength="'.concat(t.maxlength,'"'):"",r=t["show-word-limit"]?"show-word-limit":"",c=t.isReadonly?"readonly":"",u=t["prefix-icon"]?"prefix-icon='".concat(t["prefix-icon"],"'"):"",d=t["suffix-icon"]?"suffix-icon='".concat(t["suffix-icon"],"'"):"",p=t["show-password"]?"show-password":"",h=t.type?'type="'.concat(t.type,'"'):"",f=t.autosize&&t.autosize.minRows?':autosize="{minRows: '.concat(t.autosize.minRows,", maxRows: ").concat(t.autosize.maxRows,'}"'):"",m=E(t);return m&&(m="\n".concat(m,"\n")),"<".concat(t.tag," ").concat(i," ").concat(h," ").concat(o," ").concat(l," ").concat(r," ").concat(c," ").concat(n," ").concat(a," ").concat(u," ").concat(d," ").concat(p," ").concat(f," ").concat(s,">").concat(m,"</").concat(t.tag,">")},"el-input-number":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a=e.placeholder,o=t["controls-position"]?"controls-position=".concat(t["controls-position"]):"",s=t.min?":min='".concat(t.min,"'"):"",l=t.max?":max='".concat(t.max,"'"):"",r=t.step?":step='".concat(t.step,"'"):"",c=t["step-strictly"]?"step-strictly":"",u=t.precision?":precision='".concat(t.precision,"'"):"";return"<".concat(t.tag," ").concat(i," ").concat(a," ").concat(r," ").concat(c," ").concat(u," ").concat(o," ").concat(s," ").concat(l," ").concat(n,"></").concat(t.tag,">")},"el-select":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a=e.clearable,o=e.placeholder,s=e.width,l=t.filterable?"filterable":"",r=t.multiple?"multiple":"",c=j(t);return c&&(c="\n".concat(c,"\n")),"<".concat(t.tag," ").concat(i," ").concat(o," ").concat(n," ").concat(r," ").concat(l," ").concat(a," ").concat(s,">").concat(c,"</").concat(t.tag,">")},"el-radio-group":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a='size="'.concat(t.size,'"'),o=L(t);return o&&(o="\n".concat(o,"\n")),"<".concat(t.tag," ").concat(i," ").concat(a," ").concat(n,">").concat(o,"</").concat(t.tag,">")},"el-checkbox-group":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a='size="'.concat(t.size,'"'),o=t.min?':min="'.concat(t.min,'"'):"",s=t.max?':max="'.concat(t.max,'"'):"",l=T(t);return l&&(l="\n".concat(l,"\n")),"<".concat(t.tag," ").concat(i," ").concat(o," ").concat(s," ").concat(a," ").concat(n,">").concat(l,"</").concat(t.tag,">")},"el-switch":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a=t["active-text"]?'active-text="'.concat(t["active-text"],'"'):"",o=t["inactive-text"]?'inactive-text="'.concat(t["inactive-text"],'"'):"",s=t["active-color"]?'active-color="'.concat(t["active-color"],'"'):"",l=t["inactive-color"]?'inactive-color="'.concat(t["inactive-color"],'"'):"",r=!0!==t["active-value"]?":active-value='".concat(JSON.stringify(t["active-value"]),"'"):"",c=!1!==t["inactive-value"]?":inactive-value='".concat(JSON.stringify(t["inactive-value"]),"'"):"";return"<".concat(t.tag," ").concat(i," ").concat(a," ").concat(o," ").concat(s," ").concat(l," ").concat(r," ").concat(c," ").concat(n,"></").concat(t.tag,">")},"el-cascader":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a=e.clearable,o=e.placeholder,s=e.width,l=t.options?':options="'.concat(t.fieldName,'Options"'):"",r=t.props?':props="'.concat(t.fieldName,'Props"'):"",c=t["show-all-levels"]?"":':show-all-levels="false"',u=t.filterable?"filterable":"",d="/"===t.separator?"":'separator="'.concat(t.separator,'"');return"<".concat(t.tag," ").concat(i," ").concat(l," ").concat(r," ").concat(s," ").concat(c," ").concat(o," ").concat(d," ").concat(u," ").concat(a," ").concat(n,"></").concat(t.tag,">")},"el-slider":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a=t.min?":min='".concat(t.min,"'"):"",o=t.max?":max='".concat(t.max,"'"):"",s=t.step?":step='".concat(t.step,"'"):"",l=t.range?"range":"",r=t["show-stops"]?':show-stops="'.concat(t["show-stops"],'"'):"";return"<".concat(t.tag," ").concat(a," ").concat(o," ").concat(s," ").concat(i," ").concat(l," ").concat(r," ").concat(n,"></").concat(t.tag,">")},"el-time-picker":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a=e.clearable,o=e.placeholder,s=e.width,l=t["start-placeholder"]?'start-placeholder="'.concat(t["start-placeholder"],'"'):"",r=t["end-placeholder"]?'end-placeholder="'.concat(t["end-placeholder"],'"'):"",c=t["range-separator"]?'range-separator="'.concat(t["range-separator"],'"'):"",u=t["is-range"]?"is-range":"",d=t.format?'format="'.concat(t.format,'"'):"",p=t["value-format"]?'value-format="'.concat(t["value-format"],'"'):"",h=t["picker-options"]?":picker-options='".concat(JSON.stringify(t["picker-options"]),"'"):"";return"<".concat(t.tag," ").concat(i," ").concat(u," ").concat(d," ").concat(p," ").concat(h," ").concat(s," ").concat(o," ").concat(l," ").concat(r," ").concat(c," ").concat(a," ").concat(n,"></").concat(t.tag,">")},"el-date-picker":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a=e.clearable,o=e.placeholder,s=e.width,l=t["start-placeholder"]?'start-placeholder="'.concat(t["start-placeholder"],'"'):"",r=t["end-placeholder"]?'end-placeholder="'.concat(t["end-placeholder"],'"'):"",c=t["range-separator"]?'range-separator="'.concat(t["range-separator"],'"'):"",u=t.format?'format="'.concat(t.format,'"'):"",d=t["value-format"]?'value-format="'.concat(t["value-format"],'"'):"",p="date"===t.type?"":'type="'.concat(t.type,'"'),h=t.isReadonly?"readonly":"";return"<".concat(t.tag," ").concat(p," ").concat(i," ").concat(u," ").concat(d," ").concat(s," ").concat(o," ").concat(l," ").concat(r," ").concat(c," ").concat(a," ").concat(h," ").concat(n,"></").concat(t.tag,">")},"el-rate":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a=(t.max&&":max='".concat(t.max,"'"),t["allow-half"]?"allow-half":""),o=t["show-text"]?"show-text":"",s=t["show-score"]?"show-score":"";return"<".concat(t.tag," ").concat(i," ").concat(a," ").concat(o," ").concat(s," ").concat(n,"></").concat(t.tag,">")},"el-color-picker":function(t){var e=P(t),n=e.disabled,i=e.fieldName,a='size="'.concat(t.size,'"'),o=t["show-alpha"]?"show-alpha":"",s=t["color-format"]?'color-format="'.concat(t["color-format"],'"'):"";return"<".concat(t.tag," ").concat(i," ").concat(a," ").concat(o," ").concat(s," ").concat(n,"></").concat(t.tag,">")},"el-upload":function(t){var e=t.disabled?":disabled='true'":"",n=t.action?':action="'.concat(t.fieldName,'Action"'):"",i=t.multiple?"multiple":"",a="text"!==t["list-type"]?'list-type="'.concat(t["list-type"],'"'):"",o=t.accept?'accept="'.concat(t.accept,'"'):"",s="file"!==t.name?'name="'.concat(t.name,'"'):"",l=!1===t["auto-upload"]?':auto-upload="false"':"",r=':before-upload="'.concat(t.fieldName,'BeforeUpload"'),c=':file-list="'.concat(t.fieldName,'fileList"'),u='ref="'.concat(t.fieldName,'"'),d=I(t);return d&&(d="\n".concat(d,"\n")),"<".concat(t.tag," ").concat(u," ").concat(c," ").concat(n," ").concat(l," ").concat(i," ").concat(r," ").concat(a," ").concat(o," ").concat(s," ").concat(e,">").concat(d,"</").concat(t.tag,">")}};function P(t){return{fieldName:'v-model="form.'.concat(t.fieldName,'"'),clearable:t.clearable?"clearable":"",placeholder:t.placeholder?'placeholder="'.concat(t.placeholder,'"'):"",width:t.style&&t.style.width?":style=\"{width: '100%'}\"":"",disabled:t.disabled?":disabled='true'":""}}function E(t){var e=[];return t.prepend&&e.push('<template slot="prepend">'.concat(t.prepend,"</template>")),t.append&&e.push('<template slot="append">'.concat(t.append,"</template>")),e.join("\n")}function j(t){var e=[];return t.options&&t.options.length&&e.push('<el-option v-for="(item, index) in '.concat(t.fieldName,'Options" :key="index" :label="item.label" :value="item.value" :disabled="item.disabled"></el-option>')),e.join("\n")}function L(t){var e=[];if(t.options&&t.options.length){var n="button"===t.optionType?"el-radio-button":"el-radio",i=t.border?"border":"";e.push("<".concat(n,' v-for="(item, index) in ').concat(t.fieldName,'Options" :key="index" :label="item.value" :disabled="item.disabled" ').concat(i,">{{item.label}}</").concat(n,">"))}return e.join("\n")}function T(t){var e=[];if(t.options&&t.options.length){var n="button"===t.optionType?"el-checkbox-button":"el-checkbox",i=t.border?"border":"";e.push("<".concat(n,' v-for="(item, index) in ').concat(t.fieldName,'Options" :key="index" :label="item.value" :disabled="item.disabled" ').concat(i,">{{item.label}}</").concat(n,">"))}return e.join("\n")}function I(t){var e=[];return"picture-card"===t["list-type"]?e.push('<i class="el-icon-plus"></i>'):e.push('<el-button size="small" type="primary" icon="el-icon-upload">'.concat(t.buttonText,"</el-button>")),t.showTip&&e.push('<div slot="tip" class="el-upload__tip">只能上传不超过 '.concat(t.fileSize).concat(t.sizeUnit," 的").concat(t.accept,"文件</div>")),e.join("\n")}function O(t){var e=[],n=[];i=t,a=t.fields.some((function(t){return 24!==t.span})),t.fields.forEach((function(t){e.push(D[t.layout](t)),n.push('<el-table-column label="'.concat(t.label,'" prop="').concat(t.fieldName,'" align="center" />'))}));var o=e.join("\n"),s=n.join("\n"),l=w(t,o),r=C(s);return l=b(l,r),i=null,l}var $=n("80de"),F={"el-rate":".el-rate{display: inline-block; vertical-align: text-top;}","el-upload":".el-upload__tip{line-height: 1.2;}"};function A(t,e){var n=F[e.tag];n&&-1===t.indexOf(n)&&t.push(n),e.children&&e.children.forEach((function(e){return A(t,e)}))}function M(t){var e=[];return t.fields.forEach((function(t){return A(e,t)})),e.join("\n")}var N,R,z=n("63fe"),B=n("01f1"),U={name:"FormDetail",components:{draggable:u.a,render:f["a"],RightPanel:m["default"],CodeTypeDialog:z["default"],DraggableItem:B["default"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{idGlobal:100,formConf:Object.assign({},v["a"]),inputComponents:v["c"],selectComponents:v["e"],layoutComponents:v["d"],importComponents:v["b"],labelWidth:100,drawingList:[],drawingData:{},activeId:null,drawerVisible:!1,formData:{},generateConf:null,activeData:{},fullscreenLoading:!1}},computed:{},watch:{"activeData.label":function(t,e){void 0!==this.activeData.placeholder&&this.activeData.tag&&N===this.activeId&&(this.activeData.placeholder=this.activeData.placeholder.replace(e,"")+t)},activeId:{handler:function(t){N=t},immediate:!0}},created:function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.drawingList=[],this.fetchData(t)}else this.formConf=Object.assign({},v["a"])},methods:{fetchData:function(t){var e=this;this.$axios.gets("/api/business/form/"+t).then((function(t){e.formConf.id=t.id,e.formConf.formName=t.formName,e.formConf.displayName=t.displayName,e.formConf.api=t.api,e.formConf.disabled=t.disabled,e.formConf.description=t.description,t.fields.forEach((function(t){var n={},i=v["c"].find((function(e){return e.fieldType==t.fieldType}));i&&(n.formId=t.id,n.fieldName=t.fieldName,n.fieldType=t.fieldType,n.label=t.label,n.fieldOrder=t.fieldOrder,n.placeholder=t.placeholder,n.defaultValue=t.defaultValue,n.icon=t.icon,n.maxlength=t.maxlength,n.isReadonly=t.isReadonly,n.isRequired=t.isRequired,n.isSort=t.isSort,n.disabled=t.disabled,n.regx=i.regx,n.span=t.span,n.options=t.options,n.tag=i.tag,n.style=i.style,n.clearable=i.clearable,n.prepend=i.prepend,n.append=i.append,n.changeTag=i.changeTag,i.layout||(n.layout="colFormItem"),e.drawingList.push(n))})),t.fields.forEach((function(t){var n={},i=v["e"].find((function(e){return e.fieldType==t.fieldType}));i&&(n.formId=t.id,n.fieldName=t.fieldName,n.fieldType=t.fieldType,n.label=t.label,n.fieldOrder=t.fieldOrder,n.placeholder=t.placeholder,n.defaultValue=t.defaultValue,n.icon=t.icon,n.maxlength=t.maxlength,n.isReadonly=t.isReadonly,n.isRequired=t.isRequired,n.isSort=t.isSort,n.disabled=t.disabled,n.regx=i.regx,n.options=t.options,n.span=t.span,n.tag=i.tag,n.style=i.style,n.clearable=i.clearable,n.prepend=i.prepend,n.append=i.append,n.changeTag=i.changeTag,i.layout||(n.layout="colFormItem"),e.drawingList.push(n))})),e.activeId=e.drawingList[0].formId,e.activeData=e.drawingList[0]}))},activeFormItem:function(t){this.activeData=t,this.activeId=t.formId},onEnd:function(t,e){t.from!==t.to&&(this.activeData=R,this.activeId=this.idGlobal)},addComponent:function(t){var e=this.cloneComponent(t);this.drawingList.push(e),this.activeFormItem(e)},cloneComponent:function(t){var e=JSON.parse(JSON.stringify(t));return e.formId=++this.idGlobal,e.span=v["a"].span,e.renderKey=+new Date,e.layout||(e.layout="colFormItem"),"colFormItem"===e.layout?(e.fieldName="field".concat(this.idGlobal),void 0!==e.placeholder&&(e.placeholder+=e.label),R=e):"rowFormItem"===e.layout&&(delete e.label,e.componentName="row".concat(this.idGlobal),e.gutter=this.formConf.gutter,R=e),R},AssembleFormData:function(){this.formData=Object(r["a"])({fields:JSON.parse(JSON.stringify(this.drawingList))},this.formConf)},execRun:function(){this.AssembleFormData(),this.drawerVisible=!0},execDownload:function(){var t=this.generateCode(),e=new Blob([t],{type:"text/plain;charset=utf-8"});Object(d["saveAs"])(e,"index.vue")},empty:function(){var t=this;this.$confirm("确定要清空所有组件吗？","提示",{type:"warning"}).then((function(){t.drawingList=[]}))},save:function(){var t=this;this.AssembleFormData(),console.log(JSON.parse(JSON.stringify(this.formData))),""!=this.formData.formName?(this.fullscreenLoading=!0,this.isEdit?this.$axios.puts("/api/business/form/"+this.formData.id,this.formData).then((function(e){t.fullscreenLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.jump()})).catch((function(){t.fullscreenLoading=!1})):this.$axios.posts("/api/business/form",this.formData).then((function(e){t.fullscreenLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.jump()})).catch((function(){t.fullscreenLoading=!1}))):this.$message({message:"表单名为空",type:"warning"})},jump:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/tool/form"})},drawingItemCopy:function(t,e){var n=JSON.parse(JSON.stringify(t));n=this.createIdAndKey(n),e.push(n),this.activeFormItem(n)},createIdAndKey:function(t){var e=this;return t.formId=++this.idGlobal,t.renderKey=+new Date,"colFormItem"===t.layout?t.fieldName="field".concat(this.idGlobal):"rowFormItem"===t.layout&&(t.componentName="row".concat(this.idGlobal)),Array.isArray(t.children)&&(t.children=t.children.map((function(t){return e.createIdAndKey(t)}))),t},drawingItemDelete:function(t,e){var n=this;e.splice(t,1),this.$nextTick((function(){var t=n.drawingList.length;t&&n.activeFormItem(n.drawingList[t-1])}))},generateCode:function(){this.AssembleFormData();var t=_(Object($["a"])(this.formData)),e=y(O(this.formData)),n=x(M(this.formData));return h.a.html(e+t+n,g["b"].html)},download:function(){this.execDownload()},tagChange:function(t){var e=this;t=this.cloneComponent(t),t.fieldName=this.activeData.fieldName,t.formId=this.activeId,t.span=this.activeData.span,delete this.activeData.tag,delete this.activeData.fieldType,delete this.activeData.document,Object.keys(t).forEach((function(n){void 0!==e.activeData[n]&&Object(l["a"])(e.activeData[n])===Object(l["a"])(t[n])&&(t[n]=e.activeData[n])})),this.activeData=t,this.updateDrawingList(t,this.drawingList)},updateDrawingList:function(t,e){var n=this,i=e.findIndex((function(t){return t.formId===n.activeId}));i>-1?e.splice(i,1,t):e.forEach((function(e){Array.isArray(e.children)&&n.updateDrawingList(t,e.children)}))}}},V=U,Q=(n("dc1d"),n("2877")),G=Object(Q["a"])(V,o,s,!1,null,null,null);e["default"]=G.exports},dd91:function(t,e,n){},de0a:function(t){t.exports=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"]},e05a:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"components-container"},[t._m(0),t._v(" "),n("div",{staticClass:"editor-container"},[n("json-editor",{ref:"jsonEditor",model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",[t._v("Json-Editor is base on "),n("a",{attrs:{href:"https://github.com/codemirror/CodeMirror",target:"_blank"}},[t._v("CodeMirrorr")]),t._v(". Lint\n    base on "),n("a",{attrs:{href:"https://github.com/codemirror/CodeMirror/blob/master/addon/lint/json-lint.js",target:"_blank"}},[t._v("json-lint")]),t._v(".")])}],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"json-editor"},[n("textarea",{ref:"textarea"})])},s=[],l=n("56b3"),r=n.n(l);n("0dd0"),n("a7be"),n("acdf"),n("f9d4"),n("8822"),n("d2de");n("ae67");var c={name:"JsonEditor",props:["value"],data:function(){return{jsonEditor:!1}},watch:{value:function(t){var e=this.jsonEditor.getValue();t!==e&&this.jsonEditor.setValue(JSON.stringify(this.value,null,2))}},mounted:function(){var t=this;this.jsonEditor=r.a.fromTextArea(this.$refs.textarea,{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}),this.jsonEditor.setValue(JSON.stringify(this.value,null,2)),this.jsonEditor.on("change",(function(e){t.$emit("changed",e.getValue()),t.$emit("input",e.getValue())}))},methods:{getValue:function(){return this.jsonEditor.getValue()}}},u=c,d=(n("9b7a"),n("2877")),p=Object(d["a"])(u,o,s,!1,null,"7b489788",null),h=p.exports,f='[{"items":[{"market_type":"forexdata","symbol":"XAUUSD"},{"market_type":"forexdata","symbol":"UKOIL"},{"market_type":"forexdata","symbol":"CORN"}],"name":""},{"items":[{"market_type":"forexdata","symbol":"XAUUSD"},{"market_type":"forexdata","symbol":"XAGUSD"},{"market_type":"forexdata","symbol":"AUTD"},{"market_type":"forexdata","symbol":"AGTD"}],"name":"贵金属"},{"items":[{"market_type":"forexdata","symbol":"CORN"},{"market_type":"forexdata","symbol":"WHEAT"},{"market_type":"forexdata","symbol":"SOYBEAN"},{"market_type":"forexdata","symbol":"SUGAR"}],"name":"农产品"},{"items":[{"market_type":"forexdata","symbol":"UKOIL"},{"market_type":"forexdata","symbol":"USOIL"},{"market_type":"forexdata","symbol":"NGAS"}],"name":"能源化工"}]',m={name:"JsonEditorDemo",components:{JsonEditor:h},data:function(){return{value:JSON.parse(f)}}},v=m,g=(n("398c"),Object(d["a"])(v,i,a,!1,null,"592e5206",null));e["default"]=g.exports},e1ee:function(t,e,n){"use strict";n("6f60")},e217:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"node",class:t.nodeContainerClass,style:t.nodeContainerStyle,on:{click:t.clickNode,mouseup:t.changeNodeSite}},[n("div",{staticClass:"ef-node-left"}),t._v(" "),n("div",{staticClass:"ef-node-left-ico flow-node-drag"},[n("i",{class:t.nodeIcoClass})]),t._v(" "),n("div",{staticClass:"ef-node-text",attrs:{"show-overflow-tooltip":!0}},[t._v("\n        "+t._s(t.node.name)+"\n    ")]),t._v(" "),n("div",{staticClass:"ef-node-right-ico"},[n("i",{directives:[{name:"show",rawName:"v-show",value:"success"===t.node.state,expression:"node.state === 'success'"}],staticClass:"el-icon-circle-check el-node-state-success"}),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:"error"===t.node.state,expression:"node.state === 'error'"}],staticClass:"el-icon-circle-close el-node-state-error"}),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:"warning"===t.node.state,expression:"node.state === 'warning'"}],staticClass:"el-icon-warning-outline el-node-state-warning"}),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:"running"===t.node.state,expression:"node.state === 'running'"}],staticClass:"el-icon-loading el-node-state-running"})])])},a=[],o={props:{node:Object,activeElement:Object},data:function(){return{}},computed:{nodeContainerClass:function(){return{"ef-node-container":!0,"ef-node-active":"node"==this.activeElement.type&&this.activeElement.nodeId===this.node.id}},nodeContainerStyle:function(){return{top:this.node.top,left:this.node.left}},nodeIcoClass:function(){var t={};return t[this.node.ico]=!0,t["flow-node-drag"]=!this.node.viewOnly,t}},methods:{clickNode:function(){this.$emit("clickNode",this.node.id)},changeNodeSite:function(){this.node.left==this.$refs.node.style.left&&this.node.top==this.$refs.node.style.top||this.$emit("changeNodeSite",{nodeId:this.node.id,left:this.$refs.node.style.left,top:this.$refs.node.style.top})}}},s=o,l=n("2877"),r=Object(l["a"])(s,i,a,!1,null,null,null);e["default"]=r.exports},e382:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{xs:9,sm:6,md:5,lg:4,xl:4}},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",attrs:{clearable:"",size:"small",placeholder:"搜索...","prefix-icon":"el-icon-search"},on:{input:t.getOrgs},model:{value:t.orgName,callback:function(e){t.orgName=e},expression:"orgName"}})],1),t._v(" "),n("el-tree",{staticStyle:{"margin-top":"15px"},attrs:{data:t.orgData,load:t.getOrgs,props:t.defaultProps,"expand-on-click-node":!1,lazy:""},on:{"node-click":t.handleNodeClick}})],1),t._v(" "),n("el-col",{attrs:{xs:15,sm:18,md:19,lg:20,xl:20}},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticClass:"opts"},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Create"],expression:"['AbpIdentity.Users.Create']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新增")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Update"],expression:"['AbpIdentity.Users.Update']"}],staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("修改")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"small","label-width":"70px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[n("el-input",{staticStyle:{width:"184px"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"电话",prop:"phoneNumber"}},[n("el-input",{staticStyle:{width:"184px"},model:{value:t.form.phoneNumber,callback:function(e){t.$set(t.form,"phoneNumber",e)},expression:"form.phoneNumber"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{staticStyle:{width:"184px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{staticStyle:{width:"184px"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),t.isEdit?t._e():n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{staticStyle:{width:"184px"},attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),t.isEdit?n("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[n("el-input",{staticStyle:{width:"184px"},attrs:{type:"password",placeholder:"如果为空则不修改密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"角色",prop:"roles"}},[n("el-select",{staticStyle:{width:"188px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.checkedRole,callback:function(e){t.checkedRole=e},expression:"checkedRole"}},t._l(t.roleList,(function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1),t._v(" "),n("el-form-item",{staticStyle:{display:"inline"},attrs:{label:"所属机构",prop:"organizationIds"}},[n("treeselect",{staticStyle:{width:"450px","line-height":"18px"},attrs:{multiple:!0,"load-options":t.loadOrgs,options:t.orgs,placeholder:"选择所属机构"},model:{value:t.form.organizationIds,callback:function(e){t.$set(t.form,"organizationIds",e)},expression:"form.organizationIds"}})],1),t._v(" "),n("el-form-item",{staticStyle:{display:"inline"},attrs:{label:"岗位",prop:"job"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"450px"},attrs:{size:"small",multiple:"",placeholder:"选择岗位"},model:{value:t.form.jobIds,callback:function(e){t.$set(t.form,"jobIds",e)},expression:"form.jobIds"}},t._l(t.jobData,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"允许锁定"}},[n("el-radio-group",{staticStyle:{width:"178px"},model:{value:t.form.lockoutEnabled,callback:function(e){t.$set(t.form,"lockoutEnabled",e)},expression:"form.lockoutEnabled"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,size:"small"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),n("el-table-column",{attrs:{label:"用户名",prop:"userName",sortable:"custom",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(i)}}},[t._v(t._s(i.userName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"所属机构",prop:"orgIdToName",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.organizationNames))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"邮箱",prop:"email",sortable:"custom",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.email))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"电话",prop:"phoneNumber",sortable:"custom",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.phoneNumber))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Update"],expression:"['AbpIdentity.Users.Update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpIdentity.Users.Delete"],expression:"['AbpIdentity.Users.Delete']"}],attrs:{type:"danger",size:"mini",disabled:"admin"===i.userName,icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)],1)],1)},a=[],o=(n("7f7f"),n("ac6a"),n("53ca")),s=n("61f7"),l=n("333d"),r=n("4381"),c=n("ca17"),u=n.n(c),d=(n("542c"),{id:void 0,organizationIds:[],userName:"",phoneNumber:"",name:"",email:"",password:"",lockoutEnabled:!1,roleNames:[],jobIds:[],orgIdToName:null}),p={name:"User",components:{Pagination:l["a"],Treeselect:u.a},directives:{permission:r["a"]},data:function(){var t=function(t,e,n){e?Object(s["d"])(e)?n():n(new Error("请输入正确的11位手机号码")):n(new Error("请输入电话号码"))};return{rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入用户姓名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phoneNumber:[{required:!0,trigger:"blur",validator:t}]},defaultProps:{children:"children",label:"name",isLeaf:"leaf"},form:Object.assign({},d),list:null,orgName:"",orgs:[],jobData:[],orgData:[],roleList:[],checkedRole:[],totalCount:0,listLoading:!0,formLoading:!1,listQuery:{OrganizationId:null,Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1}},created:function(){this.getList()},methods:{getOrgs:function(t,e){var n=this,i={};"object"!==Object(o["a"])(t)?t&&(i["filter"]=t):0!==t.level&&(i["id"]=t.data.id),setTimeout((function(){n.$axios.gets("/api/base/orgs/loadOrgs",i).then((function(t){e?e(t.items):n.orgData=t.items}))}),100)},getOrgNodes:function(){var t=this;this.$axios.gets("/api/base/orgs/loadNodes").then((function(e){t.loadTree(e)}))},getJobs:function(){var t=this;this.$axios.gets("/api/base/job/jobs").then((function(e){t.jobData=e.items}))},getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/base/user",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},fetchData:function(t){var e=this;this.getAllRoles(),this.getOrgNodes(),this.getJobs(),this.$axios.gets("/api/base/user/"+t).then((function(t){e.form=t})),this.$axios.gets("/api/identity/users/"+t+"/roles").then((function(t){t.items.forEach((function(t){e.checkedRole.push(t.name)}))}))},loadOrgs:function(t){var e=t.action,n=t.parentNode,i=t.callback;e===c["LOAD_CHILDREN_OPTIONS"]&&this.$axios.gets("/api/base/orgs/loadOrgs",{id:n.id}).then((function(t){n.children=t.items.map((function(t){return t.leaf||(t.children=null),t})),setTimeout((function(){i()}),100)}))},getAllRoles:function(){var t=this;this.$axios.gets("/api/identity/roles/all").then((function(e){t.roleList=e.items}))},handleFilter:function(){this.page=1,this.getList()},handleNodeClick:function(t){this.listQuery.OrganizationId=t.id,this.getList()},save:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.formLoading=!0,t.form.roleNames=t.checkedRole,t.isEdit?t.$axios.puts("/api/base/user/"+t.form.id,t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):t.$axios.posts("/api/base/user",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})))}))},handleCreate:function(){this.formTitle="新增用户",this.isEdit=!1,this.dialogFormVisible=!0,this.getAllRoles(),this.getJobs(),this.getOrgNodes()},handleDelete:function(t){var e=this;t?this.$confirm("是否删除"+t.name+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.deletes("/api/identity/users/"+t.id).then((function(n){var i=e.list.indexOf(t);e.list.splice(i,1),e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$alert("暂时不支持用户批量删除","提示",{confirmButtonText:"确定",callback:function(t){}})},handleUpdate:function(t){if(this.formTitle="修改用户",this.isEdit=!0,t)this.fetchData(t.id),this.dialogFormVisible=!0;else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.fetchData(this.multipleSelection[0].id),this.dialogFormVisible=!0}},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)},cancel:function(){this.form=Object.assign({},d),this.checkedRole=[],this.orgs=[],this.jobData=[],this.dialogFormVisible=!1,this.$refs.form.clearValidate()},loadTree:function(t){var e=this;t.items.forEach((function(t){t.pid||(t.hasChildren=!t.leaf,t.leaf||(t.children=[]),e.orgs.push(t))})),this.setChildren(this.orgs,t.items)},setChildren:function(t,e){var n=this;t.forEach((function(t){e.forEach((function(e){e.pid==t.id&&(t.children||(t.children=[]),t.children.push(e))})),t.children&&n.setChildren(t.children,e)}))}}},h=p,f=(n("49b9"),n("2877")),m=Object(f["a"])(h,i,a,!1,null,"0570f7e0",null);e["default"]=m.exports},e3b5:function(t,e,n){},e48c:function(t,e,n){"use strict";n("a3c2")},e667:function(t,e,n){},e7727:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{padding:"6px 0"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-setting",size:"mini"},on:{click:t.handleConfig}},[t._v("配置")]),t._v(" "),n("el-button",{attrs:{type:"warning",icon:"el-icon-plus",size:"mini"},on:{click:t.handleGen}},[t._v("生成")]),t._v(" "),n("el-button",{attrs:{type:"info",icon:"el-icon-download",size:"mini"},on:{click:t.handleDownload}},[t._v("下载")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"90%"},attrs:{data:t.list,size:"small"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),n("el-table-column",{attrs:{label:"表单名称",prop:"formName",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"实体名称",prop:"entityName",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"表名称",prop:"tableName",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"表描述",prop:"remark",align:"center"}})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount > 0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=n("333d"),s=n("4381"),l={id:null,name:null,description:null,sort:999,disabled:!0},r={name:"Build",components:{Pagination:o["a"]},directives:{permission:s["a"]},filters:{displayStatus:function(t){var e={true:"是",false:"否"};return e[t]}},data:function(){return{rules:{name:[{required:!0,message:"请输入岗位名",trigger:"blur"}]},form:Object.assign({},l),list:null,totalCount:0,listLoading:!0,formLoading:!1,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,multipleSelection:[],formTitle:"",isEdit:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/business/build",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},handleFilter:function(){this.page=1,this.getList()},handleCreate:function(){this.$router.push({path:"/tool/formCreate"})},handleConfig:function(){1==this.multipleSelection.length?this.$router.push({path:"/tool/buildEdit/"+this.multipleSelection[0].id}):this.$message({message:"配置生成必须选择单行",type:"warning"})},handleGen:function(){var t=this;1==this.multipleSelection.length?this.$axios.posts("/api/business/build/"+this.multipleSelection[0].id).then((function(e){t.$notify({title:"成功",message:"生成成功",type:"success",duration:2e3})})):this.$message({message:"生成代码必须选择单行",type:"warning"})},handleDownload:function(){var t=this;1==this.multipleSelection.length?this.$axios.downLoad("/api/business/build/download/"+this.multipleSelection[0].id).then((function(e){t.$notify({title:"成功",message:"下载成功",type:"success",duration:2e3});var n=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=n,i.setAttribute("download",t.multipleSelection[0].formName+".zip"),document.body.appendChild(i),i.click()})):this.$message({message:"下载代码必须选择单行",type:"warning"})},handleUpdate:function(t){if(t)this.$router.push({path:"/tool/formEdit/"+t.id});else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.$router.push({path:"/tool/formEdit/"+this.multipleSelection[0].id})}},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)}}},c=r,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},e7e1:function(t,e,n){},e9f5:function(t,e,n){"use strict";n("5a55")},eb3a:function(t,e,n){},ebe1:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"inline-block"}},[n("label",{staticClass:"radio-label"},[t._v("Book Type: ")]),t._v(" "),n("el-select",{staticStyle:{width:"120px"},model:{value:t.bookType,callback:function(e){t.bookType=e},expression:"bookType"}},t._l(t.options,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)},a=[],o={props:{value:{type:String,default:"xlsx"}},data:function(){return{options:["xlsx","csv","txt"]}},computed:{bookType:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},s=o,l=n("2877"),r=Object(l["a"])(s,i,a,!1,null,null,null);e["default"]=r.exports},ecac:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:6,xs:24}},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"18px"}},[t._v("个人信息")])]),t._v(" "),i("div",[i("div",{staticClass:"text-center"},[i("img",{staticClass:"img-circle img-lg",attrs:{src:n("11d2"),title:"点击上传头像"}})]),t._v(" "),i("ul",{staticClass:"list-group list-group-striped"},[i("li",{staticClass:"list-group-item"},[i("svg-icon",{attrs:{"icon-class":"user"}}),t._v(" 账号\n              "),i("div",{staticClass:"pull-right"},[t._v(t._s(t.user.userName))])],1),t._v(" "),i("li",{staticClass:"list-group-item"},[i("svg-icon",{attrs:{"icon-class":"user"}}),t._v(" 手机号码\n              "),i("div",{staticClass:"pull-right"},[t._v(t._s(t.user.phoneNumber))])],1),t._v(" "),i("li",{staticClass:"list-group-item"},[i("svg-icon",{attrs:{"icon-class":"email"}}),t._v(" 用户邮箱\n              "),i("div",{staticClass:"pull-right"},[t._v(t._s(t.user.email))])],1),t._v(" "),i("li",{staticClass:"list-group-item"},[i("svg-icon",{attrs:{"icon-class":"tree"}}),t._v(" 所属部门\n              "),t.user.dept?i("div",{staticClass:"pull-right"},[t._v(" / ")]):t._e()],1),t._v(" "),i("li",{staticClass:"list-group-item"},[i("svg-icon",{attrs:{"icon-class":"peoples"}}),t._v(" 所属角色\n              "),i("div",{staticClass:"pull-right"})],1)])])])],1),t._v(" "),i("el-col",{attrs:{span:18,xs:24}},[i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"18px"}},[t._v("基本资料")])]),t._v(" "),i("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("el-tab-pane",{attrs:{label:"基本资料",name:"userinfo"}},[i("userInfo",{attrs:{user:t.user}})],1),t._v(" "),i("el-tab-pane",{attrs:{label:"修改密码",name:"resetPwd"}},[i("resetPwd",{attrs:{user:t.user}})],1)],1)],1)],1)],1)],1)},a=[],o=n("2dde"),s=n("3823"),l={name:"Profile",components:{userInfo:o["default"],resetPwd:s["default"]},data:function(){return{user:{},roleGroup:{},postGroup:{},activeTab:"userinfo"}},created:function(){this.getUser()},methods:{getUser:function(){var t=this;this.$axios.gets("/api/account/my-profile").then((function(e){t.user=e}))}}},r=l,c=n("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);e["default"]=u.exports},ef3c:function(t,e,n){"use strict";n.r(e);n("a481");var i,a,o={created:function(){var t=this.$route,e=t.params,n=t.query,i=e.path;this.$router.replace({path:"/"+i,query:n})},render:function(t){return t()}},s=o,l=n("2877"),r=Object(l["a"])(s,i,a,!1,null,null,null);e["default"]=r.exports},f143:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{padding:"6px 0"}},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpTenantManagement.Tenants.Create"],expression:"['AbpTenantManagement.Tenants.Create']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新增")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"small","label-width":"90px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),t.isEdit?t._e():n("el-form-item",{attrs:{label:"管理员邮箱",prop:"adminEmailAddress"}},[n("el-input",{staticStyle:{width:"350px"},model:{value:t.form.adminEmailAddress,callback:function(e){t.$set(t.form,"adminEmailAddress",e)},expression:"form.adminEmailAddress"}})],1),t._v(" "),t.isEdit?t._e():n("el-form-item",{attrs:{label:"管理员密码",prop:"adminPassword"}},[n("el-input",{staticStyle:{width:"350px"},attrs:{type:"password"},model:{value:t.form.adminPassword,callback:function(e){t.$set(t.form,"adminPassword",e)},expression:"form.adminPassword"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"90%"},attrs:{data:t.list,size:"small"},on:{"sort-change":t.sortChange}},[n("el-table-column",{attrs:{label:"租户名称",prop:"name",sortable:"custom",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(i)}}},[t._v(t._s(i.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpTenantManagement.Tenants.Update"],expression:"['AbpTenantManagement.Tenants.Update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["AbpTenantManagement.Tenants.Delete"],expression:"['AbpTenantManagement.Tenants.Delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=(n("7f7f"),n("333d")),s=n("4381"),l={id:null,adminEmailAddress:"",adminPassword:"",name:""},r={name:"Tenant",components:{Pagination:o["a"]},directives:{permission:s["a"]},data:function(){return{rules:{name:[{required:!0,message:"请输入租户名",trigger:"blur"}]},form:Object.assign({},l),list:null,totalCount:0,listLoading:!0,formLoading:!1,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/multi-tenancy/tenants",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},fetchData:function(t){var e=this;this.$axios.gets("/api/multi-tenancy/tenants/"+t).then((function(t){e.form=t}))},handleFilter:function(){this.page=1,this.getList()},save:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.formLoading=!0,t.form.roleNames=t.checkedRole,t.isEdit?t.$axios.puts("/api/multi-tenancy/tenants/"+t.form.id,t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):t.$axios.posts("/api/multi-tenancy/tenants",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})))}))},handleCreate:function(){this.formTitle="新增租户",this.isEdit=!1,this.dialogFormVisible=!0},handleDelete:function(t){var e=this;this.$confirm("是否删除"+t.name+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.deletes("/api/multi-tenancy/tenants/"+t.id).then((function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleUpdate:function(t){if(this.formTitle="修改租户",this.isEdit=!0,t)this.fetchData(t.id),this.dialogFormVisible=!0;else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.fetchData(this.multipleSelection[0].id),this.dialogFormVisible=!0}},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},cancel:function(){this.form=Object.assign({},l),this.dialogFormVisible=!1,this.$refs.form.clearValidate()}}},c=r,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},f833:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{padding:"6px 0"}},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Job.Create"],expression:"['BaseService.Job.Create']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新增")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Job.Update"],expression:"['BaseService.Job.Update']"}],staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("修改")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Job.Delete"],expression:"['BaseService.Job.Delete']"}],staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.handleDelete()}},slot:"reference"},[t._v("删除")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"small","label-width":"80px"}},[n("el-form-item",{attrs:{label:"菜单类型",prop:"categoryId"}},[n("el-select",{staticStyle:{width:"184px"},attrs:{placeholder:"请选择",disabled:t.isEdit},model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}},[n("el-option",{attrs:{label:"菜单",value:1}}),t._v(" "),n("el-option",{attrs:{label:"按钮",value:2}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"上级菜单",prop:"menuType"}},[n("treeselect",{staticStyle:{width:"184px"},attrs:{"load-options":t.loadMenus,options:t.menus,disabled:t.isEdit,placeholder:"根目录"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[n("el-input",{staticStyle:{width:"184px"},attrs:{placeholder:"请输入菜单名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"显示名称",prop:"label"}},[n("el-input",{staticStyle:{width:"184px"},attrs:{placeholder:"请输入显示名称"},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"菜单排序",prop:"sort"}},[n("el-input-number",{staticStyle:{width:"184px"},attrs:{"controls-position":"right",min:0},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),t._v(" "),1==t.form.categoryId?n("el-form-item",{attrs:{label:"菜单图标",prop:"icon"}},[n("el-popover",{attrs:{placement:"bottom-start",width:"460",trigger:"click"},on:{show:function(e){return t.$refs["iconSelect"].reset()}}},[n("IconSelect",{ref:"iconSelect",on:{selected:t.selected}}),t._v(" "),n("el-input",{staticStyle:{width:"184px"},attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form.icon"}},[t.form.icon?n("svg-icon",{staticClass:"el-input__icon",staticStyle:{height:"32px",width:"16px"},attrs:{slot:"prefix","icon-class":t.form.icon},slot:"prefix"}):n("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})],1)],1)],1):t._e(),t._v(" "),1==t.form.categoryId?n("el-form-item",{attrs:{label:"路由地址",prop:"path"}},[n("el-input",{staticStyle:{width:"184px"},attrs:{placeholder:"请输入路由地址"},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1):t._e(),t._v(" "),1==t.form.categoryId?n("el-form-item",{attrs:{label:"组件路径",prop:"component"}},[n("el-input",{staticStyle:{width:"184px"},attrs:{placeholder:"请输入组件路径"},model:{value:t.form.component,callback:function(e){t.$set(t.form,"component",e)},expression:"form.component"}})],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"权限标识"}},[n("el-input",{staticStyle:{width:"184px"},attrs:{placeholder:"请输入权限标识",maxlength:"50"},model:{value:t.form.permission,callback:function(e){t.$set(t.form,"permission",e)},expression:"form.permission"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"90%"},attrs:{data:t.list,size:"small","row-key":"id","tree-props":{children:"children"}}},[n("el-table-column",{attrs:{label:"菜单名",prop:"label",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(i)}}},[t._v(t._s(i.label))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"icon",label:"图标",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("svg-icon",{attrs:{"icon-class":t.row.icon}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"排序",prop:"sort",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"菜单类型",prop:"categoryId",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("displayCategory")(e.row.categoryId)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"组件路径",prop:"component",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}},[t._v("修改")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount > 0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=(n("7f7f"),n("ac6a"),n("4381")),s=n("ca17"),l=n.n(s),r=(n("542c"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"icon-body"},[n("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:t.filterIcons},nativeOn:{input:function(e){return t.filterIcons(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[n("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v(" "),n("div",{staticClass:"icon-list"},t._l(t.iconList,(function(e,i){return n("div",{key:i,on:{click:function(n){return t.selectedIcon(e)}}},[n("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":e}}),t._v(" "),n("span",[t._v(t._s(e))])],1)})),0)],1)}),c=[],u=(n("6762"),n("2fdb"),n("4917"),n("51ff")),d=function(t){return t.keys()},p=/\.\/(.*)\.svg/,h=d(u).map((function(t){return t.match(p)[1]})),f=h,m={name:"IconSelect",data:function(){return{name:"",iconList:f}},methods:{filterIcons:function(){var t=this;this.iconList=f,this.name&&(this.iconList=this.iconList.filter((function(e){return e.includes(t.name)})))},selectedIcon:function(t){this.$emit("selected",t),document.body.click()},reset:function(){this.name="",this.iconList=f}}},v=m,g=(n("4599"),n("2877")),b=Object(g["a"])(v,r,c,!1,null,"0273f142",null),y=b.exports,_={id:null,pid:null,categoryId:1,name:null,path:"",sort:999,icon:""},x={name:"Menu",components:{IconSelect:y,Treeselect:l.a},directives:{permission:o["a"]},filters:{displayCategory:function(t){var e={1:"菜单",2:"按钮"};return e[t]}},data:function(){return{rules:{name:[{required:!0,message:"请输入菜单名",trigger:"blur"}],label:[{required:!0,message:"请输入显示名",trigger:"blur"}],sort:[{required:!0,message:"请输入序号",trigger:"blur"}]},form:Object.assign({},_),list:[],menus:[],totalCount:0,listLoading:!0,formLoading:!1,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1}},created:function(){this.getList()},methods:{selected:function(t){this.form.icon=t},getList:function(){var t=this;this.listLoading=!0,this.$axios.gets("/api/base/menu/all",this.listQuery).then((function(e){t.list=e.items.filter((function(t){return null==t.pid})),t.setChildren(t.list,e.items),t.listLoading=!1}))},setChildren:function(t,e){var n=this;t.forEach((function(t){e.forEach((function(e){e.pid==t.id&&(t.children||(t.children=[]),t.children.push(e))})),t.children&&n.setChildren(t.children,e)}))},fetchData:function(t){var e=this;this.$axios.gets("/api/base/menu/"+t).then((function(t){e.form=t,e.menus.push({id:t.pid,label:t.parentLabel})}))},loadMenus:function(t){var e=t.action,n=t.parentNode,i=t.callback;e===s["LOAD_CHILDREN_OPTIONS"]&&this.$axios.gets("/api/base/menu/loadMenus",{id:n.id}).then((function(t){n.children=t.items.map((function(t){return t.leaf||(t.children=null),t})),setTimeout((function(){i()}),100)}))},handleFilter:function(){this.page=1,this.getList()},save:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.formLoading=!0,t.form.roleNames=t.checkedRole,t.isEdit?t.$axios.puts("/api/base/menu/"+t.form.id,t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):t.$axios.posts("/api/base/menu",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})))}))},handleCreate:function(){var t=this;this.formTitle="新增菜单",this.isEdit=!1,this.dialogFormVisible=!0,this.$axios.gets("/api/base/menu/loadMenus").then((function(e){t.menus=e.items.map((function(t){return t.leaf||(t.children=null),t}))}))},handleDelete:function(t){var e=this,n=[],i="";if(t)n.push(t.id),i=t.name;else{if(0===this.multipleSelection.length)return void this.$message({message:"未选择",type:"warning"});this.multipleSelection.forEach((function(t){var e=t.id;n.push(e)})),i="选中项"}this.$confirm("是否删除"+i+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.posts("/api/base/menu/delete",n).then((function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleUpdate:function(t){if(this.formTitle="修改菜单",this.isEdit=!0,t)this.fetchData(t.id),this.dialogFormVisible=!0;else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.fetchData(this.multipleSelection[0].id),this.dialogFormVisible=!0}},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)},cancel:function(){this.form=Object.assign({},_),this.dialogFormVisible=!1,this.$refs.form.clearValidate()},changeEnabled:function(t,e){var n=this;t.active=e?"启用":"停用",this.$confirm("是否"+t.active+t.name+"？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$axios.puts("/api/base/menu/"+t.id,t).then((function(t){n.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})).catch((function(){t.enabled=!t.enabled}))})).catch((function(){t.enabled=!t.enabled}))}}},w=x,C=Object(g["a"])(w,i,a,!1,null,null,null);e["default"]=C.exports},fac5:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Filter,callback:function(e){t.$set(t.listQuery,"Filter",e)},expression:"listQuery.Filter"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{padding:"6px 0"}},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Job.Create"],expression:"['BaseService.Job.Create']"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新增")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Job.Update"],expression:"['BaseService.Job.Update']"}],staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate()}}},[t._v("修改")]),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Job.Delete"],expression:"['BaseService.Job.Delete']"}],staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.handleDelete()}},slot:"reference"},[t._v("删除")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:t.formTitle,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"small","label-width":"66px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{staticStyle:{width:"370px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"排序",prop:"sort"}},[n("el-input-number",{staticStyle:{width:"150px"},attrs:{min:0,max:999,"controls-position":"right"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",t._n(e))},expression:"form.sort"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"状态",prop:"enabled"}},[n("el-radio-group",{staticStyle:{width:"135px"},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}},[n("el-radio",{attrs:{label:!0}},[t._v("启用")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("禁用")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{staticStyle:{width:"370px"},attrs:{type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"90%"},attrs:{data:t.list,size:"small"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange,"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{type:"selection",width:"44px"}}),t._v(" "),n("el-table-column",{attrs:{label:"岗位名称",prop:"name",sortable:"custom",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(i)}}},[t._v(t._s(i.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"排序",prop:"sort",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.sort))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"描述",prop:"sort",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.description))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"状态",prop:"enable",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#F56C6C"},on:{change:function(n){return t.changeEnabled(e.row,e.row.enabled)}},model:{value:e.row.enabled,callback:function(n){t.$set(e.row,"enabled",n)},expression:"scope.row.enabled"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Job.Update"],expression:"['BaseService.Job.Update']"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i)}}}),t._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["BaseService.Job.Delete"],expression:"['BaseService.Job.Delete']"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i)}}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],attrs:{total:t.totalCount,page:t.page,limit:t.listQuery.MaxResultCount},on:{"update:page":function(e){t.page=e},"update:limit":function(e){return t.$set(t.listQuery,"MaxResultCount",e)},pagination:t.getList}})],1)},a=[],o=(n("ac6a"),n("7f7f"),n("333d")),s=n("4381"),l={id:null,name:null,description:null,sort:999,enabled:!0},r={name:"Job",components:{Pagination:o["a"]},directives:{permission:s["a"]},data:function(){return{rules:{name:[{required:!0,message:"请输入岗位名",trigger:"blur"}],sort:[{required:!0,message:"请输入序号",trigger:"blur"}]},form:Object.assign({},l),list:null,totalCount:0,listLoading:!0,formLoading:!1,listQuery:{Filter:"",Sorting:"",SkipCount:0,MaxResultCount:10},page:1,dialogFormVisible:!1,multipleSelection:[],formTitle:"",isEdit:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,this.listQuery.SkipCount=(this.page-1)*this.listQuery.MaxResultCount,this.$axios.gets("/api/base/job/all",this.listQuery).then((function(e){t.list=e.items,t.totalCount=e.totalCount,t.listLoading=!1}))},fetchData:function(t){var e=this;this.$axios.gets("/api/base/job/"+t).then((function(t){e.form=t}))},handleFilter:function(){this.page=1,this.getList()},save:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.formLoading=!0,t.form.roleNames=t.checkedRole,t.isEdit?t.$axios.puts("/api/base/job/"+t.form.id,t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})):t.$axios.posts("/api/base/job",t.form).then((function(e){t.formLoading=!1,t.$notify({title:"成功",message:"新增成功",type:"success",duration:2e3}),t.dialogFormVisible=!1,t.getList()})).catch((function(){t.formLoading=!1})))}))},handleCreate:function(){this.formTitle="新增岗位",this.isEdit=!1,this.dialogFormVisible=!0},handleDelete:function(t){var e=this,n=[],i="";if(t)n.push(t.id),i=t.name;else{if(0===this.multipleSelection.length)return void this.$message({message:"未选择",type:"warning"});this.multipleSelection.forEach((function(t){var e=t.id;n.push(e)})),i="选中项"}this.$confirm("是否删除"+i+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.posts("/api/base/job/delete",n).then((function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleUpdate:function(t){if(this.formTitle="修改岗位",this.isEdit=!0,t)this.fetchData(t.id),this.dialogFormVisible=!0;else{if(1!=this.multipleSelection.length)return void this.$message({message:"编辑必须选择单行",type:"warning"});this.fetchData(this.multipleSelection[0].id),this.dialogFormVisible=!0}},sortChange:function(t){var e=t.prop,n=t.order;e&&n?(this.listQuery.Sorting=e+" "+n,this.handleFilter()):this.handleFilter()},handleSelectionChange:function(t){this.multipleSelection=t},handleRowClick:function(t,e,n){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(t)},cancel:function(){this.form=Object.assign({},l),this.dialogFormVisible=!1,this.$refs.form.clearValidate()},changeEnabled:function(t,e){var n=this;t.active=e?"启用":"停用",this.$confirm("是否"+t.active+t.name+"？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$axios.puts("/api/base/job/"+t.id,t).then((function(t){n.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})).catch((function(){t.enabled=!t.enabled}))})).catch((function(){t.enabled=!t.enabled}))}}},c=r,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports}}]);